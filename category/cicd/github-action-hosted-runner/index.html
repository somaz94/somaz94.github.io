<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>Enterprise GitHub Actions Self-Hosted Runners: Production-Grade Kubernetes Deployment | somaz</title>
    <meta name="description" content="Master GitHub Actions self-hosted runners with comprehensive coverage of enterprise deployment, security hardening, advanced scaling, and operational excelle...">
    
        <meta name="keywords" content="github, kubernetes, helm, cicd, enterprise, security, scaling, devops">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Enterprise GitHub Actions Self-Hosted Runners: Production-Grade Kubernetes Deployment | somaz">
    <meta name="twitter:description" content="Master GitHub Actions self-hosted runners with comprehensive coverage of enterprise deployment, security hardening, advanced scaling, and operational excelle...">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737616011/github-hosted-runner_wfujyb.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/cicd/github-action-hosted-runner/">
    <meta property="og:title" content="Enterprise GitHub Actions Self-Hosted Runners: Production-Grade Kubernetes Deployment | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737616011/github-hosted-runner_wfujyb.png">
    <meta property="og:description" content="Master GitHub Actions self-hosted runners with comprehensive coverage of enterprise deployment, security hardening, advanced scaling, and operational excelle...">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/cicd/github-action-hosted-runner/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-05-05T00:00:00+00:00">
                            


May 5, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>24 min to read</span>
                </p>
                <h1 class="post-title">Enterprise GitHub Actions Self-Hosted Runners: Production-Grade Kubernetes Deployment</h1>
                <p class="post-subtitle">Complete guide to implementing scalable, secure, and production-ready GitHub Actions runners on Kubernetes with advanced patterns</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737616011/github-hosted-runner_wfujyb.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h1 id="overview">Overview</h1>

<p>GitHub Actions Self-Hosted Runners represent a paradigm shift in enterprise CI/CD infrastructure, enabling organizations to transcend the limitations of GitHub-hosted runners while maintaining complete control over their build environments.</p>

<p>In today’s cloud-native landscape, enterprises demand CI/CD infrastructure that can seamlessly scale from development teams to global organizations while ensuring security, compliance, and cost optimization.</p>

<p>This comprehensive guide explores the enterprise implementation of GitHub Actions self-hosted runners on Kubernetes, covering advanced deployment patterns, security hardening, performance optimization, and operational excellence practices.</p>

<p>Whether you’re building CI/CD infrastructure for a startup or orchestrating deployments across a global enterprise, this guide provides the depth and practical insights needed for production-ready implementations.</p>

<p><br /></p>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TB
      subgraph "Enterprise CI/CD Architecture"
        Dev[Development Teams] --&gt; GitHub[GitHub Repository]
        GitHub --&gt; Actions[GitHub Actions]
        Actions --&gt; Runners[Self-Hosted Runners]
      end
      
      subgraph "Kubernetes Infrastructure"
        Runners --&gt; ARC[Actions Runner Controller]
        ARC --&gt; Pods[Runner Pods]
        Pods --&gt; Resources[Compute Resources]
      end
      
      subgraph "Enterprise Integration"
        Resources --&gt; Security[Security Scanning]
        Resources --&gt; Monitoring[Monitoring &amp; Logging]
        Resources --&gt; Storage[Artifact Storage]
        Resources --&gt; Registry[Container Registry]
      end
      
      style Dev fill:#e3f2fd
      style GitHub fill:#f3e5f5
      style Actions fill:#e8f5e8
      style Runners fill:#fff3e0
      style ARC fill:#fce4ec
  </div>
</div>

<p><br /></p>

<h2 id="enterprise-architecture-deep-dive">Enterprise Architecture Deep Dive</h2>

<p>Modern enterprise CI/CD environments require sophisticated runner management that can handle diverse workloads, security requirements, and scaling demands. GitHub Actions self-hosted runners on Kubernetes provide the foundation for building resilient, scalable, and secure CI/CD infrastructure.</p>

<p><br /></p>

<h2 id="why-enterprise-self-hosted-runners">Why Enterprise Self-Hosted Runners?</h2>

<p><br /></p>

<h3 id="github-hosted-runner-limitations">GitHub-Hosted Runner Limitations</h3>
<p>While GitHub-hosted runners provide excellent out-of-the-box functionality, enterprise environments often encounter significant constraints:</p>

<h4 id="resource-constraints">Resource Constraints</h4>
<ul>
  <li>Limited to 2-core CPU and 7GB RAM for standard runners</li>
  <li>Maximum job execution time of 6 hours for public repositories, 35 minutes for private repositories (free plans)</li>
  <li>Restricted access to internal resources and private networks</li>
</ul>

<h4 id="security-and-compliance-gaps">Security and Compliance Gaps</h4>
<ul>
  <li>Limited control over the execution environment</li>
  <li>No ability to implement organization-specific security policies</li>
  <li>Challenges with compliance requirements (SOC 2, HIPAA, PCI DSS)</li>
  <li>Inability to use organization-specific security tools and scanning</li>
</ul>

<h4 id="cost-and-scale-considerations">Cost and Scale Considerations</h4>
<ul>
  <li>Per-minute billing can become expensive for high-volume CI/CD</li>
  <li>No cost predictability for large-scale operations</li>
  <li>Limited parallel job execution (20 jobs for free accounts, 180 for Pro)</li>
</ul>

<p><br /></p>

<h3 id="self-hosted-runner-enterprise-advantages">Self-Hosted Runner Enterprise Advantages</h3>

<h4 id="infrastructure-control">Infrastructure Control</h4>
<ul>
  <li>Complete control over compute resources and specifications</li>
  <li>Ability to scale vertically and horizontally based on demand</li>
  <li>Custom network configurations and security policies</li>
  <li>Integration with existing enterprise infrastructure</li>
</ul>

<h4 id="security-and-compliance">Security and Compliance</h4>
<ul>
  <li>Full control over the execution environment</li>
  <li>Implementation of organization-specific security tools</li>
  <li>Compliance with enterprise security policies</li>
  <li>Private network access without exposing internal resources</li>
</ul>

<h4 id="cost-optimization">Cost Optimization</h4>
<ul>
  <li>Predictable infrastructure costs</li>
  <li>Ability to optimize resource utilization</li>
  <li>No per-minute charges for CI/CD execution</li>
  <li>Shared infrastructure across multiple projects and teams</li>
</ul>

<h4 id="performance-and-customization">Performance and Customization</h4>
<ul>
  <li>Optimized environments for specific workloads</li>
  <li>Pre-configured tools and dependencies</li>
  <li>Faster build times through persistent caching</li>
  <li>Custom hardware configurations (GPU, high-memory instances)</li>
</ul>

<p><br /></p>

<h2 id="enterprise-architecture-components">Enterprise Architecture Components</h2>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TB
      subgraph "GitHub Enterprise"
        Org[GitHub Organization] --&gt; Repos[Repositories]
        Repos --&gt; Workflows[GitHub Actions Workflows]
      end
      
      subgraph "Kubernetes Control Plane"
        ARC[Actions Runner Controller]
        CRDs[Custom Resource Definitions]
        ScaleSet[RunnerScaleSet]
        Listener[Scale Set Listener Pod]
      end
      
      subgraph "Runner Infrastructure"
        Ephemeral[Ephemeral Runners]
        Persistent[Persistent Runners]
        Scaling[Horizontal Pod Autoscaler]
      end
      
      subgraph "Enterprise Services"
        Registry[Container Registry]
        Secrets[Secret Management]
        Monitoring[Observability Stack]
        Security[Security Scanning]
        Storage[Persistent Storage]
      end
      
      Workflows --&gt; ARC
      ARC --&gt; ScaleSet
      ScaleSet --&gt; Listener
      Listener --&gt; Ephemeral
      Ephemeral --&gt; Registry
      Ephemeral --&gt; Secrets
      Ephemeral --&gt; Monitoring
      Ephemeral --&gt; Security
      Ephemeral --&gt; Storage
      
      style Org fill:#f8f9fa
      style ARC fill:#e3f2fd
      style Ephemeral fill:#f3e5f5
      style Registry fill:#e8f5e8
  </div>
</div>

<p><br /></p>

<h2 id="understanding-github-action-hosted-runners">Understanding GitHub Action Hosted Runners</h2>

<p><br /></p>

<h3 id="enterprise-components-deep-dive">Enterprise Components Deep Dive</h3>

<div class="info-box info-box-default-not-check">
  <strong>1. Actions Runner Controller (ARC)</strong>
  <ul>
    <li>Kubernetes operator that manages GitHub Actions runners at enterprise scale</li>
    <li>Provides declarative configuration through Custom Resource Definitions (CRDs)</li>
    <li>Handles automatic provisioning, scaling, and lifecycle management</li>
    <li>Supports webhook-driven scaling for real-time responsiveness</li>
    <li>Integrates with Kubernetes RBAC and security policies</li>
  </ul>
</div>

<div class="info-box info-box-default-not-check">
  <strong>2. RunnerScaleSet</strong>
  <ul>
    <li>Custom resource that defines runner groups with specific configurations</li>
    <li>Supports multiple scaling strategies (webhook, scheduled, metric-based)</li>
    <li>Enables workload-specific runner configurations</li>
    <li>Provides isolation between different teams and projects</li>
    <li>Supports both ephemeral and persistent runner patterns</li>
  </ul>
</div>

<div class="info-box info-box-default-not-check">
  <strong>3. Scale Set Listener Pod</strong>
  <ul>
    <li>Maintains persistent connection with GitHub Actions service</li>
    <li>Receives webhook events for job queue changes</li>
    <li>Triggers scaling decisions based on workload demand</li>
    <li>Handles authentication and authorization with GitHub</li>
    <li>Provides metrics and observability for scaling operations</li>
  </ul>
</div>

<div class="info-box info-box-default-not-check">
  <strong>4. Enterprise Runner Pods</strong>
  <ul>
    <li>Containerized environments that execute GitHub Actions workflows</li>
    <li>Support for custom container images with enterprise tools</li>
    <li>Integration with enterprise security and compliance tools</li>
    <li>Persistent volume support for caching and artifacts</li>
    <li>Network isolation and security policy enforcement</li>
  </ul>
</div>

<p><br /></p>

<h3 id="enterprise-scaling-strategies">Enterprise Scaling Strategies</h3>

<h4 id="webhook-driven-scaling-recommended-for-production">Webhook-Driven Scaling (Recommended for Production)</h4>
<ul>
  <li>Real-time scaling based on GitHub Actions job queue</li>
  <li>Sub-second response times for new job requests</li>
  <li>Optimal resource utilization and cost efficiency</li>
  <li>Requires proper webhook endpoint configuration and security</li>
</ul>

<h4 id="scheduled-scaling">Scheduled Scaling</h4>
<ul>
  <li>Predictable scaling based on organizational patterns</li>
  <li>Ideal for known workload patterns (business hours, deployment windows)</li>
  <li>Combines with webhook scaling for hybrid approaches</li>
  <li>Supports timezone-aware scaling policies</li>
</ul>

<h4 id="metric-based-scaling">Metric-Based Scaling</h4>
<ul>
  <li>CPU, memory, and custom metric-driven scaling</li>
  <li>Integration with Prometheus and Kubernetes HPA</li>
  <li>Suitable for long-running workflows and resource-intensive tasks</li>
</ul>

<h4 id="metric-based-scaling-1">Metric-Based Scaling</h4>
<ul>
  <li>CPU, memory, and custom metric-driven scaling</li>
  <li>Integration with Prometheus and Kubernetes HPA</li>
  <li>Suitable for long-running workflows and resource-intensive tasks</li>
  <li>Provides granular control over scaling behavior</li>
</ul>

<p><br /></p>

<h2 id="enterprise-prerequisites-and-planning">Enterprise Prerequisites and Planning</h2>

<p><br /></p>

<h3 id="infrastructure-requirements">Infrastructure Requirements</h3>

<h4 id="kubernetes-cluster-specifications">Kubernetes Cluster Specifications</h4>
<ul>
  <li>Kubernetes 1.25+ with Container Runtime Interface (CRI) support</li>
  <li>Minimum 3 nodes for high availability (production environments)</li>
  <li>Resource allocation: 4 vCPU, 8GB RAM per node (baseline)</li>
  <li>Storage: 100GB+ per node for container images and build artifacts</li>
  <li>Network policies support for security isolation</li>
  <li>Load balancer integration for webhook endpoints</li>
</ul>

<h4 id="enterprise-security-foundation">Enterprise Security Foundation</h4>
<ul>
  <li>RBAC-enabled Kubernetes cluster with proper service accounts</li>
  <li>Network policies for runner pod isolation</li>
  <li>Pod Security Standards (restricted profile recommended)</li>
  <li>Container image scanning and vulnerability management</li>
  <li>Secrets management integration (HashiCorp Vault, AWS Secrets Manager, etc.)</li>
  <li>Certificate management for webhook TLS termination</li>
</ul>

<p><br /></p>

<h3 id="github-enterprise-configuration">GitHub Enterprise Configuration</h3>

<h4 id="organization-level-setup">Organization-Level Setup</h4>
<ul>
  <li>GitHub Enterprise Server 3.5+ or GitHub.com Enterprise plan</li>
  <li>Organization admin privileges for runner registration</li>
  <li>GitHub App registration with appropriate permissions:
    <ul>
      <li>Repository permissions: Actions (read), Administration (read), Metadata (read)</li>
      <li>Organization permissions: Self-hosted runners (write)</li>
    </ul>
  </li>
  <li>Personal Access Token (PAT) with appropriate scopes (fallback authentication)</li>
</ul>

<h4 id="repository-and-team-structure">Repository and Team Structure</h4>
<ul>
  <li>Clear runner group definitions by team, project, or environment</li>
  <li>Repository-specific vs organization-wide runner strategies</li>
  <li>Workflow labeling conventions for runner targeting</li>
  <li>Access control and approval workflows for sensitive deployments</li>
</ul>

<h3 id="network-and-connectivity">Network and Connectivity</h3>

<h4 id="outbound-connectivity-requirements">Outbound Connectivity Requirements</h4>
<ul>
  <li>HTTPS access to GitHub.com (api.github.com, github.com)</li>
  <li>Container registry access (ghcr.io, docker.io, enterprise registries)</li>
  <li>Package manager repositories (npm, pip, maven, etc.)</li>
  <li>Cloud provider APIs for infrastructure provisioning</li>
  <li>Internal enterprise services and APIs</li>
</ul>

<h4 id="webhook-endpoint-configuration">Webhook Endpoint Configuration</h4>
<ul>
  <li>Publicly accessible HTTPS endpoint for GitHub webhooks</li>
  <li>TLS certificate from trusted CA</li>
  <li>Network path from GitHub.com to Kubernetes cluster</li>
  <li>Load balancer configuration for high availability</li>
  <li>DDoS protection and rate limiting
    <ul>
      <li>Controls scaling and lifecycle through GitHub Actions API</li>
      <li>Optimizes communication between workflows and runners</li>
    </ul>
  </li>
</ul>

<h4 id="security-best-practices-assessment">Security Best Practices Assessment</h4>
<ul>
  <li>Vulnerability scanning for runner container images</li>
  <li>Runtime security monitoring and threat detection</li>
  <li>Compliance framework alignment (SOC 2, ISO 27001, etc.)</li>
  <li>Data encryption in transit and at rest</li>
  <li>Audit logging and monitoring requirements</li>
  <li>Incident response procedures for compromised runners</li>
</ul>

<p><br /></p>

<h2 id="enterprise-deployment-architecture">Enterprise Deployment Architecture</h2>

<p><br /></p>

<h3 id="production-grade-infrastructure-pattern">Production-Grade Infrastructure Pattern</h3>

<div style="width: 95%; margin: 20px auto;">
  <div class="mermaid">
    graph TB
      subgraph "GitHub Enterprise"
        GHE[GitHub Enterprise Server]
        Orgs[Organizations]
        Repos[Private Repositories]
        Apps[GitHub Apps]
      end
      
      subgraph "Network Layer"
        LB[Load Balancer]
        WAF[Web Application Firewall]
        CDN[Content Delivery Network]
        VPN[VPN Gateway]
      end
      
      subgraph "Kubernetes Control Plane"
        API[API Server]
        ETCD[etcd Cluster]
        CM[Controller Manager]
        Sched[Scheduler]
      end
      
      subgraph "ARC Components"
        Controller[ARC Controller]
        Webhook[Webhook Server]
        Metrics[Metrics Server]
        CRDs[Custom Resources]
      end
      
      subgraph "Runner Infrastructure"
        ScaleSets[Runner Scale Sets]
        Listeners[Listener Pods]
        Runners[Runner Pods]
        Storage[Persistent Storage]
      end
      
      subgraph "Enterprise Services"
        Registry[Container Registry]
        Vault[Secret Management]
        Monitor[Monitoring Stack]
        Logs[Centralized Logging]
        Backup[Backup Services]
      end
      
      GHE --&gt; LB
      LB --&gt; WAF
      WAF --&gt; VPN
      VPN --&gt; API
      API --&gt; Controller
      Controller --&gt; Webhook
      Controller --&gt; ScaleSets
      ScaleSets --&gt; Listeners
      Listeners --&gt; Runners
      Runners --&gt; Registry
      Runners --&gt; Vault
      Runners --&gt; Monitor
      
      style GHE fill:#f8f9fa
      style Controller fill:#e3f2fd
      style Runners fill:#f3e5f5
      style Registry fill:#e8f5e8
      style Vault fill:#fff3e0
  </div>
</div>

<p><br /></p>

<h3 id="multi-environment-strategy">Multi-Environment Strategy</h3>

<h4 id="development-environment">Development Environment</h4>
<ul>
  <li>Shared runner pools for cost optimization</li>
  <li>Relaxed security policies for developer productivity</li>
  <li>Integration with development tools and debugging capabilities</li>
  <li>Fast feedback loops with minimal resource constraints</li>
</ul>

<h4 id="staging-environment">Staging Environment</h4>
<ul>
  <li>Production-like configurations for testing</li>
  <li>Security policy enforcement testing</li>
  <li>Performance benchmarking and load testing</li>
  <li>Integration testing with enterprise services</li>
</ul>

<h4 id="production-environment">Production Environment</h4>
<ul>
  <li>Dedicated runner pools for critical workloads</li>
  <li>Maximum security and compliance enforcement</li>
  <li>High availability and disaster recovery capabilities</li>
  <li>Comprehensive monitoring and alerting</li>
</ul>

<p><br /></p>

<h3 id="self-hosted-vs-github-hosted-runners-comparison">Self-Hosted vs. GitHub-Hosted Runners Comparison</h3>

<p><br /></p>

<h4 id="enterprise-self-hosted-runners">Enterprise Self-Hosted Runners</h4>

<h5 id="advantages">Advantages:</h5>
<ul>
  <li><strong>Custom Hardware Specifications</strong>: GPU instances, high-memory nodes, specialized processors</li>
  <li><strong>Network Access</strong>: Direct access to internal APIs, databases, and enterprise services</li>
  <li><strong>Cost Optimization</strong>: No per-minute billing, predictable infrastructure costs</li>
  <li><strong>Performance</strong>: Optimized environments, persistent caching, faster build times</li>
  <li><strong>Security Control</strong>: Custom security tools, compliance frameworks, network isolation</li>
  <li><strong>Scalability</strong>: Unlimited parallel jobs, auto-scaling based on demand</li>
</ul>

<h5 id="considerations">Considerations:</h5>
<ul>
  <li><strong>Infrastructure Management</strong>: Kubernetes cluster maintenance and updates</li>
  <li><strong>Security Responsibility</strong>: Container image security, vulnerability management</li>
  <li><strong>Operational Overhead</strong>: Monitoring, troubleshooting, and incident response</li>
  <li><strong>Compliance</strong>: Meeting enterprise security and audit requirements</li>
</ul>

<p><br /></p>

<h4 id="github-hosted-runners">GitHub-Hosted Runners</h4>

<h5 id="advantages-1">Advantages:</h5>
<ul>
  <li><strong>Zero Maintenance</strong>: Fully managed by GitHub</li>
  <li><strong>Automatic Updates</strong>: Latest software and security patches</li>
  <li><strong>Clean Environment</strong>: Fresh instances for each job execution</li>
  <li><strong>Simple Setup</strong>: No infrastructure provisioning required</li>
</ul>

<h5 id="limitations">Limitations:</h5>
<ul>
  <li><strong>Resource Constraints</strong>: 2-core CPU, 7GB RAM maximum</li>
  <li><strong>Execution Time Limits</strong>: 6 hours for public, 35 minutes for private (free)</li>
  <li><strong>Network Isolation</strong>: No access to internal enterprise resources</li>
  <li><strong>Cost at Scale</strong>: Per-minute billing becomes expensive for high-volume usage</li>
  <li><strong>Limited Customization</strong>: Cannot install enterprise-specific tools</li>
</ul>

<p><br /></p>

<h2 id="enterprise-authentication-and-security">Enterprise Authentication and Security</h2>

<p><br /></p>

<h3 id="github-app-authentication-recommended-for-enterprise">GitHub App Authentication (Recommended for Enterprise)</h3>

<p>GitHub Apps provide the most secure and scalable authentication method for enterprise environments, offering fine-grained permissions and enhanced security features.</p>

<h4 id="enterprise-github-app-configuration">Enterprise GitHub App Configuration</h4>

<h5 id="1-github-app-creation-and-permissions">1. GitHub App Creation and Permissions</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Navigate to GitHub Organization Settings</span>
<span class="c"># https://github.com/organizations/{YOUR_ORG}/settings/apps</span>

<span class="c"># Required App Permissions:</span>
<span class="c"># Repository permissions:</span>
<span class="c">#   - Actions: Read</span>
<span class="c">#   - Administration: Read  </span>
<span class="c">#   - Metadata: Read</span>
<span class="c">#   - Pull requests: Read (for PR workflows)</span>
<span class="c">#   - Checks: Write (for status updates)</span>
<span class="c">#</span>
<span class="c"># Organization permissions:</span>
<span class="c">#   - Self-hosted runners: Write</span>
<span class="c">#   - Administration: Read (for organization-level deployment)</span>
</code></pre></div></div>

<h5 id="2-enterprise-security-configuration">2. Enterprise Security Configuration</h5>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># github-app-secret.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">github-app-auth</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">arc-systems</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">github_app_id</span><span class="pi">:</span> <span class="s">&lt;base64-encoded-app-id&gt;</span>
  <span class="na">github_app_installation_id</span><span class="pi">:</span> <span class="s">&lt;base64-encoded-installation-id&gt;</span>
  <span class="na">github_app_private_key</span><span class="pi">:</span> <span class="s">&lt;base64-encoded-private-key&gt;</span>
<span class="nn">---</span>
<span class="c1"># Enterprise RBAC Configuration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">arc-enterprise-role</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">"</span><span class="pi">]</span>
  <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">pods"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">secrets"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">configmaps"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">services"</span><span class="pi">]</span>
  <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">create"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">update"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">patch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">delete"</span><span class="pi">]</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">apps"</span><span class="pi">]</span>
  <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">deployments"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">replicasets"</span><span class="pi">]</span>
  <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">create"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">update"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">patch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">delete"</span><span class="pi">]</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">actions.summerwind.dev"</span><span class="pi">]</span>
  <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
  <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">arc-enterprise-binding</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">arc-enterprise-role</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">arc-controller</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">arc-systems</span>
</code></pre></div></div>

<h5 id="3-network-security-and-policies">3. Network Security and Policies</h5>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># network-policy-enterprise.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">NetworkPolicy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">arc-enterprise-network-policy</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">arc-systems</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">podSelector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">actions-runner</span>
  <span class="na">policyTypes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Ingress</span>
  <span class="pi">-</span> <span class="s">Egress</span>
  <span class="na">ingress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">namespaceSelector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">arc-systems</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
  <span class="na">egress</span><span class="pi">:</span>
  <span class="c1"># Allow DNS resolution</span>
  <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span> <span class="pi">[]</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">53</span>
  <span class="c1"># Allow HTTPS to GitHub</span>
  <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span> <span class="pi">[]</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
  <span class="c1"># Allow access to internal enterprise services</span>
  <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">namespaceSelector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">enterprise-services</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="personal-access-token-pat-authentication">Personal Access Token (PAT) Authentication</h3>

<p>For development and testing environments, PAT authentication provides a simpler setup process.</p>

<h4 id="enterprise-pat-security-requirements">Enterprise PAT Security Requirements</h4>
<ul>
  <li>Fine-grained personal access tokens (beta) recommended</li>
  <li>Organization-specific token scopes</li>
  <li>Regular token rotation (90-day maximum)</li>
  <li>Secure storage in enterprise secret management system</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Required PAT Scopes for Enterprise:</span>
<span class="c"># - repo (Full control of private repositories)</span>
<span class="c"># - admin:org (Full control of orgs and teams, read and write org projects)</span>
<span class="c"># - workflow (Update GitHub Action workflows)</span>

<span class="c"># Create PAT secret</span>
kubectl create secret generic github-pat-secret <span class="nt">--from-literal</span><span class="o">=</span><span class="nv">github_token</span><span class="o">=</span><span class="nv">$GITHUB_PAT</span> <span class="nt">--namespace</span><span class="o">=</span>arc-systems

<span class="c"># Verify secret creation</span>
kubectl get secret github-pat-secret <span class="nt">-n</span> arc-systems <span class="nt">-o</span> yaml
</code></pre></div></div>

<p><br /></p>

<h3 id="enterprise-authentication-best-practices">Enterprise Authentication Best Practices</h3>

<h4 id="1-credential-management">1. Credential Management</h4>
<ul>
  <li>Use enterprise secret management solutions (HashiCorp Vault, AWS Secrets Manager)</li>
  <li>Implement automatic credential rotation</li>
  <li>Audit credential access and usage</li>
  <li>Never store credentials in code or configuration files</li>
</ul>

<h4 id="2-access-control">2. Access Control</h4>
<ul>
  <li>Implement least-privilege access principles</li>
  <li>Use separate authentication for different environments</li>
  <li>Regular access reviews and permission audits</li>
  <li>Multi-factor authentication enforcement</li>
</ul>

<h4 id="3-monitoring-and-compliance">3. Monitoring and Compliance</h4>
<ul>
  <li>Comprehensive audit logging for all authentication events</li>
  <li>Integration with SIEM systems for security monitoring</li>
  <li>Compliance reporting for regulatory requirements</li>
  <li>Incident response procedures for compromised credentials</li>
</ul>

<p><br /></p>

<h3 id="option-1-github-pat-token">Option 1: GitHub PAT Token</h3>
<p><code class="language-plaintext highlighter-rouge">Github Organization/Account settings → Settings → Developer settings → GitHub Personal access tokens</code></p>
<ul>
  <li>PAT Token is required for the runner to authenticate with GitHub.</li>
  <li>Below is an example of PAT Token permissions.</li>
</ul>

<div class="info-box info-box-default-not-check">
    <strong>Required scopes:</strong>
    <ul>
        <li>Repository Level: repo, workflow</li>
        <li>Organization Level: read:org, admin:org, workflow</li>
        <li>Enterprise Level: admin:enterprise, workflow</li>
    </ul>
</div>

<p><br /></p>

<h3 id="option-2-github-app">Option 2: GitHub App</h3>

<h4 id="if-you-have-an-existing-app">If you have an existing app</h4>
<ul>
  <li>Click the app</li>
  <li>Check “App ID” in “About” section</li>
</ul>

<h4 id="if-you-dont-have-an-existing-app">If you don’t have an existing app</h4>
<ul>
  <li>Create new GitHub App</li>
  <li>Input the required Information
    <ul>
      <li>GitHub App name</li>
      <li>Homepage URL</li>
      <li>Webhook URL (Optional)</li>
      <li>Repository permissions Settings:
        <ul>
          <li>Actions: Read and Write</li>
          <li>Administration: Read and Write</li>
          <li>Metadata: Read-only</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Click”Create GitHub App”</li>
</ul>

<h4 id="get-installation-id">Get Installation ID</h4>
<ul>
  <li>Click “Install App”</li>
  <li>Select the repository or organization</li>
  <li>Click “Install”</li>
  <li>Check “Installation ID” in “About” section
    <ul>
      <li><code class="language-plaintext highlighter-rouge">https://github.com/organizations/YOUR-ORG/settings/installations/INSTALLATION_ID</code></li>
    </ul>
  </li>
</ul>

<h4 id="generate-private-key">Generate private key</h4>
<ul>
  <li>Move App Settings Page</li>
  <li>Click “Generate a private key”</li>
  <li>Download the private key file</li>
</ul>

<p><br /></p>

<div class="info-box info-box-default-not-check">
    <strong>1.Required permissions:</strong>
    <ul>
        <li>Actions: Read and Write</li>
        <li>Administration: Read and Write</li>
        <li>Metadata: Read-only</li>
    </ul>
    <strong>2. Get App ID and Installation ID</strong>
    <strong>3. Generate private key</strong>
</div>

<p><br /><br /></p>

<h2 id="installation">Installation</h2>

<p><br /></p>

<h3 id="1-add-helm-repository">1. Add Helm Repository</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm repo add actions-runner-controller https://actions-runner-controller.github.io/actions-runner-controller
</code></pre></div></div>

<p><br /></p>

<h3 id="2-create-namespace">2. Create Namespace</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create namespace actions-runner-system
</code></pre></div></div>

<p><br /></p>

<h3 id="3-install-controller">3. Install Controller</h3>

<p><br /></p>

<script src="https://gist.github.com/somaz94/27b8629ecdc00e5f3c94504dbb658d4f.js"></script>

<p><br /></p>

<h3 id="4-deploy-runner">4. Deploy Runner</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> runner-cr.yaml
</code></pre></div></div>

<p><br /><br /></p>

<h2 id="configuration-files">Configuration Files</h2>

<p><br /></p>

<h3 id="runneryaml"><code class="language-plaintext highlighter-rouge">runner.yaml</code></h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">authSecret</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">create</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">controller-manager"</span>
  <span class="na">github_token</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ghp_xxxxxxxxxxxxxxxxxxxxxxxx"</span>

<span class="na">image</span><span class="pi">:</span>
  <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">summerwind/actions-runner-controller"</span>
  <span class="na">actionsRunnerRepositoryAndTag</span><span class="pi">:</span> <span class="s2">"</span><span class="s">summerwind/actions-runner:latest"</span>
  <span class="na">dindSidecarRepositoryAndTag</span><span class="pi">:</span> <span class="s2">"</span><span class="s">docker:dind"</span>
  <span class="na">pullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>

<span class="na">rbac</span><span class="pi">:</span>
  <span class="na">allowGrantingKubernetesContainerModePermissions</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">serviceAccount</span><span class="pi">:</span>
  <span class="na">create</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="runner-cryaml"><code class="language-plaintext highlighter-rouge">runner-cr.yaml</code></h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">example-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">self-hosted</span>
        <span class="pi">-</span> <span class="s">linux</span>
        <span class="pi">-</span> <span class="s">x64</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="advanced-runner-configurations">Advanced Runner Configurations</h2>

<p><br /></p>

<h3 id="1-auto-scaling-runners">1. Auto-Scaling Runners</h3>

<p>Create a Horizontal Pod Autoscaler (HPA) for runners:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">HorizontalRunnerAutoscaler</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">runner-autoscaler</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">scaleTargetRef</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">example-runner</span>
  <span class="na">minReplicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">maxReplicas</span><span class="pi">:</span> <span class="m">10</span>
  <span class="na">metrics</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">TotalNumberOfQueuedAndInProgressWorkflowRuns</span>
    <span class="na">repositoryNames</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">your-github-username/your-repository</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="2-organization-level-runners">2. Organization-Level Runners</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">org-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">organization</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-organization"</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">org-runner</span>
        <span class="pi">-</span> <span class="s">linux</span>
        <span class="pi">-</span> <span class="s">x64</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="3-runner-with-docker-in-docker-dind-support">3. Runner with Docker-in-Docker (DinD) Support</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">docker-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">summerwind/actions-runner:latest</span>
      <span class="na">dockerEnabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">docker</span>
        <span class="pi">-</span> <span class="s">linux</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="4-ephemeral-runners-run-once-and-terminate">4. Ephemeral Runners (Run once and terminate)</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ephemeral-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">ephemeral</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">ephemeral</span>
        <span class="pi">-</span> <span class="s">linux</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="5-github-app-authentication-configuration">5. GitHub App Authentication Configuration</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># GitHub App Secret</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">github-app-secret</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">actions-runner-system</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">app-id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">APP_ID_BASE64"</span>
  <span class="na">installation-id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">INSTALLATION_ID_BASE64"</span>
  <span class="na">private-key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">PRIVATE_KEY_BASE64"</span>

<span class="c1"># Controller configuration</span>
<span class="na">authSecret</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">create</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">github-app-secret"</span>
</code></pre></div></div>

<p><br /><br /></p>

<h2 id="resource-management-and-optimization">Resource Management and Optimization</h2>

<p><br /></p>

<h3 id="1-runner-resource-configuration">1. Runner Resource Configuration</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">resource-optimized-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">resources</span><span class="pi">:</span>
        <span class="na">limits</span><span class="pi">:</span>
          <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.0"</span>
          <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">4Gi"</span>
        <span class="na">requests</span><span class="pi">:</span>
          <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1.0"</span>
          <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2Gi"</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">resource-optimized</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="2-runner-with-node-selectors-and-tolerations">2. Runner with Node Selectors and Tolerations</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">dedicated-node-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">nodeSelector</span><span class="pi">:</span>
        <span class="na">node-type</span><span class="pi">:</span> <span class="s">actions-runner</span>
      <span class="na">tolerations</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dedicated"</span>
        <span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Equal"</span>
        <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">actions-runner"</span>
        <span class="na">effect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">NoSchedule"</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">dedicated-node</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="verification">Verification</h2>

<h3 id="check-installation">Check Installation</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get po <span class="nt">-n</span> actions-runner-system
kubectl get runnerdeployments.actions.summerwind.dev
</code></pre></div></div>

<h3 id="verify-runner-connection">Verify Runner Connection</h3>
<p>Check runners in your repository:
<code class="language-plaintext highlighter-rouge">Settings → Actions → Runners</code>
<img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737616011/github-hosted-runner_wfujyb.png" alt="GitHub Runner" width="800" /></p>

<h3 id="example-workflow">Example Workflow</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Example Workflow</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">test-job</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">self-hosted</span>
    <span class="c1"># or runs-on: [self-hosted, linux, x64]</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Test Step</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "Running on self-hosted runner"</span>
</code></pre></div></div>

<h3 id="advanced-workflow-examples">Advanced Workflow Examples</h3>

<h4 id="using-docker-in-self-hosted-runner">Using Docker in Self-Hosted Runner</h4>

<script src="https://gist.github.com/somaz94/328fbc875d608d8a682ed939df0388d9.js"></script>

<p><br /></p>

<h4 id="workflow-with-multiple-runner-types">Workflow with Multiple Runner Types</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Multi-Runner Workflow</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">linux</span><span class="pi">,</span> <span class="nv">build</span><span class="pi">]</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build App</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">npm ci &amp;&amp; npm run build</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-artifact@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">build/</span>
          
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">build</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">linux</span><span class="pi">,</span> <span class="nv">test</span><span class="pi">]</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Download Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">build/</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run Tests</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">npm ci &amp;&amp; npm test</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p><br /></p>

<h3 id="common-issues-and-solutions">Common Issues and Solutions:</h3>

<h4 id="1-runner-registration-failures">1. Runner Registration Failures:</h4>
<ul>
  <li>Check PAT token or GitHub App authentication</li>
  <li>Verify network connectivity to GitHub</li>
  <li>Ensure proper permissions for tokens</li>
  <li>Check logs: kubectl logs -n actions-runner-system deployment/actions-runner-controller-controller-manager</li>
</ul>

<h4 id="2-runner-pod-crashes">2. Runner Pod Crashes:</h4>
<ul>
  <li>Check resource limits</li>
  <li>Verify container image compatibility</li>
  <li>Inspect pod logs: kubectl logs -n actions-runner-system pod/runner-pod-name</li>
  <li>Check pod events: kubectl describe pod -n actions-runner-system runner-pod-name</li>
</ul>

<h4 id="3-runners-not-picking-up-jobs">3. Runners Not Picking Up Jobs:</h4>
<ul>
  <li>Verify runner labels match workflow configuration</li>
  <li>Check if runners are idle or busy</li>
  <li>Ensure proper repository/organization configuration</li>
  <li>Check runner status in GitHub UI</li>
</ul>

<h4 id="4-docker-in-docker-issues">4. Docker-in-Docker Issues:</h4>
<ul>
  <li>Verify dockerEnabled: true is set</li>
  <li>Check if runner has proper privileges</li>
  <li>Inspect DinD sidecar logs</li>
  <li>Consider volume configuration for Docker socket</li>
</ul>

<p><br /></p>

<h3 id="useful-debugging-commands">Useful Debugging Commands</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check controller status</span>
kubectl logs <span class="nt">-n</span> actions-runner-system deployment/actions-runner-controller-controller-manager

<span class="c"># View runner deployment status</span>
kubectl describe runnerdeployments.actions.summerwind.dev example-runner

<span class="c"># Check runner pod logs</span>
kubectl logs <span class="nt">-n</span> actions-runner-system pod/example-runner-pod-name

<span class="c"># Verify runner set status</span>
kubectl get runnersets.actions.summerwind.dev <span class="nt">-n</span> actions-runner-system

<span class="c"># Check runner autoscaler status</span>
kubectl describe horizontalrunnerautoscaler.actions.summerwind.dev runner-autoscaler
</code></pre></div></div>

<p><br /></p>

<h2 id="security-best-practices">Security Best Practices</h2>

<p><br /></p>

<h3 id="security-recommendations">Security Recommendations:</h3>

<h4 id="1-runner-isolation">1. Runner Isolation:</h4>
<ul>
  <li>Use ephemeral runners for untrusted code</li>
  <li>Isolate runners in dedicated namespaces</li>
  <li>Consider using runner groups for sensitive projects</li>
  <li>Implement network policies to restrict communication</li>
</ul>

<h4 id="2-authentication">2. Authentication:</h4>
<ul>
  <li>Use GitHub Apps instead of PAT tokens</li>
  <li>Rotate private keys regularly</li>
  <li>Store secrets securely using Kubernetes Secrets</li>
  <li>Implement least privilege principle for tokens</li>
</ul>

<h4 id="3-runner-protection">3. Runner Protection:</h4>
<ul>
  <li>Don’t grant sudo/admin privileges unless necessary</li>
  <li>Limit runner capabilities</li>
  <li>Consider using gVisor or similar sandbox technologies</li>
  <li>Scan runner images for vulnerabilities</li>
</ul>

<h4 id="4-docker-security">4. Docker Security:</h4>
<ul>
  <li>Use rootless Docker when possible</li>
  <li>Implement proper resource limits</li>
  <li>Consider alternatives like Kaniko for building without Docker daemon</li>
  <li>Scan container images during build</li>
</ul>

<p><br /></p>

<h3 id="sample-secure-runner-configuration">Sample Secure Runner Configuration</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RunnerDeployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">secure-runner</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">repository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-github-username/your-repository"</span>
      <span class="na">ephemeral</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">securityContext</span><span class="pi">:</span>
        <span class="na">runAsNonRoot</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">runAsUser</span><span class="pi">:</span> <span class="m">1000</span>
        <span class="na">fsGroup</span><span class="pi">:</span> <span class="m">1000</span>
      <span class="na">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">tmp</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/tmp</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">tmp</span>
          <span class="na">emptyDir</span><span class="pi">:</span> <span class="pi">{}</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">secure-runner</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="upgrade-and-maintenance">Upgrade and Maintenance</h2>

<p><br /></p>

<h3 id="upgrading-actions-runner-controller">Upgrading Actions Runner Controller</h3>

<p><br /></p>

<script src="https://gist.github.com/somaz94/1f0099b028962eba1bc1304572b02439.js"></script>

<p><br /></p>

<h3 id="scaling-for-production-workloads">Scaling for Production Workloads</h3>

<p>For production environments, consider the following scaling configurations:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">actions.summerwind.dev/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">HorizontalRunnerAutoscaler</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">production-runner-autoscaler</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">scaleTargetRef</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">production-runner</span>
  <span class="na">minReplicas</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">maxReplicas</span><span class="pi">:</span> <span class="m">20</span>
  <span class="na">scaleDownDelaySecondsAfterScaleOut</span><span class="pi">:</span> <span class="m">300</span>
  <span class="na">metrics</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">PercentageRunnersBusy</span>
    <span class="na">scaleUpThreshold</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.75'</span>
    <span class="na">scaleDownThreshold</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.25'</span>
    <span class="na">scaleUpFactor</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
    <span class="na">scaleDownFactor</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.5'</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="key-considerations">Key Considerations</h2>
<div class="info-box info-box-success-not-check">
    <strong>1. Authentication:</strong>
    <ul>
        <li>You must choose between GitHub App or PAT authentication</li>
        <li>GitHub App is recommended (better security and permissions management)</li>
    </ul><br />
    <strong>2. Permissions:</strong>
    <ul>
        <li>Set the proper permissions and resources required for Runner</li>
    </ul><br />
    <strong>3. Network Policy:</strong>
    <ul>
        <li>Check network policy and security settings</li>
    </ul>
</div>

<p><br /></p>

<hr />

<h2 id="references">References</h2>
<ul>
  <li><a href="https://github.com/actions/actions-runner-controller">Actions Runner Controller GitHub</a></li>
  <li><a href="https://docs.github.com/en/actions/hosting-your-own-runners">GitHub Self-Hosted Runners Documentation</a></li>
  <li><a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners">Managing Self-Hosted Runners</a></li>
  <li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">Kubernetes RBAC Documentation</a></li>
  <li><a href="https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions">GitHub Actions Security Hardening</a></li>
  <li><a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">Autoscaling with Kubernetes</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/data-engineering/apache-spark/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755584225/apache-spark-1_cfwqma.png">
                                    
                                    <h3>Apache Spark Complete Guide for Big Data Processing</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/virtualization/xen/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755589744/xen-1_ipuu6j.png">
                                    
                                    <h3>Xen Orchestra Complete Guide - XCP-ng Web Management Platform</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/data-engineering/oltp-olap/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755575326/oltp-olap_gqmvnx.png">
                                    
                                    <h3>Large-Scale Data Processing and Data Architecture Design</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="24">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/aws/eks-pod-identity/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737622654/eks-pod-identity_k6lxvi.png">
                
            </div>
            <h3 class="title">Understanding Amazon EKS Pod Identity Addon</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Master GitHub Actions self-hosted runners with comprehensive coverage of enterprise deployment, security hardening, advanced scaling, and operational excellence on Kubernetes&quot;%20https://somaz.blog/category/cicd/github-action-hosted-runner/%20via%20&#64;twitter_username&hashtags=github,kubernetes,helm,cicd,enterprise,security,scaling,devops"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/cicd/github-action-hosted-runner/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/cicd/github-action-hosted-runner/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "Enterprise GitHub Actions Self-Hosted Runners: Production-Grade Kubernetes Deployment",
            "headline": "Complete guide to implementing scalable, secure, and production-ready GitHub Actions runners on Kubernetes with advanced patterns",
            "description": "Master GitHub Actions self-hosted runners with comprehensive coverage of enterprise deployment, security hardening, advanced scaling, and operational excellence on Kubernetes",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737616011/github-hosted-runner_wfujyb.png",
            "url": "https://somaz.blog/category/cicd/github-action-hosted-runner/",
            "articleBody": "



Overview

GitHub Actions Self-Hosted Runners represent a paradigm shift in enterprise CI/CD infrastructure, enabling organizations to transcend the limitations of GitHub-hosted runners while maintaining complete control over their build environments.

In today’s cloud-native landscape, enterprises demand CI/CD infrastructure that can seamlessly scale from development teams to global organizations while ensuring security, compliance, and cost optimization.

This comprehensive guide explores the enterprise implementation of GitHub Actions self-hosted runners on Kubernetes, covering advanced deployment patterns, security hardening, performance optimization, and operational excellence practices.

Whether you’re building CI/CD infrastructure for a startup or orchestrating deployments across a global enterprise, this guide provides the depth and practical insights needed for production-ready implementations.




  
    graph TB
      subgraph &quot;Enterprise CI/CD Architecture&quot;
        Dev[Development Teams] --&amp;gt; GitHub[GitHub Repository]
        GitHub --&amp;gt; Actions[GitHub Actions]
        Actions --&amp;gt; Runners[Self-Hosted Runners]
      end
      
      subgraph &quot;Kubernetes Infrastructure&quot;
        Runners --&amp;gt; ARC[Actions Runner Controller]
        ARC --&amp;gt; Pods[Runner Pods]
        Pods --&amp;gt; Resources[Compute Resources]
      end
      
      subgraph &quot;Enterprise Integration&quot;
        Resources --&amp;gt; Security[Security Scanning]
        Resources --&amp;gt; Monitoring[Monitoring &amp;amp; Logging]
        Resources --&amp;gt; Storage[Artifact Storage]
        Resources --&amp;gt; Registry[Container Registry]
      end
      
      style Dev fill:#e3f2fd
      style GitHub fill:#f3e5f5
      style Actions fill:#e8f5e8
      style Runners fill:#fff3e0
      style ARC fill:#fce4ec
  




Enterprise Architecture Deep Dive

Modern enterprise CI/CD environments require sophisticated runner management that can handle diverse workloads, security requirements, and scaling demands. GitHub Actions self-hosted runners on Kubernetes provide the foundation for building resilient, scalable, and secure CI/CD infrastructure.



Why Enterprise Self-Hosted Runners?



GitHub-Hosted Runner Limitations
While GitHub-hosted runners provide excellent out-of-the-box functionality, enterprise environments often encounter significant constraints:

Resource Constraints

  Limited to 2-core CPU and 7GB RAM for standard runners
  Maximum job execution time of 6 hours for public repositories, 35 minutes for private repositories (free plans)
  Restricted access to internal resources and private networks


Security and Compliance Gaps

  Limited control over the execution environment
  No ability to implement organization-specific security policies
  Challenges with compliance requirements (SOC 2, HIPAA, PCI DSS)
  Inability to use organization-specific security tools and scanning


Cost and Scale Considerations

  Per-minute billing can become expensive for high-volume CI/CD
  No cost predictability for large-scale operations
  Limited parallel job execution (20 jobs for free accounts, 180 for Pro)




Self-Hosted Runner Enterprise Advantages

Infrastructure Control

  Complete control over compute resources and specifications
  Ability to scale vertically and horizontally based on demand
  Custom network configurations and security policies
  Integration with existing enterprise infrastructure


Security and Compliance

  Full control over the execution environment
  Implementation of organization-specific security tools
  Compliance with enterprise security policies
  Private network access without exposing internal resources


Cost Optimization

  Predictable infrastructure costs
  Ability to optimize resource utilization
  No per-minute charges for CI/CD execution
  Shared infrastructure across multiple projects and teams


Performance and Customization

  Optimized environments for specific workloads
  Pre-configured tools and dependencies
  Faster build times through persistent caching
  Custom hardware configurations (GPU, high-memory instances)




Enterprise Architecture Components


  
    graph TB
      subgraph &quot;GitHub Enterprise&quot;
        Org[GitHub Organization] --&amp;gt; Repos[Repositories]
        Repos --&amp;gt; Workflows[GitHub Actions Workflows]
      end
      
      subgraph &quot;Kubernetes Control Plane&quot;
        ARC[Actions Runner Controller]
        CRDs[Custom Resource Definitions]
        ScaleSet[RunnerScaleSet]
        Listener[Scale Set Listener Pod]
      end
      
      subgraph &quot;Runner Infrastructure&quot;
        Ephemeral[Ephemeral Runners]
        Persistent[Persistent Runners]
        Scaling[Horizontal Pod Autoscaler]
      end
      
      subgraph &quot;Enterprise Services&quot;
        Registry[Container Registry]
        Secrets[Secret Management]
        Monitoring[Observability Stack]
        Security[Security Scanning]
        Storage[Persistent Storage]
      end
      
      Workflows --&amp;gt; ARC
      ARC --&amp;gt; ScaleSet
      ScaleSet --&amp;gt; Listener
      Listener --&amp;gt; Ephemeral
      Ephemeral --&amp;gt; Registry
      Ephemeral --&amp;gt; Secrets
      Ephemeral --&amp;gt; Monitoring
      Ephemeral --&amp;gt; Security
      Ephemeral --&amp;gt; Storage
      
      style Org fill:#f8f9fa
      style ARC fill:#e3f2fd
      style Ephemeral fill:#f3e5f5
      style Registry fill:#e8f5e8
  




Understanding GitHub Action Hosted Runners



Enterprise Components Deep Dive


  1. Actions Runner Controller (ARC)
  
    Kubernetes operator that manages GitHub Actions runners at enterprise scale
    Provides declarative configuration through Custom Resource Definitions (CRDs)
    Handles automatic provisioning, scaling, and lifecycle management
    Supports webhook-driven scaling for real-time responsiveness
    Integrates with Kubernetes RBAC and security policies
  



  2. RunnerScaleSet
  
    Custom resource that defines runner groups with specific configurations
    Supports multiple scaling strategies (webhook, scheduled, metric-based)
    Enables workload-specific runner configurations
    Provides isolation between different teams and projects
    Supports both ephemeral and persistent runner patterns
  



  3. Scale Set Listener Pod
  
    Maintains persistent connection with GitHub Actions service
    Receives webhook events for job queue changes
    Triggers scaling decisions based on workload demand
    Handles authentication and authorization with GitHub
    Provides metrics and observability for scaling operations
  



  4. Enterprise Runner Pods
  
    Containerized environments that execute GitHub Actions workflows
    Support for custom container images with enterprise tools
    Integration with enterprise security and compliance tools
    Persistent volume support for caching and artifacts
    Network isolation and security policy enforcement
  




Enterprise Scaling Strategies

Webhook-Driven Scaling (Recommended for Production)

  Real-time scaling based on GitHub Actions job queue
  Sub-second response times for new job requests
  Optimal resource utilization and cost efficiency
  Requires proper webhook endpoint configuration and security


Scheduled Scaling

  Predictable scaling based on organizational patterns
  Ideal for known workload patterns (business hours, deployment windows)
  Combines with webhook scaling for hybrid approaches
  Supports timezone-aware scaling policies


Metric-Based Scaling

  CPU, memory, and custom metric-driven scaling
  Integration with Prometheus and Kubernetes HPA
  Suitable for long-running workflows and resource-intensive tasks


Metric-Based Scaling

  CPU, memory, and custom metric-driven scaling
  Integration with Prometheus and Kubernetes HPA
  Suitable for long-running workflows and resource-intensive tasks
  Provides granular control over scaling behavior




Enterprise Prerequisites and Planning



Infrastructure Requirements

Kubernetes Cluster Specifications

  Kubernetes 1.25+ with Container Runtime Interface (CRI) support
  Minimum 3 nodes for high availability (production environments)
  Resource allocation: 4 vCPU, 8GB RAM per node (baseline)
  Storage: 100GB+ per node for container images and build artifacts
  Network policies support for security isolation
  Load balancer integration for webhook endpoints


Enterprise Security Foundation

  RBAC-enabled Kubernetes cluster with proper service accounts
  Network policies for runner pod isolation
  Pod Security Standards (restricted profile recommended)
  Container image scanning and vulnerability management
  Secrets management integration (HashiCorp Vault, AWS Secrets Manager, etc.)
  Certificate management for webhook TLS termination




GitHub Enterprise Configuration

Organization-Level Setup

  GitHub Enterprise Server 3.5+ or GitHub.com Enterprise plan
  Organization admin privileges for runner registration
  GitHub App registration with appropriate permissions:
    
      Repository permissions: Actions (read), Administration (read), Metadata (read)
      Organization permissions: Self-hosted runners (write)
    
  
  Personal Access Token (PAT) with appropriate scopes (fallback authentication)


Repository and Team Structure

  Clear runner group definitions by team, project, or environment
  Repository-specific vs organization-wide runner strategies
  Workflow labeling conventions for runner targeting
  Access control and approval workflows for sensitive deployments


Network and Connectivity

Outbound Connectivity Requirements

  HTTPS access to GitHub.com (api.github.com, github.com)
  Container registry access (ghcr.io, docker.io, enterprise registries)
  Package manager repositories (npm, pip, maven, etc.)
  Cloud provider APIs for infrastructure provisioning
  Internal enterprise services and APIs


Webhook Endpoint Configuration

  Publicly accessible HTTPS endpoint for GitHub webhooks
  TLS certificate from trusted CA
  Network path from GitHub.com to Kubernetes cluster
  Load balancer configuration for high availability
  DDoS protection and rate limiting
    
      Controls scaling and lifecycle through GitHub Actions API
      Optimizes communication between workflows and runners
    
  


Security Best Practices Assessment

  Vulnerability scanning for runner container images
  Runtime security monitoring and threat detection
  Compliance framework alignment (SOC 2, ISO 27001, etc.)
  Data encryption in transit and at rest
  Audit logging and monitoring requirements
  Incident response procedures for compromised runners




Enterprise Deployment Architecture



Production-Grade Infrastructure Pattern


  
    graph TB
      subgraph &quot;GitHub Enterprise&quot;
        GHE[GitHub Enterprise Server]
        Orgs[Organizations]
        Repos[Private Repositories]
        Apps[GitHub Apps]
      end
      
      subgraph &quot;Network Layer&quot;
        LB[Load Balancer]
        WAF[Web Application Firewall]
        CDN[Content Delivery Network]
        VPN[VPN Gateway]
      end
      
      subgraph &quot;Kubernetes Control Plane&quot;
        API[API Server]
        ETCD[etcd Cluster]
        CM[Controller Manager]
        Sched[Scheduler]
      end
      
      subgraph &quot;ARC Components&quot;
        Controller[ARC Controller]
        Webhook[Webhook Server]
        Metrics[Metrics Server]
        CRDs[Custom Resources]
      end
      
      subgraph &quot;Runner Infrastructure&quot;
        ScaleSets[Runner Scale Sets]
        Listeners[Listener Pods]
        Runners[Runner Pods]
        Storage[Persistent Storage]
      end
      
      subgraph &quot;Enterprise Services&quot;
        Registry[Container Registry]
        Vault[Secret Management]
        Monitor[Monitoring Stack]
        Logs[Centralized Logging]
        Backup[Backup Services]
      end
      
      GHE --&amp;gt; LB
      LB --&amp;gt; WAF
      WAF --&amp;gt; VPN
      VPN --&amp;gt; API
      API --&amp;gt; Controller
      Controller --&amp;gt; Webhook
      Controller --&amp;gt; ScaleSets
      ScaleSets --&amp;gt; Listeners
      Listeners --&amp;gt; Runners
      Runners --&amp;gt; Registry
      Runners --&amp;gt; Vault
      Runners --&amp;gt; Monitor
      
      style GHE fill:#f8f9fa
      style Controller fill:#e3f2fd
      style Runners fill:#f3e5f5
      style Registry fill:#e8f5e8
      style Vault fill:#fff3e0
  




Multi-Environment Strategy

Development Environment

  Shared runner pools for cost optimization
  Relaxed security policies for developer productivity
  Integration with development tools and debugging capabilities
  Fast feedback loops with minimal resource constraints


Staging Environment

  Production-like configurations for testing
  Security policy enforcement testing
  Performance benchmarking and load testing
  Integration testing with enterprise services


Production Environment

  Dedicated runner pools for critical workloads
  Maximum security and compliance enforcement
  High availability and disaster recovery capabilities
  Comprehensive monitoring and alerting




Self-Hosted vs. GitHub-Hosted Runners Comparison



Enterprise Self-Hosted Runners

Advantages:

  Custom Hardware Specifications: GPU instances, high-memory nodes, specialized processors
  Network Access: Direct access to internal APIs, databases, and enterprise services
  Cost Optimization: No per-minute billing, predictable infrastructure costs
  Performance: Optimized environments, persistent caching, faster build times
  Security Control: Custom security tools, compliance frameworks, network isolation
  Scalability: Unlimited parallel jobs, auto-scaling based on demand


Considerations:

  Infrastructure Management: Kubernetes cluster maintenance and updates
  Security Responsibility: Container image security, vulnerability management
  Operational Overhead: Monitoring, troubleshooting, and incident response
  Compliance: Meeting enterprise security and audit requirements




GitHub-Hosted Runners

Advantages:

  Zero Maintenance: Fully managed by GitHub
  Automatic Updates: Latest software and security patches
  Clean Environment: Fresh instances for each job execution
  Simple Setup: No infrastructure provisioning required


Limitations:

  Resource Constraints: 2-core CPU, 7GB RAM maximum
  Execution Time Limits: 6 hours for public, 35 minutes for private (free)
  Network Isolation: No access to internal enterprise resources
  Cost at Scale: Per-minute billing becomes expensive for high-volume usage
  Limited Customization: Cannot install enterprise-specific tools




Enterprise Authentication and Security



GitHub App Authentication (Recommended for Enterprise)

GitHub Apps provide the most secure and scalable authentication method for enterprise environments, offering fine-grained permissions and enhanced security features.

Enterprise GitHub App Configuration

1. GitHub App Creation and Permissions

# Navigate to GitHub Organization Settings
# https://github.com/organizations/{YOUR_ORG}/settings/apps

# Required App Permissions:
# Repository permissions:
#   - Actions: Read
#   - Administration: Read  
#   - Metadata: Read
#   - Pull requests: Read (for PR workflows)
#   - Checks: Write (for status updates)
#
# Organization permissions:
#   - Self-hosted runners: Write
#   - Administration: Read (for organization-level deployment)


2. Enterprise Security Configuration

# github-app-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: github-app-auth
  namespace: arc-systems
type: Opaque
data:
  github_app_id: &amp;lt;base64-encoded-app-id&amp;gt;
  github_app_installation_id: &amp;lt;base64-encoded-installation-id&amp;gt;
  github_app_private_key: &amp;lt;base64-encoded-private-key&amp;gt;
---
# Enterprise RBAC Configuration
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: arc-enterprise-role
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;, &quot;secrets&quot;, &quot;configmaps&quot;, &quot;services&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]
- apiGroups: [&quot;apps&quot;]
  resources: [&quot;deployments&quot;, &quot;replicasets&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]
- apiGroups: [&quot;actions.summerwind.dev&quot;]
  resources: [&quot;*&quot;]
  verbs: [&quot;*&quot;]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: arc-enterprise-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: arc-enterprise-role
subjects:
- kind: ServiceAccount
  name: arc-controller
  namespace: arc-systems


3. Network Security and Policies

# network-policy-enterprise.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: arc-enterprise-network-policy
  namespace: arc-systems
spec:
  podSelector:
    matchLabels:
      app: actions-runner
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: arc-systems
    ports:
    - protocol: TCP
      port: 8080
  egress:
  # Allow DNS resolution
  - to: []
    ports:
    - protocol: UDP
      port: 53
  # Allow HTTPS to GitHub
  - to: []
    ports:
    - protocol: TCP
      port: 443
  # Allow access to internal enterprise services
  - to:
    - namespaceSelector:
        matchLabels:
          name: enterprise-services
    ports:
    - protocol: TCP
      port: 443
    - protocol: TCP
      port: 80




Personal Access Token (PAT) Authentication

For development and testing environments, PAT authentication provides a simpler setup process.

Enterprise PAT Security Requirements

  Fine-grained personal access tokens (beta) recommended
  Organization-specific token scopes
  Regular token rotation (90-day maximum)
  Secure storage in enterprise secret management system


# Required PAT Scopes for Enterprise:
# - repo (Full control of private repositories)
# - admin:org (Full control of orgs and teams, read and write org projects)
# - workflow (Update GitHub Action workflows)

# Create PAT secret
kubectl create secret generic github-pat-secret --from-literal=github_token=$GITHUB_PAT --namespace=arc-systems

# Verify secret creation
kubectl get secret github-pat-secret -n arc-systems -o yaml




Enterprise Authentication Best Practices

1. Credential Management

  Use enterprise secret management solutions (HashiCorp Vault, AWS Secrets Manager)
  Implement automatic credential rotation
  Audit credential access and usage
  Never store credentials in code or configuration files


2. Access Control

  Implement least-privilege access principles
  Use separate authentication for different environments
  Regular access reviews and permission audits
  Multi-factor authentication enforcement


3. Monitoring and Compliance

  Comprehensive audit logging for all authentication events
  Integration with SIEM systems for security monitoring
  Compliance reporting for regulatory requirements
  Incident response procedures for compromised credentials




Option 1: GitHub PAT Token
Github Organization/Account settings → Settings → Developer settings → GitHub Personal access tokens

  PAT Token is required for the runner to authenticate with GitHub.
  Below is an example of PAT Token permissions.



    Required scopes:
    
        Repository Level: repo, workflow
        Organization Level: read:org, admin:org, workflow
        Enterprise Level: admin:enterprise, workflow
    




Option 2: GitHub App

If you have an existing app

  Click the app
  Check “App ID” in “About” section


If you don’t have an existing app

  Create new GitHub App
  Input the required Information
    
      GitHub App name
      Homepage URL
      Webhook URL (Optional)
      Repository permissions Settings:
        
          Actions: Read and Write
          Administration: Read and Write
          Metadata: Read-only
        
      
    
  
  Click”Create GitHub App”


Get Installation ID

  Click “Install App”
  Select the repository or organization
  Click “Install”
  Check “Installation ID” in “About” section
    
      https://github.com/organizations/YOUR-ORG/settings/installations/INSTALLATION_ID
    
  


Generate private key

  Move App Settings Page
  Click “Generate a private key”
  Download the private key file





    1.Required permissions:
    
        Actions: Read and Write
        Administration: Read and Write
        Metadata: Read-only
    
    2. Get App ID and Installation ID
    3. Generate private key




Installation



1. Add Helm Repository
helm repo add actions-runner-controller https://actions-runner-controller.github.io/actions-runner-controller




2. Create Namespace
kubectl create namespace actions-runner-system




3. Install Controller







4. Deploy Runner
kubectl apply -f runner-cr.yaml




Configuration Files



runner.yaml
authSecret:
  enabled: true
  create: true
  name: &quot;controller-manager&quot;
  github_token: &quot;ghp_xxxxxxxxxxxxxxxxxxxxxxxx&quot;

image:
  repository: &quot;summerwind/actions-runner-controller&quot;
  actionsRunnerRepositoryAndTag: &quot;summerwind/actions-runner:latest&quot;
  dindSidecarRepositoryAndTag: &quot;docker:dind&quot;
  pullPolicy: IfNotPresent

rbac:
  allowGrantingKubernetesContainerModePermissions: true

serviceAccount:
  create: true




runner-cr.yaml
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: example-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      labels:
        - self-hosted
        - linux
        - x64




Advanced Runner Configurations



1. Auto-Scaling Runners

Create a Horizontal Pod Autoscaler (HPA) for runners:

apiVersion: actions.summerwind.dev/v1alpha1
kind: HorizontalRunnerAutoscaler
metadata:
  name: runner-autoscaler
spec:
  scaleTargetRef:
    name: example-runner
  minReplicas: 1
  maxReplicas: 10
  metrics:
  - type: TotalNumberOfQueuedAndInProgressWorkflowRuns
    repositoryNames:
    - your-github-username/your-repository




2. Organization-Level Runners

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: org-runner
spec:
  replicas: 2
  template:
    spec:
      organization: &quot;your-organization&quot;
      labels:
        - org-runner
        - linux
        - x64




3. Runner with Docker-in-Docker (DinD) Support

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: docker-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      image: summerwind/actions-runner:latest
      dockerEnabled: true
      labels:
        - docker
        - linux




4. Ephemeral Runners (Run once and terminate)

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: ephemeral-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      ephemeral: true
      labels:
        - ephemeral
        - linux




5. GitHub App Authentication Configuration

# GitHub App Secret
apiVersion: v1
kind: Secret
metadata:
  name: github-app-secret
  namespace: actions-runner-system
type: Opaque
data:
  app-id: &quot;APP_ID_BASE64&quot;
  installation-id: &quot;INSTALLATION_ID_BASE64&quot;
  private-key: &quot;PRIVATE_KEY_BASE64&quot;

# Controller configuration
authSecret:
  enabled: true
  create: false
  name: &quot;github-app-secret&quot;




Resource Management and Optimization



1. Runner Resource Configuration

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: resource-optimized-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      resources:
        limits:
          cpu: &quot;2.0&quot;
          memory: &quot;4Gi&quot;
        requests:
          cpu: &quot;1.0&quot;
          memory: &quot;2Gi&quot;
      labels:
        - resource-optimized




2. Runner with Node Selectors and Tolerations

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: dedicated-node-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      nodeSelector:
        node-type: actions-runner
      tolerations:
      - key: &quot;dedicated&quot;
        operator: &quot;Equal&quot;
        value: &quot;actions-runner&quot;
        effect: &quot;NoSchedule&quot;
      labels:
        - dedicated-node




Verification

Check Installation
kubectl get po -n actions-runner-system
kubectl get runnerdeployments.actions.summerwind.dev


Verify Runner Connection
Check runners in your repository:
Settings → Actions → Runners


Example Workflow
name: Example Workflow
on:
  workflow_dispatch:

jobs:
  test-job:
    runs-on: self-hosted
    # or runs-on: [self-hosted, linux, x64]
    steps:
      - name: Test Step
        run: echo &quot;Running on self-hosted runner&quot;


Advanced Workflow Examples

Using Docker in Self-Hosted Runner





Workflow with Multiple Runner Types

name: Multi-Runner Workflow
on:
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: [self-hosted, linux, build]
    steps:
      - uses: actions/checkout@v3
      - name: Build App
        run: npm ci &amp;amp;&amp;amp; npm run build
      - name: Upload Artifact
        uses: actions/upload-artifact@v3
        with:
          name: build
          path: build/
          
  test:
    needs: build
    runs-on: [self-hosted, linux, test]
    steps:
      - uses: actions/checkout@v3
      - name: Download Artifact
        uses: actions/download-artifact@v3
        with:
          name: build
          path: build/
      - name: Run Tests
        run: npm ci &amp;amp;&amp;amp; npm test




Troubleshooting



Common Issues and Solutions:

1. Runner Registration Failures:

  Check PAT token or GitHub App authentication
  Verify network connectivity to GitHub
  Ensure proper permissions for tokens
  Check logs: kubectl logs -n actions-runner-system deployment/actions-runner-controller-controller-manager


2. Runner Pod Crashes:

  Check resource limits
  Verify container image compatibility
  Inspect pod logs: kubectl logs -n actions-runner-system pod/runner-pod-name
  Check pod events: kubectl describe pod -n actions-runner-system runner-pod-name


3. Runners Not Picking Up Jobs:

  Verify runner labels match workflow configuration
  Check if runners are idle or busy
  Ensure proper repository/organization configuration
  Check runner status in GitHub UI


4. Docker-in-Docker Issues:

  Verify dockerEnabled: true is set
  Check if runner has proper privileges
  Inspect DinD sidecar logs
  Consider volume configuration for Docker socket




Useful Debugging Commands

# Check controller status
kubectl logs -n actions-runner-system deployment/actions-runner-controller-controller-manager

# View runner deployment status
kubectl describe runnerdeployments.actions.summerwind.dev example-runner

# Check runner pod logs
kubectl logs -n actions-runner-system pod/example-runner-pod-name

# Verify runner set status
kubectl get runnersets.actions.summerwind.dev -n actions-runner-system

# Check runner autoscaler status
kubectl describe horizontalrunnerautoscaler.actions.summerwind.dev runner-autoscaler




Security Best Practices



Security Recommendations:

1. Runner Isolation:

  Use ephemeral runners for untrusted code
  Isolate runners in dedicated namespaces
  Consider using runner groups for sensitive projects
  Implement network policies to restrict communication


2. Authentication:

  Use GitHub Apps instead of PAT tokens
  Rotate private keys regularly
  Store secrets securely using Kubernetes Secrets
  Implement least privilege principle for tokens


3. Runner Protection:

  Don’t grant sudo/admin privileges unless necessary
  Limit runner capabilities
  Consider using gVisor or similar sandbox technologies
  Scan runner images for vulnerabilities


4. Docker Security:

  Use rootless Docker when possible
  Implement proper resource limits
  Consider alternatives like Kaniko for building without Docker daemon
  Scan container images during build




Sample Secure Runner Configuration

apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: secure-runner
spec:
  replicas: 1
  template:
    spec:
      repository: &quot;your-github-username/your-repository&quot;
      ephemeral: true
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 1000
      volumeMounts:
        - name: tmp
          mountPath: /tmp
      volumes:
        - name: tmp
          emptyDir: {}
      labels:
        - secure-runner




Upgrade and Maintenance



Upgrading Actions Runner Controller







Scaling for Production Workloads

For production environments, consider the following scaling configurations:

apiVersion: actions.summerwind.dev/v1alpha1
kind: HorizontalRunnerAutoscaler
metadata:
  name: production-runner-autoscaler
spec:
  scaleTargetRef:
    name: production-runner
  minReplicas: 2
  maxReplicas: 20
  scaleDownDelaySecondsAfterScaleOut: 300
  metrics:
  - type: PercentageRunnersBusy
    scaleUpThreshold: &apos;0.75&apos;
    scaleDownThreshold: &apos;0.25&apos;
    scaleUpFactor: &apos;2&apos;
    scaleDownFactor: &apos;0.5&apos;




Key Considerations

    1. Authentication:
    
        You must choose between GitHub App or PAT authentication
        GitHub App is recommended (better security and permissions management)
    
    2. Permissions:
    
        Set the proper permissions and resources required for Runner
    
    3. Network Policy:
    
        Check network policy and security settings
    






References

  Actions Runner Controller GitHub
  GitHub Self-Hosted Runners Documentation
  Managing Self-Hosted Runners
  Kubernetes RBAC Documentation
  GitHub Actions Security Hardening
  Autoscaling with Kubernetes

",
            "wordcount": "4471",
            "inLanguage": "en",
            "dateCreated": "2025-05-05/",
            "datePublished": "2025-05-05/",
            "dateModified": "2025-05-05/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "CICD",
            "articleSection": "CICD",
            "keywords": ["github","kubernetes","helm","cicd","enterprise","security","scaling","devops"]
        }
        </script>
    </body>
</html>
