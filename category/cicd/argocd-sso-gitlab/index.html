<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>Enterprise-Grade ArgoCD SSO with GitLab Integration | somaz</title>
    <meta name="description" content="Complete guide to implementing enterprise ArgoCD SSO with GitLab, including security hardening, RBAC patterns, and operational best practices">
    
        <meta name="keywords" content="argocd, gitlab, kubernetes, helm, sso, rbac, security, gitops, enterprise">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Enterprise-Grade ArgoCD SSO with GitLab Integration | somaz">
    <meta name="twitter:description" content="Complete guide to implementing enterprise ArgoCD SSO with GitLab, including security hardening, RBAC patterns, and operational best practices">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1739943377/argocd-sso-gitlab_jzuunn.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/cicd/argocd-sso-gitlab/">
    <meta property="og:title" content="Enterprise-Grade ArgoCD SSO with GitLab Integration | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1739943377/argocd-sso-gitlab_jzuunn.png">
    <meta property="og:description" content="Complete guide to implementing enterprise ArgoCD SSO with GitLab, including security hardening, RBAC patterns, and operational best practices">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/cicd/argocd-sso-gitlab/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-06-15T00:00:00+00:00">
                            


June 15, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>23 min to read</span>
                </p>
                <h1 class="post-title">Enterprise-Grade ArgoCD SSO with GitLab Integration</h1>
                <p class="post-subtitle">Production-ready guide to implementing secure ArgoCD SSO with GitLab including advanced RBAC and multi-cluster federation</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1739943377/argocd-sso-gitlab_jzuunn.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>In the last post, I tried configuring <a href="https://somaz94.github.io/cicd/2025-03-07-argocd-sso-gcp-oauth/">ArgoCD SSO using Google Oauth</a>,</p>

<p>This post explains how to configure Single Sign-On (SSO) for ArgoCD using GitLab. We’ll walk through the process of setting up GitLab OAuth and integrating it with ArgoCD.</p>

<p><br /></p>

<h3 id="enterprise-gitops-authentication-architecture">Enterprise GitOps Authentication Architecture</h3>

<p>Modern enterprise environments require sophisticated authentication strategies that can scale across multiple clusters while maintaining security and compliance. The integration between ArgoCD and GitLab provides a robust foundation for enterprise GitOps workflows.</p>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TB
        subgraph "Identity Provider Layer"
            GitLab[GitLab OAuth Provider]
            SAML[Enterprise SAML/LDAP]
        end
        
        subgraph "Authentication Layer"
            Dex[Dex Identity Proxy]
            OAuth[OAuth2 Flow]
        end
        
        subgraph "ArgoCD Platform"
            Server[ArgoCD Server]
            RBAC[RBAC Engine]
            JWT[JWT Validation]
        end
        
        subgraph "Multi-Cluster Environment"
            Prod[Production Cluster]
            Staging[Staging Cluster]
            Dev[Development Cluster]
        end
        
        GitLab --&gt; Dex
        SAML --&gt; GitLab
        Dex --&gt; OAuth
        OAuth --&gt; Server
        Server --&gt; RBAC
        RBAC --&gt; JWT
        JWT --&gt; Prod
        JWT --&gt; Staging
        JWT --&gt; Dev
  </div>
</div>

<p><br /></p>

<h3 id="benefits-of-gitlab-sso-integration">Benefits of GitLab SSO Integration</h3>

<div class="info-box info-box-default-not-check">
  <ul>
    <li>
      <strong>Unified Authentication</strong><br />
      Allows developers to use their existing GitLab credentials for ArgoCD access.
    </li>
    <li>
      <strong>Streamlined Access Management</strong><br />
      Leverages GitLab's groups and user management for ArgoCD authorization.
    </li>
    <li>
      <strong>Improved Developer Experience</strong><br />
      Eliminates the need to manage separate credentials for GitLab and ArgoCD.
    </li>
    <li>
      <strong>Consistent Permissions</strong><br />
      GitLab groups can be mapped directly to ArgoCD roles for consistent access control.
    </li>
  </ul>
</div>

<p><br /></p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>GitLab instance (Self-hosted CE/EE 13.0+ or GitLab.com)</li>
  <li>ArgoCD 2.8+ installed on a Kubernetes cluster</li>
  <li>Administrative access to both GitLab and ArgoCD</li>
  <li>Properly configured DNS for ArgoCD server</li>
  <li>SSL/TLS certificates for secure communication</li>
  <li>Kubernetes RBAC enabled cluster</li>
</ul>

<h3 id="security-planning-considerations">Security Planning Considerations</h3>

<p>Before implementing SSO, consider these enterprise security requirements:</p>

<div class="table-container">
  <table class="table-modern">
    <tr>
      <th>Security Domain</th>
      <th>Requirements</th>
      <th>Implementation</th>
    </tr>
    <tr>
      <td><strong>Identity Provider</strong></td>
      <td>Multi-factor authentication, SAML integration</td>
      <td>GitLab + Enterprise SSO</td>
    </tr>
    <tr>
      <td><strong>Network Security</strong></td>
      <td>TLS 1.3, Network policies, WAF</td>
      <td>Ingress + cert-manager</td>
    </tr>
    <tr>
      <td><strong>Access Control</strong></td>
      <td>Least privilege, role separation</td>
      <td>RBAC + Project isolation</td>
    </tr>
    <tr>
      <td><strong>Audit &amp; Compliance</strong></td>
      <td>Complete audit trails, compliance reporting</td>
      <td>Centralized logging + monitoring</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h2 id="steps">Steps</h2>

<p><br /></p>

<h3 id="1-create-gitlab-application">1. Create GitLab Application</h3>

<h4 id="console-method">Console Method</h4>
<ul>
  <li>Navigate to Admin Area &gt; Applications in GitLab</li>
  <li>Create new application:
    <ul>
      <li>Name: Argo CD</li>
      <li>Redirect URI: https://argocd-server-urlapi/dex/callback</li>
      <li>Select Scopes:
        <ul>
          <li>read_user</li>
          <li>openid</li>
          <li>profile</li>
          <li>email</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Save the credentials:
    <ul>
      <li>Application ID (Client ID)</li>
      <li>Secret (Client Secret)</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h4 id="command-line-setup">Command Line Setup</h4>

<p>If you’re using GitLab API to create the application:</p>

<script src="https://gist.github.com/somaz94/da96d596e9e28e2e4a0d094f7a202352.js"></script>

<p><br /></p>

<h4 id="gitlab-application-security-considerations">GitLab Application Security Considerations</h4>

<h5 id="application-security-best-practices">Application Security Best Practices:</h5>
<ul>
  <li><strong>Scopes Selection</strong>:
    <ul>
      <li>Only select required scopes (read_user, openid, profile, email)</li>
      <li>Avoid adding unnecessary permissions like <code class="language-plaintext highlighter-rouge">api</code> or <code class="language-plaintext highlighter-rouge">write_repository</code></li>
    </ul>
  </li>
  <li><strong>Application Configuration</strong>:
    <ul>
      <li>Use a descriptive application name for audit purposes</li>
      <li>Set application expiration date for security rotation</li>
      <li>Rotate client secrets every 90 days in production</li>
      <li>Use secure redirect URI validation</li>
    </ul>
  </li>
  <li><strong>Access Management</strong>:
    <ul>
      <li>Limit admin access to GitLab application settings</li>
      <li>Document the integration for security reviews</li>
      <li>Implement approval workflows for changes</li>
    </ul>
  </li>
</ul>

<h5 id="enterprise-security-enhancements">Enterprise Security Enhancements:</h5>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Enhanced security configuration</span>
<span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">connectors:</span>
    <span class="s">- type: gitlab</span>
      <span class="s">id: gitlab</span>
      <span class="s">name: GitLab</span>
      <span class="s">config:</span>
        <span class="s">baseURL: https://gitlab.your-domain.com</span>
        <span class="s">clientID: $dex.gitlab.clientId</span>
        <span class="s">clientSecret: $dex.gitlab.clientSecret</span>
        <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
        <span class="s">groups:</span>
          <span class="s">- engineering</span>
          <span class="s">- platform</span>
        <span class="s"># Enhanced security options</span>
        <span class="s">useLoginAsID: false</span>
        <span class="s">insecureSkipVerify: false</span>
        <span class="s"># Custom CA certificate for private GitLab</span>
        <span class="s">rootCAs: |</span>
          <span class="s">-----BEGIN CERTIFICATE-----</span>
          <span class="s">... your CA certificate ...</span>
          <span class="s">-----END CERTIFICATE-----</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="2-configure-argocd-installation">2. Configure ArgoCD Installation</h3>

<p>Create <code class="language-plaintext highlighter-rouge">values/mgmt.yaml</code> with production-ready configuration:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">global</span><span class="pi">:</span>
  <span class="na">domain</span><span class="pi">:</span> <span class="s">argocd.your-domain.com</span>

<span class="na">configs</span><span class="pi">:</span>
  <span class="na">params</span><span class="pi">:</span>
    <span class="na">create</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">server.insecure</span><span class="pi">:</span> <span class="no">false</span>  <span class="c1"># Always use TLS in production</span>
    <span class="c1"># Security hardening</span>
    <span class="na">server.enable.grpc.web</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">server.grpc.keepalive.time</span><span class="pi">:</span> <span class="s">60s</span>
    <span class="na">server.grpc.keepalive.timeout</span><span class="pi">:</span> <span class="s">5s</span>

  <span class="na">ssh</span><span class="pi">:</span>
    <span class="na">extraHosts</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">gitlab.your-domain.com ssh-rsa AAAAB3N...</span>
      <span class="s">gitlab.your-domain.com ecdsa-sha2-nistp256...</span>
      <span class="s">gitlab.your-domain.com ssh-ed25519 AAAA..</span>

  <span class="c1"># Global security configurations</span>
  <span class="na">cm</span><span class="pi">:</span>
    <span class="c1"># Session timeout for security</span>
    <span class="na">timeout.hard.reconciliation</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">timeout.reconciliation</span><span class="pi">:</span> <span class="s">180s</span>
    <span class="c1"># Application source restrictions</span>
    <span class="na">application.instanceLabelKey</span><span class="pi">:</span> <span class="s">argocd.argoproj.io/instance</span>
    <span class="c1"># Repository credentials template</span>
    <span class="na">repositories</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">- type: git</span>
        <span class="s">url: https://gitlab.your-domain.com</span>
        <span class="s">passwordSecret:</span>
          <span class="s">name: gitlab-secret</span>
          <span class="s">key: password</span>
        <span class="s">usernameSecret:</span>
          <span class="s">name: gitlab-secret</span>
          <span class="s">key: username</span>

<span class="na">controller</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>  <span class="c1"># High availability</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">2000m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">4Gi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">500m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">1Gi</span>
  <span class="c1"># Application controller metrics</span>
  <span class="na">metrics</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">serviceMonitor</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">dex</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">500m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">256Mi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>

<span class="na">redis</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">200m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">64Mi</span>

<span class="na">server</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>  <span class="c1"># High availability</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">1000m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">2Gi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">512Mi</span>
  <span class="na">ingress</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">annotations</span><span class="pi">:</span>
      <span class="na">nginx.ingress.kubernetes.io/ssl-redirect</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">nginx.ingress.kubernetes.io/backend-protocol</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GRPC"</span>
      <span class="na">cert-manager.io/cluster-issuer</span><span class="pi">:</span> <span class="s2">"</span><span class="s">letsencrypt-prod"</span>
      <span class="na">nginx.ingress.kubernetes.io/grpc-backend</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="na">ingressClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nginx"</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
    <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
    <span class="na">tls</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">secretName</span><span class="pi">:</span> <span class="s">argocd-server-tls</span>
        <span class="na">hosts</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">argocd.your-domain.com</span>
  <span class="c1"># Server metrics</span>
  <span class="na">metrics</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">serviceMonitor</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">repoServer</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>  <span class="c1"># High availability</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">1000m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">2Gi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">512Mi</span>
  <span class="c1"># Repo server metrics</span>
  <span class="na">metrics</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">serviceMonitor</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">applicationSet</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>  <span class="c1"># High availability</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">500m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">512Mi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>

<span class="na">notifications</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">limits</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">500m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s">64Mi</span>
  <span class="c1"># Notification integrations</span>
  <span class="na">notifiers</span><span class="pi">:</span>
    <span class="na">service.slack</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">token: $slack-token</span>
    <span class="na">service.email.gmail</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">username: $email-username</span>
      <span class="s">password: $email-password</span>
      <span class="s">host: smtp.gmail.com</span>
      <span class="s">port: 587</span>
      <span class="s">from: $email-username</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="3-configure-gitlab-sso">3. Configure GitLab SSO</h3>

<p>Update <code class="language-plaintext highlighter-rouge">values/mgmt.yaml</code> with SSO configuration:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">cm</span><span class="pi">:</span>
    <span class="na">timeout.reconciliation</span><span class="pi">:</span> <span class="s">60s</span>
    <span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connectors:</span>
        <span class="s">- type: gitlab</span>
          <span class="s">id: gitlab</span>
          <span class="s">name: GitLab</span>
          <span class="s">config:</span>
            <span class="s">baseURL: &lt;gitlab url&gt;</span>
            <span class="s">clientID: &lt;application id&gt;</span>
            <span class="s">clientSecret: &lt;secret&gt;</span>
            <span class="s">redirectURI: https://&lt;argocd url&gt;/api/dex/callback</span>
            <span class="s">groups:</span>
              <span class="s">- server</span>
      <span class="no">        </span>
  <span class="na">rbac</span><span class="pi">:</span>
    <span class="na">create</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">policy.csv</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">p, role:org-admin, applications, *, */*, allow</span>
      <span class="s">p, role:org-admin, clusters, get, *, allow</span>
      <span class="s">p, role:org-admin, repositories, *, *, allow</span>
      <span class="s">p, role:org-admin, projects, get, *, allow</span>
      <span class="s">p, role:org-admin, logs, get, *, allow</span>
      <span class="s">p, role:org-admin, exec, create, */*, allow</span>
      
      <span class="s">g, &lt;group&gt;, role:org-admin</span>

  <span class="na">secrets</span><span class="pi">:</span>
    <span class="na">dex.gitlab.clientId</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;application</span><span class="nv"> </span><span class="s">id&gt;"</span>
    <span class="na">dex.gitlab.clientSecret</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;secret&gt;"</span>
</code></pre></div></div>

<p><br /></p>

<p>Apply the changes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm upgrade argocd <span class="nb">.</span> <span class="nt">-n</span> argocd <span class="nt">-f</span> ./values/mgmt.yaml
kubectl rollout restart <span class="nt">-n</span> argocd deployment argocd-dex-server
</code></pre></div></div>

<p><br /></p>

<h3 id="4-test-login">4. Test Login</h3>
<p>Access your ArgoCD instance and verify GitLab SSO login works correctly.</p>

<p><img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1739943646/argocd-sso-gitlab-login_pwegi6.png" alt="ArgoCD SSO GitLab Login" /></p>

<p><br /></p>

<h2 id="advanced-gitlab-sso-configuration">Advanced GitLab SSO Configuration</h2>

<p><br /></p>

<h3 id="multi-environment-rbac-strategy">Multi-Environment RBAC Strategy</h3>

<p>Implement a comprehensive RBAC strategy that scales across multiple environments:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">rbac</span><span class="pi">:</span>
    <span class="na">policy.csv</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s"># Global Admin Role - Full cluster access</span>
      <span class="s">p, role:global-admin, applications, *, */*, allow</span>
      <span class="s">p, role:global-admin, clusters, *, *, allow</span>
      <span class="s">p, role:global-admin, repositories, *, *, allow</span>
      <span class="s">p, role:global-admin, projects, *, *, allow</span>
      <span class="s">p, role:global-admin, accounts, *, *, allow</span>
      <span class="s">p, role:global-admin, certificates, *, *, allow</span>
      <span class="s">p, role:global-admin, gpgkeys, *, *, allow</span>
      <span class="s">p, role:global-admin, logs, *, *, allow</span>
      <span class="s">p, role:global-admin, exec, *, *, allow</span>
      
      <span class="s"># Platform Team - Infrastructure management</span>
      <span class="s">p, role:platform-admin, applications, *, platform/*, allow</span>
      <span class="s">p, role:platform-admin, applications, *, infrastructure/*, allow</span>
      <span class="s">p, role:platform-admin, clusters, get, *, allow</span>
      <span class="s">p, role:platform-admin, repositories, *, *, allow</span>
      <span class="s">p, role:platform-admin, projects, get, *, allow</span>
      <span class="s">p, role:platform-admin, logs, *, platform/*, allow</span>
      <span class="s">p, role:platform-admin, logs, *, infrastructure/*, allow</span>
      
      <span class="s"># DevOps Team - Application deployment</span>
      <span class="s">p, role:devops-engineer, applications, *, */prod, allow</span>
      <span class="s">p, role:devops-engineer, applications, *, */staging, allow</span>
      <span class="s">p, role:devops-engineer, applications, sync, */*, allow</span>
      <span class="s">p, role:devops-engineer, repositories, get, *, allow</span>
      <span class="s">p, role:devops-engineer, logs, *, */*, allow</span>
      <span class="s">p, role:devops-engineer, exec, create, */staging, allow</span>
      
      <span class="s"># Senior Developers - Production read, staging full</span>
      <span class="s">p, role:senior-developer, applications, get, */prod, allow</span>
      <span class="s">p, role:senior-developer, applications, *, */staging, allow</span>
      <span class="s">p, role:senior-developer, applications, *, */dev, allow</span>
      <span class="s">p, role:senior-developer, logs, *, */*, allow</span>
      <span class="s">p, role:senior-developer, exec, create, */dev, allow</span>
      <span class="s">p, role:senior-developer, exec, create, */staging, allow</span>
      
      <span class="s"># Regular Developers - Development environment only</span>
      <span class="s">p, role:developer, applications, get, */prod, allow</span>
      <span class="s">p, role:developer, applications, get, */staging, allow</span>
      <span class="s">p, role:developer, applications, *, */dev, allow</span>
      <span class="s">p, role:developer, logs, *, */dev, allow</span>
      <span class="s">p, role:developer, exec, create, */dev, allow</span>
      
      <span class="s"># Security Team - Read-only audit access</span>
      <span class="s">p, role:security-auditor, applications, get, */*, allow</span>
      <span class="s">p, role:security-auditor, logs, get, */*, allow</span>
      <span class="s">p, role:security-auditor, repositories, get, *, allow</span>
      <span class="s">p, role:security-auditor, clusters, get, *, allow</span>
      
      <span class="s"># Map GitLab groups to roles</span>
      <span class="s">g, gitlab:platform-admins, role:global-admin</span>
      <span class="s">g, gitlab:infrastructure-team, role:platform-admin</span>
      <span class="s">g, gitlab:devops-engineers, role:devops-engineer</span>
      <span class="s">g, gitlab:senior-developers, role:senior-developer</span>
      <span class="s">g, gitlab:developers, role:developer</span>
      <span class="s">g, gitlab:security-team, role:security-auditor</span>
      
    <span class="c1"># Default policy for authenticated users</span>
    <span class="na">policy.default</span><span class="pi">:</span> <span class="s">role:readonly</span>
    <span class="c1"># Required scopes for group mapping</span>
    <span class="na">scopes</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[groups,</span><span class="nv"> </span><span class="s">email,</span><span class="nv"> </span><span class="s">profile]"</span>
</code></pre></div></div>

<h3 id="role-based-access-control-with-gitlab-groups">Role-Based Access Control with GitLab Groups</h3>

<p>You can map different GitLab groups to different ArgoCD roles for granular access control:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">rbac</span><span class="pi">:</span>
    <span class="na">policy.csv</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s"># Administrators with full access</span>
      <span class="s">p, role:admin, applications, *, */*, allow</span>
      <span class="s">p, role:admin, clusters, *, *, allow</span>
      <span class="s">p, role:admin, repositories, *, *, allow</span>
      <span class="s">p, role:admin, projects, *, *, allow</span>
      <span class="s">p, role:admin, accounts, *, *, allow</span>
      <span class="s">p, role:admin, gpgkeys, *, *, allow</span>
      <span class="s">p, role:admin, logs, *, *, allow</span>
      <span class="s">p, role:admin, exec, *, *, allow</span>
      <span class="s">p, role:admin, certificates, *, *, allow</span>
      
      <span class="s"># DevOps team with broad access but not admin</span>
      <span class="s">p, role:devops, applications, *, */*, allow</span>
      <span class="s">p, role:devops, clusters, get, *, allow</span>
      <span class="s">p, role:devops, repositories, *, *, allow</span>
      <span class="s">p, role:devops, logs, *, *, allow</span>
      <span class="s">p, role:devops, exec, create, */*, allow</span>
      
      <span class="s"># Developers with limited access</span>
      <span class="s">p, role:developer, applications, get, */*, allow</span>
      <span class="s">p, role:developer, applications, sync, */*, allow</span>
      <span class="s">p, role:developer, repositories, get, *, allow</span>
      <span class="s">p, role:developer, logs, get, */*, allow</span>
      
      <span class="s"># Map GitLab groups to roles</span>
      <span class="s">g, gitlab:platform-admin, role:admin</span>
      <span class="s">g, gitlab:devops-team, role:devops</span>
      <span class="s">g, gitlab:developers, role:developer</span>
</code></pre></div></div>

<h3 id="project-specific-access-control">Project-Specific Access Control</h3>

<p>You can also configure access to specific ArgoCD projects:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">rbac</span><span class="pi">:</span>
    <span class="na">policy.csv</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s"># Team A access to Team A projects only</span>
      <span class="s">p, role:team-a, applications, *, team-a/*, allow</span>
      <span class="s">p, role:team-a, logs, *, team-a/*, allow</span>
      <span class="s">g, gitlab:team-a, role:team-a</span>
      
      <span class="s"># Team B access to Team B projects only</span>
      <span class="s">p, role:team-b, applications, *, team-b/*, allow</span>
      <span class="s">p, role:team-b, logs, *, team-b/*, allow</span>
      <span class="s">g, gitlab:team-b, role:team-b</span>
</code></pre></div></div>

<h3 id="using-gitlab-subgroups">Using GitLab Subgroups</h3>

<p>If you have GitLab subgroups, you can map them in ArgoCD:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">cm</span><span class="pi">:</span>
    <span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connectors:</span>
        <span class="s">- type: gitlab</span>
          <span class="s">id: gitlab</span>
          <span class="s">name: GitLab</span>
          <span class="s">config:</span>
            <span class="s">baseURL: https://gitlab.your-domain.com</span>
            <span class="s">clientID: &lt;application_id&gt;</span>
            <span class="s">clientSecret: &lt;secret&gt;</span>
            <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
            <span class="s">groups:</span>
              <span class="s">- engineering/backend</span>
              <span class="s">- engineering/frontend</span>
              <span class="s">- operations/platform</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="manual-installation-and-configuration">Manual Installation and Configuration</h2>

<p>If you’re not using Helm, here’s how to configure ArgoCD manually:</p>

<p><br /></p>

<h3 id="1-create-argocd-cm-configmap">1. Create argocd-cm ConfigMap</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-cm</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s">https://argocd.your-domain.com</span>
  <span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">connectors:</span>
      <span class="s">- type: gitlab</span>
        <span class="s">id: gitlab</span>
        <span class="s">name: GitLab</span>
        <span class="s">config:</span>
          <span class="s">baseURL: https://gitlab.your-domain.com</span>
          <span class="s">clientID: &lt;application_id&gt;</span>
          <span class="s">clientSecret: $dex.gitlab.clientSecret</span>
          <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
          <span class="s">groups:</span>
            <span class="s">- devops</span>
            <span class="s">- engineering</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="2-create-argocd-secret-for-gitlab-credentials">2. Create argocd-secret for GitLab Credentials</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Convert client secret to base64</span>
<span class="nv">GITLAB_CLIENT_SECRET_BASE64</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"your-gitlab-client-secret"</span> | <span class="nb">base64</span><span class="si">)</span>

<span class="c"># Apply the secret</span>
kubectl patch secret argocd-secret <span class="nt">-n</span> argocd <span class="nt">--type</span><span class="o">=</span>json <span class="nt">-p</span><span class="o">=</span><span class="s1">'[{"op": "add", "path": "/data/dex.gitlab.clientSecret", "value":"'</span><span class="nv">$GITLAB_CLIENT_SECRET_BASE64</span><span class="s1">'"}]'</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="3-configure-rbac">3. Configure RBAC</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-rbac-cm</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">policy.csv</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">p, role:org-admin, applications, *, */*, allow</span>
    <span class="s">p, role:org-admin, clusters, get, *, allow</span>
    <span class="s">p, role:org-admin, repositories, *, *, allow</span>
    <span class="s">p, role:org-admin, projects, get, *, allow</span>
    <span class="s">p, role:org-admin, logs, get, *, allow</span>
    <span class="s">p, role:org-admin, exec, create, */*, allow</span>
    
    <span class="s">g, gitlab:devops, role:org-admin</span>
  <span class="na">policy.default</span><span class="pi">:</span> <span class="s">role:readonly</span>
  <span class="na">scopes</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[groups,</span><span class="nv"> </span><span class="s">email]"</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="troubleshooting-gitlab-sso">Troubleshooting GitLab SSO</h2>

<div class="info-box info-box-warning">
<br />
<strong>Common Issues and Solutions:</strong><br /><br />

<strong>1. Authentication Failed:</strong>
   - Verify client ID and secret match GitLab application<br />
   - Check baseURL points to correct GitLab instance<br />
   - Ensure redirectURI matches exactly (including trailing slash)<br />
   - Verify required scopes are enabled in GitLab application<br /><br />

<strong>2. User Successfully Authenticates but Has No Access:</strong>
   - Check if user belongs to the correct GitLab group<br />
   - Verify groups are correctly mapped in RBAC policy<br />
   - Confirm 'groups' is included in scopes setting<br />
   - Check ArgoCD logs for group claim issues<br /><br />

<strong>3. Redirect URI Error:</strong>
   - Double check the redirect URI in both GitLab and ArgoCD config<br />
   - Ensure the ArgoCD server is accessible at the configured URL<br />
   - Check for TLS/SSL certificate issues<br /><br />

<strong>4. Timeout During Authentication:</strong>
   - Check network connectivity between ArgoCD and GitLab<br />
   - Verify GitLab instance is running and accessible<br />
   - Check for firewall or proxy issues<br /><br />
</div>

<p><br /></p>

<h3 id="debugging-steps">Debugging Steps</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check Dex logs for authentication issues</span>
kubectl logs <span class="nt">-n</span> argocd <span class="nt">-l</span> app.kubernetes.io/name<span class="o">=</span>argocd-dex-server

<span class="c"># Check ArgoCD server logs</span>
kubectl logs <span class="nt">-n</span> argocd <span class="nt">-l</span> app.kubernetes.io/name<span class="o">=</span>argocd-server

<span class="c"># Verify configuration</span>
kubectl get configmap argocd-cm <span class="nt">-n</span> argocd <span class="nt">-o</span> yaml
kubectl get configmap argocd-rbac-cm <span class="nt">-n</span> argocd <span class="nt">-o</span> yaml

<span class="c"># Check if secret is properly configured (will be masked)</span>
kubectl get secret argocd-secret <span class="nt">-n</span> argocd <span class="nt">-o</span> yaml
</code></pre></div></div>

<p><br /></p>

<h3 id="self-hosted-gitlab-ssl-issues">Self-Hosted GitLab SSL Issues</h3>

<p>If you’re using a self-signed certificate with GitLab, you may need to add it to ArgoCD:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-cm</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="c1"># ... existing config ...</span>
  <span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">connectors:</span>
      <span class="s">- type: gitlab</span>
        <span class="s">id: gitlab</span>
        <span class="s">name: GitLab</span>
        <span class="s">config:</span>
          <span class="s">baseURL: https://gitlab.your-domain.com</span>
          <span class="s">clientID: &lt;application_id&gt;</span>
          <span class="s">clientSecret: $dex.gitlab.clientSecret</span>
          <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
          <span class="s">groups:</span>
            <span class="s">- devops</span>
          <span class="s"># For self-signed certificates:</span>
          <span class="s">insecureSkipVerify: true</span>
</code></pre></div></div>

<p><strong>Note</strong>: Using <code class="language-plaintext highlighter-rouge">insecureSkipVerify: true</code> is not recommended for production environments. Instead, properly configure certificates.</p>

<p><br /></p>

<h2 id="security-best-practices">Security Best Practices</h2>

<div class="info-box info-box-success-not-check">
<ol>
  <li><strong>Access Control:</strong>
    <ul>
      <li>Implement least privilege principle in RBAC policies</li>
      <li>Regularly audit group memberships in GitLab</li>
      <li>Periodically review ArgoCD access</li>
    </ul>
  </li>
  <li><strong>Credentials Management:</strong>
    <ul>
      <li>Rotate GitLab client secret periodically</li>
      <li>Store secrets in Kubernetes secrets, not in plain text</li>
      <li>Consider using a secrets management solution</li>
    </ul>
  </li>
  <li><strong>Network Security:</strong>
    <ul>
      <li>Use HTTPS for all communication</li>
      <li>Implement network policies in Kubernetes</li>
      <li>Consider IP restrictions if applicable</li>
    </ul>
  </li>
  <li><strong>Audit and Monitoring:</strong>
    <ul>
      <li>Enable and review audit logs</li>
      <li>Set up alerts for unauthorized access attempts</li>
      <li>Monitor SSO configuration changes</li>
    </ul>
  </li>
</ol>
</div>

<p><br /></p>

<h3 id="advanced-security-configuration">Advanced Security Configuration</h3>

<h4 id="network-policies-for-argocd">Network Policies for ArgoCD</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">NetworkPolicy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-security-policy</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">podSelector</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">policyTypes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Ingress</span>
  <span class="pi">-</span> <span class="s">Egress</span>
  <span class="na">ingress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">namespaceSelector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">ingress-nginx</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
  <span class="na">egress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">namespaceSelector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">kube-system</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
  <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span> <span class="pi">[]</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>  <span class="c1"># HTTPS to GitLab</span>
</code></pre></div></div>

<h4 id="external-secrets-integration">External Secrets Integration</h4>

<script src="https://gist.github.com/somaz94/149d69f0c99ea802134e4ebb13964f6a.js"></script>

<h4 id="pod-security-standards">Pod Security Standards</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">pod-security.kubernetes.io/enforce</span><span class="pi">:</span> <span class="s">restricted</span>
    <span class="na">pod-security.kubernetes.io/audit</span><span class="pi">:</span> <span class="s">restricted</span>
    <span class="na">pod-security.kubernetes.io/warn</span><span class="pi">:</span> <span class="s">restricted</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="enterprise-automation-framework">Enterprise Automation Framework</h3>

<p>Here’s an enhanced automation script for enterprise GitLab SSO configuration:</p>

<p><br /></p>

<script src="https://gist.github.com/somaz94/b5487f8330420a3e37e42e35795af295.js"></script>

<p><br /></p>

<h3 id="monitoring-and-observability">Monitoring and Observability</h3>

<h4 id="prometheus-metrics-configuration">Prometheus Metrics Configuration</h4>

<script src="https://gist.github.com/somaz94/a33d7328fcb2613d7b2e8c1f2b7889d2.js"></script>

<h4 id="grafana-dashboard-integration">Grafana Dashboard Integration</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"dashboard"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ArgoCD SSO Monitoring"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"panels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Login Success Rate"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stat"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"expr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate(argocd_server_login_successes_total[5m]) / (rate(argocd_server_login_successes_total[5m]) + rate(argocd_server_login_failures_total[5m])) * 100"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Active Sessions"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graph"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"expr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"argocd_server_sessions_total"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><br /></p>

<h3 id="multi-cluster-federation">Multi-Cluster Federation</h3>

<h4 id="hub-cluster-configuration">Hub Cluster Configuration</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Hub cluster ArgoCD configuration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">argoproj.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Application</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">spoke-cluster-apps</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">project</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">source</span><span class="pi">:</span>
    <span class="na">repoURL</span><span class="pi">:</span> <span class="s">https://gitlab.your-domain.com/platform/cluster-configs</span>
    <span class="na">targetRevision</span><span class="pi">:</span> <span class="s">HEAD</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">spoke-clusters</span>
  <span class="na">destination</span><span class="pi">:</span>
    <span class="na">server</span><span class="pi">:</span> <span class="s">https://kubernetes.default.svc</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
  <span class="na">syncPolicy</span><span class="pi">:</span>
    <span class="na">automated</span><span class="pi">:</span>
      <span class="na">prune</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">selfHeal</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h4 id="spoke-cluster-integration">Spoke Cluster Integration</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Register spoke cluster with hub</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">spoke-cluster-secret</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">argocd.argoproj.io/secret-type</span><span class="pi">:</span> <span class="s">cluster</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">stringData</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">spoke-cluster-prod</span>
  <span class="na">server</span><span class="pi">:</span> <span class="s">https://spoke-cluster-api.your-domain.com</span>
  <span class="na">config</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">{</span>
      <span class="s">"bearerToken": "spoke-cluster-token",</span>
      <span class="s">"tlsClientConfig": {</span>
        <span class="s">"insecure": false,</span>
        <span class="s">"caData": "base64-encoded-ca-cert"</span>
      <span class="s">}</span>
    <span class="s">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="advanced-authentication-patterns">Advanced Authentication Patterns</h3>

<h4 id="saml-integration-with-gitlab">SAML Integration with GitLab</h4>

<p>For enterprise environments requiring SAML integration:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">cm</span><span class="pi">:</span>
    <span class="na">dex.config</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connectors:</span>
        <span class="s">- type: gitlab</span>
          <span class="s">id: gitlab</span>
          <span class="s">name: GitLab</span>
          <span class="s">config:</span>
            <span class="s">baseURL: https://gitlab.your-domain.com</span>
            <span class="s">clientID: $dex.gitlab.clientId</span>
            <span class="s">clientSecret: $dex.gitlab.clientSecret</span>
            <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
            <span class="s">groups:</span>
              <span class="s">- engineering</span>
              <span class="s">- platform</span>
        <span class="s">- type: saml</span>
          <span class="s">id: saml</span>
          <span class="s">name: Enterprise SSO</span>
          <span class="s">config:</span>
            <span class="s">ssoURL: https://sso.your-domain.com/saml/login</span>
            <span class="s">redirectURI: https://argocd.your-domain.com/api/dex/callback</span>
            <span class="s">entityIssuer: https://argocd.your-domain.com/api/dex/callback</span>
            <span class="s">caData: |</span>
              <span class="s">-----BEGIN CERTIFICATE-----</span>
              <span class="s">... enterprise CA certificate ...</span>
              <span class="s">-----END CERTIFICATE-----</span>
            <span class="s">usernameAttr: email</span>
            <span class="s">emailAttr: email</span>
            <span class="s">groupsAttr: groups</span>
</code></pre></div></div>

<h4 id="jwt-token-configuration">JWT Token Configuration</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">configs</span><span class="pi">:</span>
  <span class="na">cm</span><span class="pi">:</span>
    <span class="c1"># JWT token configuration</span>
    <span class="na">oidc.config</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">name: GitLab</span>
      <span class="s">issuer: https://gitlab.your-domain.com</span>
      <span class="s">clientId: your-application-id</span>
      <span class="s">clientSecret: $oidc.gitlab.clientSecret</span>
      <span class="s">requestedScopes: ["openid", "profile", "email", "groups"]</span>
      <span class="s">requestedIDTokenClaims: {"groups": {"essential": true}}</span>
      <span class="s"># Token lifetime configuration</span>
      <span class="s">skipClientIDCheck: false</span>
      <span class="s">skipIssuerCheck: false</span>
      <span class="s"># Custom claims mapping</span>
      <span class="s">claimsMapping:</span>
        <span class="s">groups: gitlab_groups</span>
        <span class="s">email: email</span>
        <span class="s">preferred_username: preferred_username</span>
</code></pre></div></div>

<ul>
  <li>OAuth Authentication</li>
  <li>SAML Authentication</li>
  <li>OpenID Connect Authentication</li>
  <li>Multi-factor Authentication (MFA)</li>
  <li>Certificate-based Authentication</li>
</ul>

<p><br /></p>

<div class="info-box info-box-success-not-check">
  <strong>Production Deployment Checklist</strong>
  <ul>
    <li><strong>Security Configuration:</strong>
      <ul>
        <li>TLS/SSL certificates properly configured</li>
        <li>Network policies implemented</li>
        <li>RBAC policies tested and validated</li>
        <li>Secret rotation strategy in place</li>
        <li>Audit logging enabled</li>
      </ul>
    </li>
    <li><strong>High Availability:</strong>
      <ul>
        <li>Multiple replicas for all components</li>
        <li>Resource limits and requests defined</li>
        <li>Pod disruption budgets configured</li>
        <li>Health checks and readiness probes</li>
      </ul>
    </li>
    <li><strong>Monitoring &amp; Observability:</strong>
      <ul>
        <li>Prometheus metrics collection</li>
        <li>Grafana dashboards configured</li>
        <li>Alert rules defined</li>
        <li>Log aggregation setup</li>
      </ul>
    </li>
    <li><strong>Operational Excellence:</strong>
      <ul>
        <li>Backup and disaster recovery plan</li>
        <li>Documentation and runbooks</li>
        <li>Incident response procedures</li>
        <li>Performance testing completed</li>
      </ul>
    </li>
    <li><strong>Compliance &amp; Governance:</strong>
      <ul>
        <li>Security policies enforced</li>
        <li>Compliance requirements met</li>
        <li>Change management process</li>
        <li>Access control regularly audited</li>
      </ul>
    </li>
  </ul>
</div>

<p><br /></p>

<h3 id="enterprise-deployment-patterns">Enterprise Deployment Patterns</h3>

<h4 id="blue-green-deployment-for-argocd">Blue-Green Deployment for ArgoCD</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Blue environment</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">argoproj.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Application</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-blue</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">destination</span><span class="pi">:</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd-blue</span>
    <span class="na">server</span><span class="pi">:</span> <span class="s">https://kubernetes.default.svc</span>
  <span class="na">source</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">argocd</span>
    <span class="na">repoURL</span><span class="pi">:</span> <span class="s">https://gitlab.your-domain.com/platform/argocd-config</span>
    <span class="na">targetRevision</span><span class="pi">:</span> <span class="s">v2.8.4</span>
<span class="nn">---</span>
<span class="c1"># Green environment  </span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">argoproj.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Application</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">argocd-green</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">destination</span><span class="pi">:</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">argocd-green</span>
    <span class="na">server</span><span class="pi">:</span> <span class="s">https://kubernetes.default.svc</span>
  <span class="na">source</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">argocd</span>
    <span class="na">repoURL</span><span class="pi">:</span> <span class="s">https://gitlab.your-domain.com/platform/argocd-config</span>
    <span class="na">targetRevision</span><span class="pi">:</span> <span class="s">v2.9.0</span>
</code></pre></div></div>

<h4 id="gitops-repository-structure">GitOps Repository Structure</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── clusters/
│   ├── production/
│   │   ├── cluster-config.yaml
│   │   └── applications/
│   ├── staging/
│   │   ├── cluster-config.yaml
│   │   └── applications/
│   └── development/
│       ├── cluster-config.yaml
│       └── applications/
├── applications/
│   ├── base/
│   ├── overlays/
│   │   ├── production/
│   │   ├── staging/
│   │   └── development/
├── projects/
│   ├── platform.yaml
│   ├── application-team-a.yaml
│   └── application-team-b.yaml
└── bootstrap/
    └── argocd-apps.yaml
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="conclusion">Conclusion</h2>

<p>This comprehensive guide provides a production-ready approach to implementing enterprise-grade ArgoCD SSO with GitLab integration. By following these patterns and best practices, organizations can achieve:</p>

<ul>
  <li><strong>Scalable Authentication</strong>: Support for thousands of users across multiple clusters</li>
  <li><strong>Enhanced Security</strong>: Zero-trust architecture with comprehensive audit trails</li>
  <li><strong>Operational Excellence</strong>: Automated operations with robust monitoring and alerting</li>
  <li><strong>Compliance Ready</strong>: Built-in governance and audit capabilities</li>
</ul>

<p>The integration between ArgoCD and GitLab creates a powerful platform for modern software delivery, enabling teams to maintain velocity while ensuring security and compliance requirements are met at scale.</p>

<h2 id="references">References</h2>
<ul>
  <li><a href="https://argo-cd.readthedocs.io/en/stable/">ArgoCD Documentation</a></li>
  <li><a href="https://docs.gitlab.com/ee/integration/oauth_provider.html">GitLab OAuth Documentation</a></li>
  <li><a href="https://dexidp.io/docs/connectors/gitlab/">Dex Authenticator Documentation</a></li>
  <li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/">ArgoCD RBAC Configuration</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes Secret Management</a></li>
  <li><a href="https://external-secrets.io/">External Secrets Operator</a></li>
  <li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/high_availability/">ArgoCD High Availability</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/services-networking/network-policies/">Kubernetes Network Policies</a></li>
  <li><a href="https://opengitops.dev/">GitOps Principles</a></li>
  <li><a href="https://github.com/cncf/sig-security/blob/master/security-whitepaper/CNCF_cloud-native-security-whitepaper-May2020.pdf">CNCF Security Whitepaper</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/cs/tls-https/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767770122/tls-handshake-1_nwd3f0.png">
                                    
                                    <h3>TLS Handshake and Certificate Architecture - A Deep Dive into HTTPS Security</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/container/dockerfile/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755656803/dockerfile-1_xe6akt.png">
                                    
                                    <h3>Dockerfile - Complete Guide to Container Image Creation and Best Practices</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/cicd/git-standard/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755676242/git-standard-1_vlntxr.png">
                                    
                                    <h3>Essential Git Commands: A Complete Developer's Guide</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="23">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/kubernetes/kustomize/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1739947439/kustomize_luhcoo.png">
                
            </div>
            <h3 class="title">What is Kustomize? A Configuration Management Tool for Kubernetes</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Complete guide to implementing enterprise ArgoCD SSO with GitLab, including security hardening, RBAC patterns, and operational best practices&quot;%20https://somaz.blog/category/cicd/argocd-sso-gitlab/%20via%20&#64;twitter_username&hashtags=argocd,gitlab,kubernetes,helm,sso,rbac,security,gitops,enterprise"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/cicd/argocd-sso-gitlab/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/cicd/argocd-sso-gitlab/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "Enterprise-Grade ArgoCD SSO with GitLab Integration",
            "headline": "Production-ready guide to implementing secure ArgoCD SSO with GitLab including advanced RBAC and multi-cluster federation",
            "description": "Complete guide to implementing enterprise ArgoCD SSO with GitLab, including security hardening, RBAC patterns, and operational best practices",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1739943377/argocd-sso-gitlab_jzuunn.png",
            "url": "https://somaz.blog/category/cicd/argocd-sso-gitlab/",
            "articleBody": "



Overview

In the last post, I tried configuring ArgoCD SSO using Google Oauth,

This post explains how to configure Single Sign-On (SSO) for ArgoCD using GitLab. We’ll walk through the process of setting up GitLab OAuth and integrating it with ArgoCD.



Enterprise GitOps Authentication Architecture

Modern enterprise environments require sophisticated authentication strategies that can scale across multiple clusters while maintaining security and compliance. The integration between ArgoCD and GitLab provides a robust foundation for enterprise GitOps workflows.


  
    graph TB
        subgraph &quot;Identity Provider Layer&quot;
            GitLab[GitLab OAuth Provider]
            SAML[Enterprise SAML/LDAP]
        end
        
        subgraph &quot;Authentication Layer&quot;
            Dex[Dex Identity Proxy]
            OAuth[OAuth2 Flow]
        end
        
        subgraph &quot;ArgoCD Platform&quot;
            Server[ArgoCD Server]
            RBAC[RBAC Engine]
            JWT[JWT Validation]
        end
        
        subgraph &quot;Multi-Cluster Environment&quot;
            Prod[Production Cluster]
            Staging[Staging Cluster]
            Dev[Development Cluster]
        end
        
        GitLab --&amp;gt; Dex
        SAML --&amp;gt; GitLab
        Dex --&amp;gt; OAuth
        OAuth --&amp;gt; Server
        Server --&amp;gt; RBAC
        RBAC --&amp;gt; JWT
        JWT --&amp;gt; Prod
        JWT --&amp;gt; Staging
        JWT --&amp;gt; Dev
  




Benefits of GitLab SSO Integration


  
    
      Unified Authentication
      Allows developers to use their existing GitLab credentials for ArgoCD access.
    
    
      Streamlined Access Management
      Leverages GitLab&apos;s groups and user management for ArgoCD authorization.
    
    
      Improved Developer Experience
      Eliminates the need to manage separate credentials for GitLab and ArgoCD.
    
    
      Consistent Permissions
      GitLab groups can be mapped directly to ArgoCD roles for consistent access control.
    
  




Prerequisites

  GitLab instance (Self-hosted CE/EE 13.0+ or GitLab.com)
  ArgoCD 2.8+ installed on a Kubernetes cluster
  Administrative access to both GitLab and ArgoCD
  Properly configured DNS for ArgoCD server
  SSL/TLS certificates for secure communication
  Kubernetes RBAC enabled cluster


Security Planning Considerations

Before implementing SSO, consider these enterprise security requirements:


  
    
      Security Domain
      Requirements
      Implementation
    
    
      Identity Provider
      Multi-factor authentication, SAML integration
      GitLab + Enterprise SSO
    
    
      Network Security
      TLS 1.3, Network policies, WAF
      Ingress + cert-manager
    
    
      Access Control
      Least privilege, role separation
      RBAC + Project isolation
    
    
      Audit &amp;amp; Compliance
      Complete audit trails, compliance reporting
      Centralized logging + monitoring
    
  




Steps



1. Create GitLab Application

Console Method

  Navigate to Admin Area &amp;gt; Applications in GitLab
  Create new application:
    
      Name: Argo CD
      Redirect URI: https://argocd-server-urlapi/dex/callback
      Select Scopes:
        
          read_user
          openid
          profile
          email
        
      
    
  
  Save the credentials:
    
      Application ID (Client ID)
      Secret (Client Secret)
    
  




Command Line Setup

If you’re using GitLab API to create the application:





GitLab Application Security Considerations

Application Security Best Practices:

  Scopes Selection:
    
      Only select required scopes (read_user, openid, profile, email)
      Avoid adding unnecessary permissions like api or write_repository
    
  
  Application Configuration:
    
      Use a descriptive application name for audit purposes
      Set application expiration date for security rotation
      Rotate client secrets every 90 days in production
      Use secure redirect URI validation
    
  
  Access Management:
    
      Limit admin access to GitLab application settings
      Document the integration for security reviews
      Implement approval workflows for changes
    
  


Enterprise Security Enhancements:
# Enhanced security configuration
dex.config: |
  connectors:
    - type: gitlab
      id: gitlab
      name: GitLab
      config:
        baseURL: https://gitlab.your-domain.com
        clientID: $dex.gitlab.clientId
        clientSecret: $dex.gitlab.clientSecret
        redirectURI: https://argocd.your-domain.com/api/dex/callback
        groups:
          - engineering
          - platform
        # Enhanced security options
        useLoginAsID: false
        insecureSkipVerify: false
        # Custom CA certificate for private GitLab
        rootCAs: |
          -----BEGIN CERTIFICATE-----
          ... your CA certificate ...
          -----END CERTIFICATE-----




2. Configure ArgoCD Installation

Create values/mgmt.yaml with production-ready configuration:

global:
  domain: argocd.your-domain.com

configs:
  params:
    create: true
    server.insecure: false  # Always use TLS in production
    # Security hardening
    server.enable.grpc.web: true
    server.grpc.keepalive.time: 60s
    server.grpc.keepalive.timeout: 5s

  ssh:
    extraHosts: |
      gitlab.your-domain.com ssh-rsa AAAAB3N...
      gitlab.your-domain.com ecdsa-sha2-nistp256...
      gitlab.your-domain.com ssh-ed25519 AAAA..

  # Global security configurations
  cm:
    # Session timeout for security
    timeout.hard.reconciliation: 0
    timeout.reconciliation: 180s
    # Application source restrictions
    application.instanceLabelKey: argocd.argoproj.io/instance
    # Repository credentials template
    repositories: |
      - type: git
        url: https://gitlab.your-domain.com
        passwordSecret:
          name: gitlab-secret
          key: password
        usernameSecret:
          name: gitlab-secret
          key: username

controller:
  replicas: 3  # High availability
  resources:
    limits:
      cpu: 2000m
      memory: 4Gi
    requests:
      cpu: 500m
      memory: 1Gi
  # Application controller metrics
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

dex:
  enabled: true
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 250m
      memory: 128Mi

redis:
  enabled: true
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 64Mi

server:
  replicas: 3  # High availability
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 250m
      memory: 512Mi
  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: &quot;true&quot;
      nginx.ingress.kubernetes.io/backend-protocol: &quot;GRPC&quot;
      cert-manager.io/cluster-issuer: &quot;letsencrypt-prod&quot;
      nginx.ingress.kubernetes.io/grpc-backend: &quot;true&quot;
    ingressClassName: &quot;nginx&quot;
    path: /
    pathType: Prefix
    tls:
      - secretName: argocd-server-tls
        hosts:
          - argocd.your-domain.com
  # Server metrics
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

repoServer:
  replicas: 3  # High availability
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 250m
      memory: 512Mi
  # Repo server metrics
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

applicationSet:
  replicas: 2  # High availability
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

notifications:
  enabled: true
  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 64Mi
  # Notification integrations
  notifiers:
    service.slack: |
      token: $slack-token
    service.email.gmail: |
      username: $email-username
      password: $email-password
      host: smtp.gmail.com
      port: 587
      from: $email-username




3. Configure GitLab SSO

Update values/mgmt.yaml with SSO configuration:

configs:
  cm:
    timeout.reconciliation: 60s
    dex.config: |
      connectors:
        - type: gitlab
          id: gitlab
          name: GitLab
          config:
            baseURL: &amp;lt;gitlab url&amp;gt;
            clientID: &amp;lt;application id&amp;gt;
            clientSecret: &amp;lt;secret&amp;gt;
            redirectURI: https://&amp;lt;argocd url&amp;gt;/api/dex/callback
            groups:
              - server
              
  rbac:
    create: true
    policy.csv: |
      p, role:org-admin, applications, *, */*, allow
      p, role:org-admin, clusters, get, *, allow
      p, role:org-admin, repositories, *, *, allow
      p, role:org-admin, projects, get, *, allow
      p, role:org-admin, logs, get, *, allow
      p, role:org-admin, exec, create, */*, allow
      
      g, &amp;lt;group&amp;gt;, role:org-admin

  secrets:
    dex.gitlab.clientId: &quot;&amp;lt;application id&amp;gt;&quot;
    dex.gitlab.clientSecret: &quot;&amp;lt;secret&amp;gt;&quot;




Apply the changes:

helm upgrade argocd . -n argocd -f ./values/mgmt.yaml
kubectl rollout restart -n argocd deployment argocd-dex-server




4. Test Login
Access your ArgoCD instance and verify GitLab SSO login works correctly.





Advanced GitLab SSO Configuration



Multi-Environment RBAC Strategy

Implement a comprehensive RBAC strategy that scales across multiple environments:

configs:
  rbac:
    policy.csv: |
      # Global Admin Role - Full cluster access
      p, role:global-admin, applications, *, */*, allow
      p, role:global-admin, clusters, *, *, allow
      p, role:global-admin, repositories, *, *, allow
      p, role:global-admin, projects, *, *, allow
      p, role:global-admin, accounts, *, *, allow
      p, role:global-admin, certificates, *, *, allow
      p, role:global-admin, gpgkeys, *, *, allow
      p, role:global-admin, logs, *, *, allow
      p, role:global-admin, exec, *, *, allow
      
      # Platform Team - Infrastructure management
      p, role:platform-admin, applications, *, platform/*, allow
      p, role:platform-admin, applications, *, infrastructure/*, allow
      p, role:platform-admin, clusters, get, *, allow
      p, role:platform-admin, repositories, *, *, allow
      p, role:platform-admin, projects, get, *, allow
      p, role:platform-admin, logs, *, platform/*, allow
      p, role:platform-admin, logs, *, infrastructure/*, allow
      
      # DevOps Team - Application deployment
      p, role:devops-engineer, applications, *, */prod, allow
      p, role:devops-engineer, applications, *, */staging, allow
      p, role:devops-engineer, applications, sync, */*, allow
      p, role:devops-engineer, repositories, get, *, allow
      p, role:devops-engineer, logs, *, */*, allow
      p, role:devops-engineer, exec, create, */staging, allow
      
      # Senior Developers - Production read, staging full
      p, role:senior-developer, applications, get, */prod, allow
      p, role:senior-developer, applications, *, */staging, allow
      p, role:senior-developer, applications, *, */dev, allow
      p, role:senior-developer, logs, *, */*, allow
      p, role:senior-developer, exec, create, */dev, allow
      p, role:senior-developer, exec, create, */staging, allow
      
      # Regular Developers - Development environment only
      p, role:developer, applications, get, */prod, allow
      p, role:developer, applications, get, */staging, allow
      p, role:developer, applications, *, */dev, allow
      p, role:developer, logs, *, */dev, allow
      p, role:developer, exec, create, */dev, allow
      
      # Security Team - Read-only audit access
      p, role:security-auditor, applications, get, */*, allow
      p, role:security-auditor, logs, get, */*, allow
      p, role:security-auditor, repositories, get, *, allow
      p, role:security-auditor, clusters, get, *, allow
      
      # Map GitLab groups to roles
      g, gitlab:platform-admins, role:global-admin
      g, gitlab:infrastructure-team, role:platform-admin
      g, gitlab:devops-engineers, role:devops-engineer
      g, gitlab:senior-developers, role:senior-developer
      g, gitlab:developers, role:developer
      g, gitlab:security-team, role:security-auditor
      
    # Default policy for authenticated users
    policy.default: role:readonly
    # Required scopes for group mapping
    scopes: &quot;[groups, email, profile]&quot;


Role-Based Access Control with GitLab Groups

You can map different GitLab groups to different ArgoCD roles for granular access control:

configs:
  rbac:
    policy.csv: |
      # Administrators with full access
      p, role:admin, applications, *, */*, allow
      p, role:admin, clusters, *, *, allow
      p, role:admin, repositories, *, *, allow
      p, role:admin, projects, *, *, allow
      p, role:admin, accounts, *, *, allow
      p, role:admin, gpgkeys, *, *, allow
      p, role:admin, logs, *, *, allow
      p, role:admin, exec, *, *, allow
      p, role:admin, certificates, *, *, allow
      
      # DevOps team with broad access but not admin
      p, role:devops, applications, *, */*, allow
      p, role:devops, clusters, get, *, allow
      p, role:devops, repositories, *, *, allow
      p, role:devops, logs, *, *, allow
      p, role:devops, exec, create, */*, allow
      
      # Developers with limited access
      p, role:developer, applications, get, */*, allow
      p, role:developer, applications, sync, */*, allow
      p, role:developer, repositories, get, *, allow
      p, role:developer, logs, get, */*, allow
      
      # Map GitLab groups to roles
      g, gitlab:platform-admin, role:admin
      g, gitlab:devops-team, role:devops
      g, gitlab:developers, role:developer


Project-Specific Access Control

You can also configure access to specific ArgoCD projects:

configs:
  rbac:
    policy.csv: |
      # Team A access to Team A projects only
      p, role:team-a, applications, *, team-a/*, allow
      p, role:team-a, logs, *, team-a/*, allow
      g, gitlab:team-a, role:team-a
      
      # Team B access to Team B projects only
      p, role:team-b, applications, *, team-b/*, allow
      p, role:team-b, logs, *, team-b/*, allow
      g, gitlab:team-b, role:team-b


Using GitLab Subgroups

If you have GitLab subgroups, you can map them in ArgoCD:

configs:
  cm:
    dex.config: |
      connectors:
        - type: gitlab
          id: gitlab
          name: GitLab
          config:
            baseURL: https://gitlab.your-domain.com
            clientID: &amp;lt;application_id&amp;gt;
            clientSecret: &amp;lt;secret&amp;gt;
            redirectURI: https://argocd.your-domain.com/api/dex/callback
            groups:
              - engineering/backend
              - engineering/frontend
              - operations/platform




Manual Installation and Configuration

If you’re not using Helm, here’s how to configure ArgoCD manually:



1. Create argocd-cm ConfigMap

apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-cm
  namespace: argocd
data:
  url: https://argocd.your-domain.com
  dex.config: |
    connectors:
      - type: gitlab
        id: gitlab
        name: GitLab
        config:
          baseURL: https://gitlab.your-domain.com
          clientID: &amp;lt;application_id&amp;gt;
          clientSecret: $dex.gitlab.clientSecret
          redirectURI: https://argocd.your-domain.com/api/dex/callback
          groups:
            - devops
            - engineering




2. Create argocd-secret for GitLab Credentials

# Convert client secret to base64
GITLAB_CLIENT_SECRET_BASE64=$(echo -n &quot;your-gitlab-client-secret&quot; | base64)

# Apply the secret
kubectl patch secret argocd-secret -n argocd --type=json -p=&apos;[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/data/dex.gitlab.clientSecret&quot;, &quot;value&quot;:&quot;&apos;$GITLAB_CLIENT_SECRET_BASE64&apos;&quot;}]&apos;




3. Configure RBAC

apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-rbac-cm
  namespace: argocd
data:
  policy.csv: |
    p, role:org-admin, applications, *, */*, allow
    p, role:org-admin, clusters, get, *, allow
    p, role:org-admin, repositories, *, *, allow
    p, role:org-admin, projects, get, *, allow
    p, role:org-admin, logs, get, *, allow
    p, role:org-admin, exec, create, */*, allow
    
    g, gitlab:devops, role:org-admin
  policy.default: role:readonly
  scopes: &quot;[groups, email]&quot;




Troubleshooting GitLab SSO



Common Issues and Solutions:

1. Authentication Failed:
   - Verify client ID and secret match GitLab application
   - Check baseURL points to correct GitLab instance
   - Ensure redirectURI matches exactly (including trailing slash)
   - Verify required scopes are enabled in GitLab application

2. User Successfully Authenticates but Has No Access:
   - Check if user belongs to the correct GitLab group
   - Verify groups are correctly mapped in RBAC policy
   - Confirm &apos;groups&apos; is included in scopes setting
   - Check ArgoCD logs for group claim issues

3. Redirect URI Error:
   - Double check the redirect URI in both GitLab and ArgoCD config
   - Ensure the ArgoCD server is accessible at the configured URL
   - Check for TLS/SSL certificate issues

4. Timeout During Authentication:
   - Check network connectivity between ArgoCD and GitLab
   - Verify GitLab instance is running and accessible
   - Check for firewall or proxy issues




Debugging Steps

# Check Dex logs for authentication issues
kubectl logs -n argocd -l app.kubernetes.io/name=argocd-dex-server

# Check ArgoCD server logs
kubectl logs -n argocd -l app.kubernetes.io/name=argocd-server

# Verify configuration
kubectl get configmap argocd-cm -n argocd -o yaml
kubectl get configmap argocd-rbac-cm -n argocd -o yaml

# Check if secret is properly configured (will be masked)
kubectl get secret argocd-secret -n argocd -o yaml




Self-Hosted GitLab SSL Issues

If you’re using a self-signed certificate with GitLab, you may need to add it to ArgoCD:

apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-cm
  namespace: argocd
data:
  # ... existing config ...
  dex.config: |
    connectors:
      - type: gitlab
        id: gitlab
        name: GitLab
        config:
          baseURL: https://gitlab.your-domain.com
          clientID: &amp;lt;application_id&amp;gt;
          clientSecret: $dex.gitlab.clientSecret
          redirectURI: https://argocd.your-domain.com/api/dex/callback
          groups:
            - devops
          # For self-signed certificates:
          insecureSkipVerify: true


Note: Using insecureSkipVerify: true is not recommended for production environments. Instead, properly configure certificates.



Security Best Practices



  Access Control:
    
      Implement least privilege principle in RBAC policies
      Regularly audit group memberships in GitLab
      Periodically review ArgoCD access
    
  
  Credentials Management:
    
      Rotate GitLab client secret periodically
      Store secrets in Kubernetes secrets, not in plain text
      Consider using a secrets management solution
    
  
  Network Security:
    
      Use HTTPS for all communication
      Implement network policies in Kubernetes
      Consider IP restrictions if applicable
    
  
  Audit and Monitoring:
    
      Enable and review audit logs
      Set up alerts for unauthorized access attempts
      Monitor SSO configuration changes
    
  





Advanced Security Configuration

Network Policies for ArgoCD

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: argocd-security-policy
  namespace: argocd
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: ingress-nginx
    ports:
    - protocol: TCP
      port: 8080
  egress:
  - to:
    - namespaceSelector:
        matchLabels:
          name: kube-system
    ports:
    - protocol: TCP
      port: 443
  - to: []
    ports:
    - protocol: TCP
      port: 443  # HTTPS to GitLab


External Secrets Integration



Pod Security Standards

apiVersion: v1
kind: Namespace
metadata:
  name: argocd
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted




Enterprise Automation Framework

Here’s an enhanced automation script for enterprise GitLab SSO configuration:







Monitoring and Observability

Prometheus Metrics Configuration



Grafana Dashboard Integration

{
  &quot;dashboard&quot;: {
    &quot;title&quot;: &quot;ArgoCD SSO Monitoring&quot;,
    &quot;panels&quot;: [
      {
        &quot;title&quot;: &quot;Login Success Rate&quot;,
        &quot;type&quot;: &quot;stat&quot;,
        &quot;targets&quot;: [
          {
            &quot;expr&quot;: &quot;rate(argocd_server_login_successes_total[5m]) / (rate(argocd_server_login_successes_total[5m]) + rate(argocd_server_login_failures_total[5m])) * 100&quot;
          }
        ]
      },
      {
        &quot;title&quot;: &quot;Active Sessions&quot;,
        &quot;type&quot;: &quot;graph&quot;,
        &quot;targets&quot;: [
          {
            &quot;expr&quot;: &quot;argocd_server_sessions_total&quot;
          }
        ]
      }
    ]
  }
}




Multi-Cluster Federation

Hub Cluster Configuration

# Hub cluster ArgoCD configuration
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: spoke-cluster-apps
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://gitlab.your-domain.com/platform/cluster-configs
    targetRevision: HEAD
    path: spoke-clusters
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
  syncPolicy:
    automated:
      prune: true
      selfHeal: true


Spoke Cluster Integration

# Register spoke cluster with hub
apiVersion: v1
kind: Secret
metadata:
  name: spoke-cluster-secret
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: cluster
type: Opaque
stringData:
  name: spoke-cluster-prod
  server: https://spoke-cluster-api.your-domain.com
  config: |
    {
      &quot;bearerToken&quot;: &quot;spoke-cluster-token&quot;,
      &quot;tlsClientConfig&quot;: {
        &quot;insecure&quot;: false,
        &quot;caData&quot;: &quot;base64-encoded-ca-cert&quot;
      }
    }




Advanced Authentication Patterns

SAML Integration with GitLab

For enterprise environments requiring SAML integration:

configs:
  cm:
    dex.config: |
      connectors:
        - type: gitlab
          id: gitlab
          name: GitLab
          config:
            baseURL: https://gitlab.your-domain.com
            clientID: $dex.gitlab.clientId
            clientSecret: $dex.gitlab.clientSecret
            redirectURI: https://argocd.your-domain.com/api/dex/callback
            groups:
              - engineering
              - platform
        - type: saml
          id: saml
          name: Enterprise SSO
          config:
            ssoURL: https://sso.your-domain.com/saml/login
            redirectURI: https://argocd.your-domain.com/api/dex/callback
            entityIssuer: https://argocd.your-domain.com/api/dex/callback
            caData: |
              -----BEGIN CERTIFICATE-----
              ... enterprise CA certificate ...
              -----END CERTIFICATE-----
            usernameAttr: email
            emailAttr: email
            groupsAttr: groups


JWT Token Configuration

configs:
  cm:
    # JWT token configuration
    oidc.config: |
      name: GitLab
      issuer: https://gitlab.your-domain.com
      clientId: your-application-id
      clientSecret: $oidc.gitlab.clientSecret
      requestedScopes: [&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;, &quot;groups&quot;]
      requestedIDTokenClaims: {&quot;groups&quot;: {&quot;essential&quot;: true}}
      # Token lifetime configuration
      skipClientIDCheck: false
      skipIssuerCheck: false
      # Custom claims mapping
      claimsMapping:
        groups: gitlab_groups
        email: email
        preferred_username: preferred_username



  OAuth Authentication
  SAML Authentication
  OpenID Connect Authentication
  Multi-factor Authentication (MFA)
  Certificate-based Authentication





  Production Deployment Checklist
  
    Security Configuration:
      
        TLS/SSL certificates properly configured
        Network policies implemented
        RBAC policies tested and validated
        Secret rotation strategy in place
        Audit logging enabled
      
    
    High Availability:
      
        Multiple replicas for all components
        Resource limits and requests defined
        Pod disruption budgets configured
        Health checks and readiness probes
      
    
    Monitoring &amp;amp; Observability:
      
        Prometheus metrics collection
        Grafana dashboards configured
        Alert rules defined
        Log aggregation setup
      
    
    Operational Excellence:
      
        Backup and disaster recovery plan
        Documentation and runbooks
        Incident response procedures
        Performance testing completed
      
    
    Compliance &amp;amp; Governance:
      
        Security policies enforced
        Compliance requirements met
        Change management process
        Access control regularly audited
      
    
  




Enterprise Deployment Patterns

Blue-Green Deployment for ArgoCD

# Blue environment
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd-blue
  namespace: argocd-system
spec:
  destination:
    namespace: argocd-blue
    server: https://kubernetes.default.svc
  source:
    path: argocd
    repoURL: https://gitlab.your-domain.com/platform/argocd-config
    targetRevision: v2.8.4
---
# Green environment  
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd-green
  namespace: argocd-system
spec:
  destination:
    namespace: argocd-green
    server: https://kubernetes.default.svc
  source:
    path: argocd
    repoURL: https://gitlab.your-domain.com/platform/argocd-config
    targetRevision: v2.9.0


GitOps Repository Structure

├── clusters/
│   ├── production/
│   │   ├── cluster-config.yaml
│   │   └── applications/
│   ├── staging/
│   │   ├── cluster-config.yaml
│   │   └── applications/
│   └── development/
│       ├── cluster-config.yaml
│       └── applications/
├── applications/
│   ├── base/
│   ├── overlays/
│   │   ├── production/
│   │   ├── staging/
│   │   └── development/
├── projects/
│   ├── platform.yaml
│   ├── application-team-a.yaml
│   └── application-team-b.yaml
└── bootstrap/
    └── argocd-apps.yaml






Conclusion

This comprehensive guide provides a production-ready approach to implementing enterprise-grade ArgoCD SSO with GitLab integration. By following these patterns and best practices, organizations can achieve:


  Scalable Authentication: Support for thousands of users across multiple clusters
  Enhanced Security: Zero-trust architecture with comprehensive audit trails
  Operational Excellence: Automated operations with robust monitoring and alerting
  Compliance Ready: Built-in governance and audit capabilities


The integration between ArgoCD and GitLab creates a powerful platform for modern software delivery, enabling teams to maintain velocity while ensuring security and compliance requirements are met at scale.

References

  ArgoCD Documentation
  GitLab OAuth Documentation
  Dex Authenticator Documentation
  ArgoCD RBAC Configuration
  Kubernetes Secret Management
  External Secrets Operator
  ArgoCD High Availability
  Kubernetes Network Policies
  GitOps Principles
  CNCF Security Whitepaper

",
            "wordcount": "4168",
            "inLanguage": "en",
            "dateCreated": "2025-06-15/",
            "datePublished": "2025-06-15/",
            "dateModified": "2025-06-15/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "CICD",
            "articleSection": "CICD",
            "keywords": ["argocd","gitlab","kubernetes","helm","sso","rbac","security","gitops","enterprise"]
        }
        </script>
    </body>
</html>
