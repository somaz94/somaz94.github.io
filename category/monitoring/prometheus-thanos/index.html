<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>What is Prometheus and Thanos? | somaz</title>
    <meta name="description" content="Learn about Prometheus monitoring system and how Thanos extends its capabilities for large-scale deployments">
    
        <meta name="keywords" content="prometheus, thanos, monitoring, kubernetes">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="What is Prometheus and Thanos? | somaz">
    <meta name="twitter:description" content="Learn about Prometheus monitoring system and how Thanos extends its capabilities for large-scale deployments">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1767948420/prometheus-thanos-2_mbky8a.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/monitoring/prometheus-thanos/">
    <meta property="og:title" content="What is Prometheus and Thanos? | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1767948420/prometheus-thanos-2_mbky8a.png">
    <meta property="og:description" content="Learn about Prometheus monitoring system and how Thanos extends its capabilities for large-scale deployments">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/monitoring/prometheus-thanos/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-06-02T00:00:00+00:00">
                            


June 2, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>12 min to read</span>
                </p>
                <h1 class="post-title">What is Prometheus and Thanos?</h1>
                <p class="post-subtitle">A comprehensive guide to Prometheus monitoring and Thanos scalability</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1767948420/prometheus-thanos-2_mbky8a.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>Let’s explore Prometheus and Thanos, two powerful tools for monitoring and scaling metrics collection in cloud-native environments.</p>

<p><br /></p>

<h2 id="what-is-prometheus">What is Prometheus?</h2>

<p>Prometheus is an open-source monitoring and alerting system designed for reliability and scalability in dynamic cloud-native environments. It collects and stores time-series metrics with powerful querying capabilities, enabling real-time monitoring, trend analysis, and alerting for modern infrastructure and applications.</p>

<p><br /></p>

<h3 id="introduction-to-prometheus">Introduction to Prometheus</h3>

<p>Developed in 2012 at SoundCloud and now maintained by the Cloud Native Computing Foundation (CNCF), Prometheus has become the de facto standard for monitoring in Kubernetes environments.</p>

<h4 id="key-design-principles">Key design principles:</h4>
<ul>
  <li><strong>Pull-based Architecture:</strong> Prometheus actively scrapes metrics from monitored targets</li>
  <li><strong>Time Series Database:</strong> Optimized for storing metrics with timestamps</li>
  <li><strong>Dimensional Data Model:</strong> Uses metric names and key-value pairs (labels) for efficient querying</li>
  <li><strong>Resource Efficiency:</strong> Designed to operate with minimal overhead</li>
  <li><strong>Operational Simplicity:</strong> Single binary deployment with no external dependencies</li>
</ul>

<blockquote>
  <p>Prometheus is particularly well-suited for microservices architectures, containerized environments, and dynamic infrastructure where traditional monitoring solutions often struggle.</p>
</blockquote>

<p><br /></p>

<h3 id="core-components-and-architecture">Core Components and Architecture</h3>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Monitored Targets] --&gt; |Expose Metrics| B[Prometheus Server]
      B --&gt; |Stores| C[Time Series Database]
      B --&gt; |Evaluates| D[Alert Rules]
      D --&gt; |Sends Alerts| E[Alertmanager]
      E --&gt; |Notifies| F[Notification Channels]
      B --&gt; |Serves| G[PromQL API]
      G --&gt; |Queries| H[Visualization Tools]
      I[Service Discovery] --&gt; |Target Discovery| B
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#f5f5f5,stroke:#333,stroke-width:1px
      style G fill:#ef9a9a,stroke:#333,stroke-width:1px
      style H fill:#f5f5f5,stroke:#333,stroke-width:1px
      style I fill:#9fa8da,stroke:#333,stroke-width:1px
  </div>
</div>

<p><br /></p>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Component</th>
      <th style="width: 80%;">Description</th>
    </tr>
    <tr>
      <td><strong>Prometheus Server</strong></td>
      <td>
        <ul>
          <li>The core component that scrapes and stores time series data</li>
          <li>Evaluates alert rules against collected metrics</li>
          <li>Provides a query API for accessing stored data</li>
          <li>Manages service discovery to identify targets</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Alertmanager</strong></td>
      <td>
        <ul>
          <li>Handles alerts sent by the Prometheus server</li>
          <li>Implements deduplication, grouping, and routing of alerts</li>
          <li>Integrates with various notification channels (email, Slack, PagerDuty, etc.)</li>
          <li>Manages silencing and inhibition of alerts</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Pushgateway</strong></td>
      <td>
        <ul>
          <li>Allows ephemeral and batch jobs to expose metrics</li>
          <li>Provides a push-based metrics collection mechanism</li>
          <li>Bridges the gap for services that cannot be scraped directly</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Exporters</strong></td>
      <td>
        <ul>
          <li>Specialized programs that expose metrics from third-party systems</li>
          <li>Common examples: Node Exporter (system metrics), MySQL Exporter, Redis Exporter</li>
          <li>Convert system-specific metrics to Prometheus format</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Client Libraries</strong></td>
      <td>
        <ul>
          <li>Libraries for instrumenting application code</li>
          <li>Available for various languages (Go, Python, Java, Ruby, etc.)</li>
          <li>Enable custom metric collection directly from applications</li>
        </ul>
      </td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="key-features-and-capabilities">Key Features and Capabilities</h3>

<div class="info-box info-box-default-not-check">
  <strong>Prometheus Strengths</strong>
  <ul>
    <li><strong>Multidimensional Data Model</strong>
      <ul>
        <li>Time series identified by metric name and key-value pairs (labels)</li>
        <li>Enables flexible filtering, grouping, and aggregation</li>
        <li>Supports high-cardinality metrics with efficient storage</li>
      </ul>
    </li>
    <li><strong>PromQL (Prometheus Query Language)</strong>
      <ul>
        <li>Powerful functional query language specifically designed for time series</li>
        <li>Supports complex mathematical operations and transformations</li>
        <li>Enables sophisticated aggregations and joins across metrics</li>
        <li>Built-in functions for rate calculations, histograms, and trend analysis</li>
      </ul>
    </li>
    <li><strong>Service Discovery Integration</strong>
      <ul>
        <li>Native support for Kubernetes, Consul, AWS, Azure, GCP, and others</li>
        <li>Automatically adapts to changing infrastructure</li>
        <li>Supports both static and dynamic target configuration</li>
      </ul>
    </li>
    <li><strong>Alert Management</strong>
      <ul>
        <li>Declarative alert definitions with PromQL expressions</li>
        <li>Multi-stage alert pipeline with deduplication and grouping</li>
        <li>Silencing and inhibition capabilities for alert management</li>
      </ul>
    </li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="what-is-thanos">What is Thanos?</h2>

<p>Thanos is an open-source project that extends Prometheus capabilities by adding long-term storage, global query view, and high availability features. It enables a unified monitoring system that can scale across multiple clusters and regions while maintaining compatibility with the Prometheus ecosystem.</p>

<p><br /></p>

<h3 id="introduction-to-thanos">Introduction to Thanos</h3>

<div class="info-box info-box-default-not-check">
  <strong>Addressing Prometheus Limitations</strong>
  <p>While Prometheus excels at monitoring individual environments, it faces several limitations in large-scale, distributed deployments:</p>
  
  <ul>
    <li><strong>Limited Storage Capacity</strong>: Prometheus stores data locally, limiting retention periods</li>
    <li><strong>High Availability Challenges</strong>: Single Prometheus instance represents a potential single point of failure</li>
    <li><strong>Data Silos</strong>: Multiple Prometheus instances create isolated data that cannot be easily queried together</li>
    <li><strong>Cross-Cluster Visibility</strong>: No built-in way to view metrics across multiple clusters</li>
  </ul>
  
  <p>Thanos was designed to address these limitations while maintaining full compatibility with the Prometheus ecosystem, enabling organizations to scale their monitoring infrastructure without sacrificing functionality or requiring a complete architecture redesign.</p>
</div>

<p><br /></p>

<h3 id="core-components-and-architecture-1">Core Components and Architecture</h3>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Prometheus + Sidecar] --&gt; |Uploads Blocks| B[Object Storage]
      A --&gt; |Real-time Query| C[Thanos Querier]
      D[Prometheus + Sidecar] --&gt; |Uploads Blocks| B
      D --&gt; |Real-time Query| C
      B --&gt; |Historical Data| E[Store Gateway]
      E --&gt; |Historical Query| C
      C --&gt; |Deduplicated Results| F[Grafana/API Clients]
      B --&gt; G[Compactor]
      G --&gt; |Compacted Blocks| B
      H[Rule] --&gt; |Alert/Recording Rules| C
      
      style A fill:#a5d6a7,stroke:#333,stroke-width:1px
      style B fill:#64b5f6,stroke:#333,stroke-width:1px
      style C fill:#ffcc80,stroke:#333,stroke-width:1px
      style D fill:#a5d6a7,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#f5f5f5,stroke:#333,stroke-width:1px
      style G fill:#ef9a9a,stroke:#333,stroke-width:1px
      style H fill:#9fa8da,stroke:#333,stroke-width:1px
  </div>
</div>

<p><br /></p>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Component</th>
      <th style="width: 80%;">Description</th>
    </tr>
    <tr>
      <td><strong>Sidecar</strong></td>
      <td>
        <ul>
          <li>Runs alongside each Prometheus instance</li>
          <li>Uploads metrics data to long-term object storage</li>
          <li>Exposes Prometheus metrics via a common API</li>
          <li>Enables transparent query integration with Thanos Query</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Querier</strong></td>
      <td>
        <ul>
          <li>Implements the Prometheus API for querying</li>
          <li>Aggregates data from multiple sources (Sidecars, Store Gateways)</li>
          <li>Deduplicates metrics from redundant sources</li>
          <li>Presents a unified view across all connected Prometheus instances</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Store Gateway</strong></td>
      <td>
        <ul>
          <li>Accesses metrics in object storage</li>
          <li>Serves historical data to the Querier</li>
          <li>Implements intelligent caching for performance optimization</li>
          <li>Indexes object storage data for efficient queries</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Compactor</strong></td>
      <td>
        <ul>
          <li>Applies compression and downsampling to stored metrics</li>
          <li>Optimizes storage usage and query performance</li>
          <li>Handles data retention policies</li>
          <li>Ensures efficient long-term storage of metrics</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Ruler</strong></td>
      <td>
        <ul>
          <li>Evaluates recording and alerting rules</li>
          <li>Distributes rule evaluation across the cluster</li>
          <li>Stores rule results in object storage</li>
          <li>Ensures consistent alerting in distributed environments</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Receiver</strong></td>
      <td>
        <ul>
          <li>Implements the remote write API</li>
          <li>Receives data from Prometheus instances</li>
          <li>Stores received data in object storage</li>
          <li>Enables a push-based approach to data ingestion</li>
        </ul>
      </td>
    </tr>
  </table>
</div>

<h3 id="key-features-and-benefits">Key Features and Benefits</h3>

<h4 id="thanos-advantages">Thanos Advantages</h4>

<h5 id="global-query-view">Global Query View</h5>
<p>Seamless querying across multiple Prometheus instances
Unified view regardless of geographic distribution
Deduplication of replicated metrics
Cross-cluster and cross-region visibility</p>

<h5 id="unlimited-storage-retention">Unlimited Storage Retention</h5>
<ul>
  <li>Integration with object storage (S3, GCS, Azure Blob, etc.)</li>
  <li>Configurable retention periods beyond Prometheus capabilities</li>
  <li>Cost-efficient long-term metrics storage</li>
  <li>Downsampling for optimal storage utilization</li>
</ul>

<h5 id="high-availability">High Availability</h5>
<ul>
  <li>Redundant Prometheus deployments with deduplication</li>
  <li>No single point of failure in the architecture</li>
  <li>Resilience against instance and zone failures</li>
  <li>Continuous operation during upgrades and maintenance</li>
</ul>

<h5 id="prometheus-compatibility">Prometheus Compatibility</h5>
<ul>
  <li>Maintains compatibility with the Prometheus API</li>
  <li>Works with existing Prometheus deployments</li>
  <li>Compatible with Prometheus alerting and recording rules</li>
  <li>Supports PromQL without modifications&lt;</li>
</ul>

<p><br /></p>

<hr />

<h2 id="data-flow-in-prometheus-and-thanos">Data Flow in Prometheus and Thanos</h2>

<p>Understanding the complete data flow from collection to visualization is essential for implementing and troubleshooting a Prometheus and Thanos deployment. This section details how metrics move through the system and how the various components interact to provide a scalable monitoring solution.</p>

<p><br /></p>

<h3 id="metrics-collection-and-storage-workflow">Metrics Collection and Storage Workflow</h3>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    sequenceDiagram
        participant Target as Monitored Target
        participant Prom as Prometheus Server
        participant Sidecar as Thanos Sidecar
        participant Object as Object Storage
        participant Store as Store Gateway
        participant Query as Thanos Query
        participant User as User/Grafana
        
        Target-&gt;&gt;Prom: Expose metrics endpoint
        Prom-&gt;&gt;Target: Scrape metrics
        Prom-&gt;&gt;Prom: Process and store locally
        Prom-&gt;&gt;Sidecar: Expose local storage
        
        Note over Prom,Sidecar: Every 2 hours (configurable)
        Sidecar-&gt;&gt;Object: Upload blocks
        
        Note over Query,User: Real-time queries
        User-&gt;&gt;Query: Execute PromQL query
        Query-&gt;&gt;Prom: Query recent data
        Query-&gt;&gt;Store: Query historical data
        Store-&gt;&gt;Object: Fetch relevant blocks
        Store-&gt;&gt;Query: Return historical data
        Prom-&gt;&gt;Query: Return recent data
        Query-&gt;&gt;Query: Deduplicate and process
        Query-&gt;&gt;User: Display results
  </div>
</div>

<h3 id="component-interaction-details">Component Interaction Details</h3>

<div class="info-box info-box-default-not-check">
  <strong>Detailed Data Flow Process</strong>
  <ol>
    <li><strong>Metrics Collection</strong>
      <ul>
        <li>Prometheus scrapes metrics from monitored targets at configured intervals</li>
        <li>Metrics are processed and stored in the local time series database (TSDB)</li>
        <li>Local storage is organized in 2-hour blocks (configurable)</li>
      </ul>
    </li>
    <li><strong>Data Uploading</strong>
      <ul>
        <li>Thanos Sidecar monitors the Prometheus TSDB directory</li>
        <li>Completed blocks (typically 2 hours of data) are uploaded to object storage</li>
        <li>Blocks include both raw samples and metadata</li>
        <li>Original data remains in Prometheus local storage until its retention period expires</li>
      </ul>
    </li>
    <li><strong>Long-term Storage</strong>
      <ul>
        <li>Object storage acts as the central repository for historical metrics</li>
        <li>Data is organized in a well-defined structure for efficient access</li>
        <li>Thanos Compactor periodically processes the stored blocks</li>
        <li>Compaction and downsampling reduce storage requirements while maintaining data utility</li>
      </ul>
    </li>
    <li><strong>Query Processing</strong>
      <ul>
        <li>Thanos Query receives PromQL queries from users or visualization tools</li>
        <li>Determines which data sources (Prometheus instances, Store Gateways) to query</li>
        <li>Distributes the query to relevant sources in parallel</li>
        <li>Recent data comes directly from Prometheus instances via Sidecars</li>
        <li>Historical data is retrieved from object storage via Store Gateways</li>
        <li>Results are deduplicated, merged, and returned to the user</li>
      </ul>
    </li>
  </ol>
</div>

<p><br /></p>

<h3 id="data-flow-architecture-in-prometheus-and-thanos">Data Flow Architecture in Prometheus and Thanos</h3>

<div style="width: 100%; margin: 40px auto;">
  <div class="mermaid">
    graph TD;
        A[Prometheus] --&gt;|Scrape metrics| B[Local Storage];
        A --&gt;|Real-time query and data push| C[Thanos Sidecar];
        C --&gt;|Query data| D[Thanos Query];
        C --&gt;|Upload blocks| G[Object Storage];
        D --&gt;|Query historical data| E[Thanos Store];
        E --&gt;|Serve historical data| G;
        F[Thanos Compactor] --&gt;|Compact and downsample| G;
        D --&gt;|Return unified results| H[Users/Dashboards];
        
        style A fill:#a5d6a7,stroke:#333,stroke-width:1px
        style B fill:#64b5f6,stroke:#333,stroke-width:1px
        style C fill:#ffcc80,stroke:#333,stroke-width:1px
        style D fill:#ce93d8,stroke:#333,stroke-width:1px
        style E fill:#ef9a9a,stroke:#333,stroke-width:1px
        style F fill:#9fa8da,stroke:#333,stroke-width:1px
        style G fill:#80deea,stroke:#333,stroke-width:1px
        style H fill:#f5f5f5,stroke:#333,stroke-width:1px
  </div>
</div>

<p><br /></p>

<hr />

<h2 id="implementation-considerations">Implementation Considerations</h2>

<div class="info-box info-box-success-not-check">
  <strong>⚠️ Key Deployment Considerations</strong>
  <p>When implementing a Prometheus and Thanos monitoring solution, consider these critical factors:</p>
</div>

<p><br /></p>

<h3 id="prometheus-deployment-strategies">Prometheus Deployment Strategies</h3>

<p><strong>Consider these architectural patterns for Prometheus deployments:</strong></p>

<ul>
  <li><strong>Per-Service Monitoring</strong>: Dedicated Prometheus instances for critical services</li>
  <li><strong>Per-Team Monitoring</strong>: Team-managed instances with relevant scrape targets</li>
  <li><strong>Hierarchical Federation</strong>: Local instances with aggregation at higher levels</li>
  <li><strong>Functional Sharding</strong>: Instances specialized by metric type or purpose</li>
</ul>

<h4 id="key-resource-considerations">Key resource considerations:</h4>

<ul>
  <li><strong>Memory Requirements</strong>: Approximately 1-2 bytes per sample in memory</li>
  <li><strong>Storage Requirements</strong>: Around 1-2 bytes per sample on disk</li>
  <li><strong>CPU Scaling</strong>: Increases with query complexity and scrape target count</li>
  <li><strong>Retention Period</strong>: Local storage typically set to 15 days or less when using Thanos</li>
</ul>

<p><br /></p>

<h3 id="thanos-component-sizing">Thanos Component Sizing</h3>

<p><strong>Resource Guidelines for Thanos Components:</strong></p>

<h4 id="sidecar">Sidecar</h4>
<ul>
  <li><strong>CPU</strong>: 1-2 cores depending on upload frequency</li>
  <li><strong>Memory</strong>: 512MB-1GB base plus ~100MB per concurrent request</li>
  <li><strong>Storage</strong>: Temporary space for block processing</li>
</ul>

<h4 id="query">Query</h4>
<ul>
  <li><strong>CPU</strong>: 2-4 cores, scales with query volume</li>
  <li><strong>Memory</strong>: 1-4GB base plus additional memory for concurrent queries</li>
  <li><strong>Consider horizontal scaling for high-traffic deployments</strong></li>
</ul>

<h4 id="store-gateway">Store Gateway</h4>
<ul>
  <li><strong>CPU</strong>: 2 cores minimum, scales with query volume</li>
  <li><strong>Memory</strong>: 2-8GB depending on index cache size and block count</li>
  <li><strong>Scale horizontally for large object storage datasets</strong></li>
</ul>

<h4 id="compactor">Compactor</h4>
<ul>
  <li><strong>CPU</strong>: 1-2 cores, periodic usage pattern</li>
  <li><strong>Memory</strong>: 8-16GB for large block processing</li>
  <li><strong>Temporary storage</strong>: 3x the size of the largest block</li>
</ul>

<p><br /></p>

<h3 id="object-storage-considerations">Object Storage Considerations</h3>

<p><strong>Object Storage Planning:</strong></p>

<h4 id="provider-selection">Provider Selection</h4>
<ul>
  <li><strong>S3</strong>: AWS S3, MinIO, Ceph Object Gateway</li>
  <li><strong>GCS</strong>: Google Cloud Storage</li>
  <li><strong>Azure</strong>: Azure Blob Storage</li>
  <li><strong>Consider cost, performance, and geographic distribution</strong></li>
</ul>

<h4 id="data-growth-planning">Data Growth Planning</h4>
<ul>
  <li><strong>Raw metrics growth</strong>: ~1-2 bytes per sample</li>
  <li><strong>Example</strong>: 1M active series at 15s scrape interval ≈ 2.5TB per year</li>
  <li><strong>Downsampling can reduce storage by 10-100x for older data</strong></li>
</ul>

<h4 id="access-controls">Access Controls</h4>
<ul>
  <li><strong>Use IAM roles with minimal necessary permissions</strong></li>
  <li><strong>Consider bucket policies to restrict access</strong></li>
  <li><strong>Enable encryption for sensitive metrics</strong></li>
</ul>

<p><br /></p>

<hr />

<h2 id="future-implementation-guide">Future Implementation Guide</h2>

<p>In the upcoming post, we’ll provide a detailed implementation guide for Prometheus and Thanos in Kubernetes environments using Helm charts, covering configuration, deployment, and maintenance best practices.</p>

<p><br /></p>

<h3 id="next-steps">Next Steps</h3>

<p><strong>Topics for the Implementation Guide:</strong></p>

<h4 id="setting-up-prometheus-and-thanos-using-helm-charts">Setting up Prometheus and Thanos using Helm Charts</h4>
<ul>
  <li>Detailed deployment configurations</li>
  <li>Resource requirements and scaling guidelines</li>
  <li>Security best practices</li>
</ul>

<h4 id="configuring-multi-cluster-metric-collection">Configuring Multi-Cluster Metric Collection</h4>
<ul>
  <li>Cross-cluster communication setup</li>
  <li>Network considerations and security</li>
  <li>Unified service discovery</li>
</ul>

<h4 id="implementing-unified-monitoring-across-clusters">Implementing Unified Monitoring Across Clusters</h4>
<ul>
  <li>Global view configuration</li>
  <li>Cross-cluster alerting</li>
  <li>Grafana dashboard setup for unified visualization</li>
</ul>

<h4 id="performance-tuning-and-maintenance">Performance Tuning and Maintenance</h4>
<ul>
  <li>Query optimization techniques</li>
  <li>Resource management strategies</li>
  <li>Backup and disaster recovery planning</li>
</ul>

<p><br /></p>

<hr />

<h2 id="key-points">Key Points</h2>

<div class="info-box info-box-success-not-check">
  <strong>Prometheus and Thanos Summary</strong>
  <ul>
    <li>
      <strong>Prometheus Core Features</strong><br />
      - Pull-based metric collection with service discovery<br />
      - Powerful query language (PromQL) for flexible data analysis<br />
      - Integrated alerting and recording rules<br />
      - Designed for dynamic cloud-native environments
    </li>
    <li>
      <strong>Thanos Extensions</strong><br />
      - Global query view across multiple Prometheus instances<br />
      - Unlimited metric retention with object storage integration<br />
      - High availability through redundant deployment<br />
      - Downsampling for efficient long-term storage
    </li>
    <li>
      <strong>Implementation Considerations</strong><br />
      - Proper resource allocation for each component<br />
      - Strategic deployment across environments<br />
      - Object storage planning for long-term metrics<br />
      - Security and access control implementation
    </li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="references">References</h2>
<ul>
  <li><a href="https://medium.com/@MetricFire/remote-prometheus-monitoring-using-thanos-4e2269000bf0">Remote Prometheus Monitoring Using Thanos</a></li>
  <li><a href="https://prometheus.io/docs/introduction/overview/">Prometheus Documentation</a></li>
  <li><a href="https://thanos.io/tip/thanos/getting-started.md/">Thanos Documentation</a></li>
  <li><a href="https://github.com/prometheus-operator/prometheus-operator">Prometheus Operator for Kubernetes</a></li>
  <li><a href="https://thanos.io/tip/thanos/getting-started.md/#community-thanos-kubernetes-components-and-charts">Thanos Community Guides</a></li>
  <li><a href="https://grafana.com/grafana/dashboards/?dataSource=prometheus">Grafana Dashboards for Prometheus</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/ai/claude-gemini/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767603840/claude-gemini-1_q0lkop.png">
                                    
                                    <h3>Claude 4.5 Sonnet vs Gemini 3 Pro: The Ultimate 2026 AI Model Showdown</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/iac/ansible/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755657938/ansible-1_qtomxt.png">
                                    
                                    <h3>Ansible - Complete Guide to Infrastructure Automation and Galaxy Platform</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/virtualization/cockpit/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755592289/cockpit-1_t5ufcx.png">
                                    
                                    <h3>KVM and Cockpit Complete Virtualization Setup Guide</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="12">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/monitoring/what-is-grafana/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767835662/grafana-1_t2rpqv.png">
                
            </div>
            <h3 class="title">What is Grafana?</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Learn about Prometheus monitoring system and how Thanos extends its capabilities for large-scale deployments&quot;%20https://somaz.blog/category/monitoring/prometheus-thanos/%20via%20&#64;twitter_username&hashtags=prometheus,thanos,monitoring,kubernetes"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/monitoring/prometheus-thanos/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/monitoring/prometheus-thanos/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "What is Prometheus and Thanos?",
            "headline": "A comprehensive guide to Prometheus monitoring and Thanos scalability",
            "description": "Learn about Prometheus monitoring system and how Thanos extends its capabilities for large-scale deployments",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1767948420/prometheus-thanos-2_mbky8a.png",
            "url": "https://somaz.blog/category/monitoring/prometheus-thanos/",
            "articleBody": "



Overview

Let’s explore Prometheus and Thanos, two powerful tools for monitoring and scaling metrics collection in cloud-native environments.



What is Prometheus?

Prometheus is an open-source monitoring and alerting system designed for reliability and scalability in dynamic cloud-native environments. It collects and stores time-series metrics with powerful querying capabilities, enabling real-time monitoring, trend analysis, and alerting for modern infrastructure and applications.



Introduction to Prometheus

Developed in 2012 at SoundCloud and now maintained by the Cloud Native Computing Foundation (CNCF), Prometheus has become the de facto standard for monitoring in Kubernetes environments.

Key design principles:

  Pull-based Architecture: Prometheus actively scrapes metrics from monitored targets
  Time Series Database: Optimized for storing metrics with timestamps
  Dimensional Data Model: Uses metric names and key-value pairs (labels) for efficient querying
  Resource Efficiency: Designed to operate with minimal overhead
  Operational Simplicity: Single binary deployment with no external dependencies



  Prometheus is particularly well-suited for microservices architectures, containerized environments, and dynamic infrastructure where traditional monitoring solutions often struggle.




Core Components and Architecture


  
    graph TD
      A[Monitored Targets] --&amp;gt; |Expose Metrics| B[Prometheus Server]
      B --&amp;gt; |Stores| C[Time Series Database]
      B --&amp;gt; |Evaluates| D[Alert Rules]
      D --&amp;gt; |Sends Alerts| E[Alertmanager]
      E --&amp;gt; |Notifies| F[Notification Channels]
      B --&amp;gt; |Serves| G[PromQL API]
      G --&amp;gt; |Queries| H[Visualization Tools]
      I[Service Discovery] --&amp;gt; |Target Discovery| B
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#f5f5f5,stroke:#333,stroke-width:1px
      style G fill:#ef9a9a,stroke:#333,stroke-width:1px
      style H fill:#f5f5f5,stroke:#333,stroke-width:1px
      style I fill:#9fa8da,stroke:#333,stroke-width:1px
  





  
    
      Component
      Description
    
    
      Prometheus Server
      
        
          The core component that scrapes and stores time series data
          Evaluates alert rules against collected metrics
          Provides a query API for accessing stored data
          Manages service discovery to identify targets
        
      
    
    
      Alertmanager
      
        
          Handles alerts sent by the Prometheus server
          Implements deduplication, grouping, and routing of alerts
          Integrates with various notification channels (email, Slack, PagerDuty, etc.)
          Manages silencing and inhibition of alerts
        
      
    
    
      Pushgateway
      
        
          Allows ephemeral and batch jobs to expose metrics
          Provides a push-based metrics collection mechanism
          Bridges the gap for services that cannot be scraped directly
        
      
    
    
      Exporters
      
        
          Specialized programs that expose metrics from third-party systems
          Common examples: Node Exporter (system metrics), MySQL Exporter, Redis Exporter
          Convert system-specific metrics to Prometheus format
        
      
    
    
      Client Libraries
      
        
          Libraries for instrumenting application code
          Available for various languages (Go, Python, Java, Ruby, etc.)
          Enable custom metric collection directly from applications
        
      
    
  




Key Features and Capabilities


  Prometheus Strengths
  
    Multidimensional Data Model
      
        Time series identified by metric name and key-value pairs (labels)
        Enables flexible filtering, grouping, and aggregation
        Supports high-cardinality metrics with efficient storage
      
    
    PromQL (Prometheus Query Language)
      
        Powerful functional query language specifically designed for time series
        Supports complex mathematical operations and transformations
        Enables sophisticated aggregations and joins across metrics
        Built-in functions for rate calculations, histograms, and trend analysis
      
    
    Service Discovery Integration
      
        Native support for Kubernetes, Consul, AWS, Azure, GCP, and others
        Automatically adapts to changing infrastructure
        Supports both static and dynamic target configuration
      
    
    Alert Management
      
        Declarative alert definitions with PromQL expressions
        Multi-stage alert pipeline with deduplication and grouping
        Silencing and inhibition capabilities for alert management
      
    
  






What is Thanos?

Thanos is an open-source project that extends Prometheus capabilities by adding long-term storage, global query view, and high availability features. It enables a unified monitoring system that can scale across multiple clusters and regions while maintaining compatibility with the Prometheus ecosystem.



Introduction to Thanos


  Addressing Prometheus Limitations
  While Prometheus excels at monitoring individual environments, it faces several limitations in large-scale, distributed deployments:
  
  
    Limited Storage Capacity: Prometheus stores data locally, limiting retention periods
    High Availability Challenges: Single Prometheus instance represents a potential single point of failure
    Data Silos: Multiple Prometheus instances create isolated data that cannot be easily queried together
    Cross-Cluster Visibility: No built-in way to view metrics across multiple clusters
  
  
  Thanos was designed to address these limitations while maintaining full compatibility with the Prometheus ecosystem, enabling organizations to scale their monitoring infrastructure without sacrificing functionality or requiring a complete architecture redesign.




Core Components and Architecture


  
    graph TD
      A[Prometheus + Sidecar] --&amp;gt; |Uploads Blocks| B[Object Storage]
      A --&amp;gt; |Real-time Query| C[Thanos Querier]
      D[Prometheus + Sidecar] --&amp;gt; |Uploads Blocks| B
      D --&amp;gt; |Real-time Query| C
      B --&amp;gt; |Historical Data| E[Store Gateway]
      E --&amp;gt; |Historical Query| C
      C --&amp;gt; |Deduplicated Results| F[Grafana/API Clients]
      B --&amp;gt; G[Compactor]
      G --&amp;gt; |Compacted Blocks| B
      H[Rule] --&amp;gt; |Alert/Recording Rules| C
      
      style A fill:#a5d6a7,stroke:#333,stroke-width:1px
      style B fill:#64b5f6,stroke:#333,stroke-width:1px
      style C fill:#ffcc80,stroke:#333,stroke-width:1px
      style D fill:#a5d6a7,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#f5f5f5,stroke:#333,stroke-width:1px
      style G fill:#ef9a9a,stroke:#333,stroke-width:1px
      style H fill:#9fa8da,stroke:#333,stroke-width:1px
  





  
    
      Component
      Description
    
    
      Sidecar
      
        
          Runs alongside each Prometheus instance
          Uploads metrics data to long-term object storage
          Exposes Prometheus metrics via a common API
          Enables transparent query integration with Thanos Query
        
      
    
    
      Querier
      
        
          Implements the Prometheus API for querying
          Aggregates data from multiple sources (Sidecars, Store Gateways)
          Deduplicates metrics from redundant sources
          Presents a unified view across all connected Prometheus instances
        
      
    
    
      Store Gateway
      
        
          Accesses metrics in object storage
          Serves historical data to the Querier
          Implements intelligent caching for performance optimization
          Indexes object storage data for efficient queries
        
      
    
    
      Compactor
      
        
          Applies compression and downsampling to stored metrics
          Optimizes storage usage and query performance
          Handles data retention policies
          Ensures efficient long-term storage of metrics
        
      
    
    
      Ruler
      
        
          Evaluates recording and alerting rules
          Distributes rule evaluation across the cluster
          Stores rule results in object storage
          Ensures consistent alerting in distributed environments
        
      
    
    
      Receiver
      
        
          Implements the remote write API
          Receives data from Prometheus instances
          Stores received data in object storage
          Enables a push-based approach to data ingestion
        
      
    
  


Key Features and Benefits

Thanos Advantages

Global Query View
Seamless querying across multiple Prometheus instances
Unified view regardless of geographic distribution
Deduplication of replicated metrics
Cross-cluster and cross-region visibility

Unlimited Storage Retention

  Integration with object storage (S3, GCS, Azure Blob, etc.)
  Configurable retention periods beyond Prometheus capabilities
  Cost-efficient long-term metrics storage
  Downsampling for optimal storage utilization


High Availability

  Redundant Prometheus deployments with deduplication
  No single point of failure in the architecture
  Resilience against instance and zone failures
  Continuous operation during upgrades and maintenance


Prometheus Compatibility

  Maintains compatibility with the Prometheus API
  Works with existing Prometheus deployments
  Compatible with Prometheus alerting and recording rules
  Supports PromQL without modifications&amp;lt;






Data Flow in Prometheus and Thanos

Understanding the complete data flow from collection to visualization is essential for implementing and troubleshooting a Prometheus and Thanos deployment. This section details how metrics move through the system and how the various components interact to provide a scalable monitoring solution.



Metrics Collection and Storage Workflow


  
    sequenceDiagram
        participant Target as Monitored Target
        participant Prom as Prometheus Server
        participant Sidecar as Thanos Sidecar
        participant Object as Object Storage
        participant Store as Store Gateway
        participant Query as Thanos Query
        participant User as User/Grafana
        
        Target-&amp;gt;&amp;gt;Prom: Expose metrics endpoint
        Prom-&amp;gt;&amp;gt;Target: Scrape metrics
        Prom-&amp;gt;&amp;gt;Prom: Process and store locally
        Prom-&amp;gt;&amp;gt;Sidecar: Expose local storage
        
        Note over Prom,Sidecar: Every 2 hours (configurable)
        Sidecar-&amp;gt;&amp;gt;Object: Upload blocks
        
        Note over Query,User: Real-time queries
        User-&amp;gt;&amp;gt;Query: Execute PromQL query
        Query-&amp;gt;&amp;gt;Prom: Query recent data
        Query-&amp;gt;&amp;gt;Store: Query historical data
        Store-&amp;gt;&amp;gt;Object: Fetch relevant blocks
        Store-&amp;gt;&amp;gt;Query: Return historical data
        Prom-&amp;gt;&amp;gt;Query: Return recent data
        Query-&amp;gt;&amp;gt;Query: Deduplicate and process
        Query-&amp;gt;&amp;gt;User: Display results
  


Component Interaction Details


  Detailed Data Flow Process
  
    Metrics Collection
      
        Prometheus scrapes metrics from monitored targets at configured intervals
        Metrics are processed and stored in the local time series database (TSDB)
        Local storage is organized in 2-hour blocks (configurable)
      
    
    Data Uploading
      
        Thanos Sidecar monitors the Prometheus TSDB directory
        Completed blocks (typically 2 hours of data) are uploaded to object storage
        Blocks include both raw samples and metadata
        Original data remains in Prometheus local storage until its retention period expires
      
    
    Long-term Storage
      
        Object storage acts as the central repository for historical metrics
        Data is organized in a well-defined structure for efficient access
        Thanos Compactor periodically processes the stored blocks
        Compaction and downsampling reduce storage requirements while maintaining data utility
      
    
    Query Processing
      
        Thanos Query receives PromQL queries from users or visualization tools
        Determines which data sources (Prometheus instances, Store Gateways) to query
        Distributes the query to relevant sources in parallel
        Recent data comes directly from Prometheus instances via Sidecars
        Historical data is retrieved from object storage via Store Gateways
        Results are deduplicated, merged, and returned to the user
      
    
  




Data Flow Architecture in Prometheus and Thanos


  
    graph TD;
        A[Prometheus] --&amp;gt;|Scrape metrics| B[Local Storage];
        A --&amp;gt;|Real-time query and data push| C[Thanos Sidecar];
        C --&amp;gt;|Query data| D[Thanos Query];
        C --&amp;gt;|Upload blocks| G[Object Storage];
        D --&amp;gt;|Query historical data| E[Thanos Store];
        E --&amp;gt;|Serve historical data| G;
        F[Thanos Compactor] --&amp;gt;|Compact and downsample| G;
        D --&amp;gt;|Return unified results| H[Users/Dashboards];
        
        style A fill:#a5d6a7,stroke:#333,stroke-width:1px
        style B fill:#64b5f6,stroke:#333,stroke-width:1px
        style C fill:#ffcc80,stroke:#333,stroke-width:1px
        style D fill:#ce93d8,stroke:#333,stroke-width:1px
        style E fill:#ef9a9a,stroke:#333,stroke-width:1px
        style F fill:#9fa8da,stroke:#333,stroke-width:1px
        style G fill:#80deea,stroke:#333,stroke-width:1px
        style H fill:#f5f5f5,stroke:#333,stroke-width:1px
  






Implementation Considerations


  ⚠️ Key Deployment Considerations
  When implementing a Prometheus and Thanos monitoring solution, consider these critical factors:




Prometheus Deployment Strategies

Consider these architectural patterns for Prometheus deployments:


  Per-Service Monitoring: Dedicated Prometheus instances for critical services
  Per-Team Monitoring: Team-managed instances with relevant scrape targets
  Hierarchical Federation: Local instances with aggregation at higher levels
  Functional Sharding: Instances specialized by metric type or purpose


Key resource considerations:


  Memory Requirements: Approximately 1-2 bytes per sample in memory
  Storage Requirements: Around 1-2 bytes per sample on disk
  CPU Scaling: Increases with query complexity and scrape target count
  Retention Period: Local storage typically set to 15 days or less when using Thanos




Thanos Component Sizing

Resource Guidelines for Thanos Components:

Sidecar

  CPU: 1-2 cores depending on upload frequency
  Memory: 512MB-1GB base plus ~100MB per concurrent request
  Storage: Temporary space for block processing


Query

  CPU: 2-4 cores, scales with query volume
  Memory: 1-4GB base plus additional memory for concurrent queries
  Consider horizontal scaling for high-traffic deployments


Store Gateway

  CPU: 2 cores minimum, scales with query volume
  Memory: 2-8GB depending on index cache size and block count
  Scale horizontally for large object storage datasets


Compactor

  CPU: 1-2 cores, periodic usage pattern
  Memory: 8-16GB for large block processing
  Temporary storage: 3x the size of the largest block




Object Storage Considerations

Object Storage Planning:

Provider Selection

  S3: AWS S3, MinIO, Ceph Object Gateway
  GCS: Google Cloud Storage
  Azure: Azure Blob Storage
  Consider cost, performance, and geographic distribution


Data Growth Planning

  Raw metrics growth: ~1-2 bytes per sample
  Example: 1M active series at 15s scrape interval ≈ 2.5TB per year
  Downsampling can reduce storage by 10-100x for older data


Access Controls

  Use IAM roles with minimal necessary permissions
  Consider bucket policies to restrict access
  Enable encryption for sensitive metrics






Future Implementation Guide

In the upcoming post, we’ll provide a detailed implementation guide for Prometheus and Thanos in Kubernetes environments using Helm charts, covering configuration, deployment, and maintenance best practices.



Next Steps

Topics for the Implementation Guide:

Setting up Prometheus and Thanos using Helm Charts

  Detailed deployment configurations
  Resource requirements and scaling guidelines
  Security best practices


Configuring Multi-Cluster Metric Collection

  Cross-cluster communication setup
  Network considerations and security
  Unified service discovery


Implementing Unified Monitoring Across Clusters

  Global view configuration
  Cross-cluster alerting
  Grafana dashboard setup for unified visualization


Performance Tuning and Maintenance

  Query optimization techniques
  Resource management strategies
  Backup and disaster recovery planning






Key Points


  Prometheus and Thanos Summary
  
    
      Prometheus Core Features
      - Pull-based metric collection with service discovery
      - Powerful query language (PromQL) for flexible data analysis
      - Integrated alerting and recording rules
      - Designed for dynamic cloud-native environments
    
    
      Thanos Extensions
      - Global query view across multiple Prometheus instances
      - Unlimited metric retention with object storage integration
      - High availability through redundant deployment
      - Downsampling for efficient long-term storage
    
    
      Implementation Considerations
      - Proper resource allocation for each component
      - Strategic deployment across environments
      - Object storage planning for long-term metrics
      - Security and access control implementation
    
  






References

  Remote Prometheus Monitoring Using Thanos
  Prometheus Documentation
  Thanos Documentation
  Prometheus Operator for Kubernetes
  Thanos Community Guides
  Grafana Dashboards for Prometheus

",
            "wordcount": "2225",
            "inLanguage": "en",
            "dateCreated": "2025-06-02/",
            "datePublished": "2025-06-02/",
            "dateModified": "2025-06-02/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "MONITORING",
            "articleSection": "MONITORING",
            "keywords": ["prometheus","thanos","monitoring","kubernetes"]
        }
        </script>
    </body>
</html>
