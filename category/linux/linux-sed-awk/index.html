<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>Mastering sed and awk - The Ultimate Guide to Text Processing in Linux | somaz</title>
    <meta name="description" content="Learn how to efficiently process and transform text with sed and awk, two of the most powerful command-line utilities in Linux.">
    
        <meta name="keywords" content="Linux, sed, awk, text, processing">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Mastering sed and awk - The Ultimate Guide to Text Processing in Linux | somaz">
    <meta name="twitter:description" content="Learn how to efficiently process and transform text with sed and awk, two of the most powerful command-line utilities in Linux.">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448291/sed-awk_zwdfw8.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/linux/linux-sed-awk/">
    <meta property="og:title" content="Mastering sed and awk - The Ultimate Guide to Text Processing in Linux | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448291/sed-awk_zwdfw8.png">
    <meta property="og:description" content="Learn how to efficiently process and transform text with sed and awk, two of the most powerful command-line utilities in Linux.">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/linux/linux-sed-awk/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-01-19T12:00:00+00:00">
                            


January 19, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>23 min to read</span>
                </p>
                <h1 class="post-title">Mastering sed and awk - The Ultimate Guide to Text Processing in Linux</h1>
                <p class="post-subtitle">Powerful text manipulation tools for Linux administrators and developers</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448291/sed-awk_zwdfw8.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <h1 id="introduction">Introduction</h1>

<p>sed (stream editor) and awk (named after its creators Aho, Weinberger, and Kernighan) are powerful text processing utilities available in Unix/Linux environments. Both tools excel at manipulating text data but approach the task differently. While sed operates on a line-by-line basis and is designed for simple text transformations, awk treats text as records and fields, making it more suitable for complex data processing tasks.</p>

<p>This comprehensive guide will explore both utilities, their unique capabilities, and how they can be combined to solve complex text processing challenges. Whether you’re a system administrator managing log files, a data analyst processing CSV files, or a developer automating text transformations, mastering sed and awk will significantly enhance your command-line productivity.</p>

<p><br /></p>

<hr />

<h2 id="what-are-sed-and-awk">What are sed and awk?</h2>

<div class="info-box info-box-modern">
sed and awk are powerful text processing utilities in Unix/Linux environments that form the cornerstone of command-line text manipulation. <br /><br />These tools allow you to transform, extract, and report on text data with remarkable flexibility, making them essential for system administrators, data analysts, and developers working in terminal environments.
</div>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">

    graph LR
      A(Text Input) --&gt; B(sed)
      A --&gt; C(awk)
      B --&gt; D(Transformed Text)
      C --&gt; E(Structured Data)
      B --&gt; F(Filtered Content)
      C --&gt; G(Reports &amp; Analysis)

  </div>
</div>

<h3 id="comparing-sed-and-awk">Comparing sed and awk</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;"></th>
      <th style="width: 40%;">sed</th>
      <th style="width: 40%;">awk</th>
    </tr>
    <tr>
      <td><strong>Primary Purpose</strong></td>
      <td>Stream editing and text transformation</td>
      <td>Text pattern scanning and processing</td>
    </tr>
    <tr>
      <td><strong>Designed For</strong></td>
      <td>Simple text substitutions and filtering</td>
      <td>Structured data processing and reporting</td>
    </tr>
    <tr>
      <td><strong>Processing Model</strong></td>
      <td>Line-by-line text processing</td>
      <td>Record-based data processing with fields</td>
    </tr>
    <tr>
      <td><strong>Complexity</strong></td>
      <td>Simpler syntax, focused on editing</td>
      <td>Fuller programming language with variables and functions</td>
    </tr>
    <tr>
      <td><strong>Best For</strong></td>
      <td>Find and replace, text filtering, basic transformations</td>
      <td>Data extraction, report generation, complex transformations</td>
    </tr>
  </table>
</div>

<div class="info-box info-box-default-not-check">
  <strong>Historical Context</strong>
  <p>Both tools emerged from Bell Labs during the development of Unix:</p>
  <ul>
    <li><strong>sed</strong> was created by Lee E. McMahon in 1973 as part of the Unix text processing pipeline.</li>
    <li><strong>awk</strong> was developed in 1977, named after its creators: Alfred Aho, Peter Weinberger, and Brian Kernighan.</li>
  </ul>
  <p>Their enduring popularity for over four decades speaks to their utility and power in command-line environments.</p>
</div>

<p><br /></p>

<hr />

<h2 id="the-sed-command-in-depth">The sed Command in Depth</h2>

<div class="info-box info-box-default">
<strong>sed (Stream Editor)</strong> is a non-interactive text editor that processes text line by line from standard input or files, applying specified transformations and outputting the result to standard output.
</div>

<h3 id="how-sed-works">How sed Works</h3>

<p>sed processes text through the following sequence:</p>

<ol>
  <li><strong>Read</strong>: Read a line from the input stream</li>
  <li><strong>Execute</strong>: Apply all commands to the line (stored in “pattern space”)</li>
  <li><strong>Display</strong>: Print the result (unless suppressed)</li>
  <li><strong>Repeat</strong>: Move to the next line and repeat</li>
</ol>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">

    graph LR
      A(Input Stream) --&gt; B(Read Line)
      B --&gt; C(Apply Commands)
      C --&gt; D(Print Result)
      D --&gt; E(Next Line)
      E --&gt; B
      E --&gt; F(End)

  </div>
</div>

<h3 id="basic-sed-syntax">Basic sed Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sed [options] 'command' file(s)
sed [options] -e 'command1' -e 'command2' file(s)
sed [options] -f script-file file(s)
</code></pre></div></div>

<h3 id="common-sed-commands">Common sed Commands</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 15%;">Command</th>
      <th style="width: 30%;">Description</th>
      <th style="width: 55%;">Example</th>
    </tr>
    <tr>
      <td><code>s/pattern/replacement/</code></td>
      <td>Substitute text matching pattern</td>
      <td><code>sed 's/apple/orange/' file.txt</code></td>
    </tr>
    <tr>
      <td><code>d</code></td>
      <td>Delete matching lines</td>
      <td><code>sed '/pattern/d' file.txt</code></td>
    </tr>
    <tr>
      <td><code>p</code></td>
      <td>Print matching lines</td>
      <td><code>sed -n '/pattern/p' file.txt</code></td>
    </tr>
    <tr>
      <td><code>i\</code></td>
      <td>Insert text before line</td>
      <td><code>sed '2i\New line' file.txt</code></td>
    </tr>
    <tr>
      <td><code>a\</code></td>
      <td>Append text after line</td>
      <td><code>sed '2a\New line' file.txt</code></td>
    </tr>
    <tr>
      <td><code>c\</code></td>
      <td>Change line with new text</td>
      <td><code>sed '2c\New content' file.txt</code></td>
    </tr>
    <tr>
      <td><code>y/set1/set2/</code></td>
      <td>Transliterate characters</td>
      <td><code>sed 'y/abc/ABC/' file.txt</code></td>
    </tr>
    <tr>
      <td><code>q</code></td>
      <td>Quit sed after processing</td>
      <td><code>sed '5q' file.txt</code></td>
    </tr>
    <tr>
      <td><code>r file</code></td>
      <td>Read file and append content</td>
      <td><code>sed '/pattern/r insert.txt' file.txt</code></td>
    </tr>
    <tr>
      <td><code>w file</code></td>
      <td>Write pattern space to file</td>
      <td><code>sed -n '/pattern/w output.txt' file.txt</code></td>
    </tr>
  </table>
</div>

<p><br /></p>

<hr />

<h2 id="essential-sed-examples">Essential sed Examples</h2>

<h3 id="basic-substitution">Basic Substitution</h3>

<p>Replace the first occurrence of a pattern on each line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create example.txt</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; example.txt
Hello World
Hello Somaz
Hello promi
</span><span class="no">EOF

</span><span class="c"># Replace 'Hello' with 'Hi' (first occurrence on each line)</span>
<span class="nb">sed</span> <span class="s1">'s/Hello/Hi/'</span> example.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hi World
Hi Somaz
Hi promi
</code></pre></div></div>

<h3 id="global-substitution">Global Substitution</h3>

<p>Replace all occurrences of a pattern on each line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create example with multiple occurrences</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; multiple.txt
Hello World Hello Again
Hello Somaz Hello Again
</span><span class="no">EOF

</span><span class="c"># Replace all occurrences of 'Hello' with 'Hi'</span>
<span class="nb">sed</span> <span class="s1">'s/Hello/Hi/g'</span> multiple.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hi World Hi Again
Hi Somaz Hi Again
</code></pre></div></div>

<h3 id="in-place-editing">In-place Editing</h3>

<p>Modify files directly rather than printing to standard output:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># First let's check the original file</span>
<span class="nb">cat </span>example.txt
Hello World
Hello Somaz
Hello promi

<span class="c"># Now edit in place</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/Hello/Hi/'</span> example.txt

<span class="c"># Verify the changes</span>
<span class="nb">cat </span>example.txt
Hi World
Hi Somaz
Hi promi
</code></pre></div></div>

<h3 id="creating-backups-during-in-place-editing">Creating Backups During In-place Editing</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create backup with .bak extension</span>
<span class="nb">sed</span> <span class="nt">-i</span>.bak <span class="s1">'s/Hi/Hello/'</span> example.txt

<span class="c"># Original file was changed</span>
<span class="nb">cat </span>example.txt
Hello World
Hello Somaz
Hello promi

<span class="c"># Backup contains the previous version</span>
<span class="nb">cat </span>example.txt.bak
Hi World
Hi Somaz
Hi promi
</code></pre></div></div>

<h3 id="deleting-lines">Deleting Lines</h3>

<p>Remove lines matching a pattern:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a file with numbered lines</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; numbers.txt
Line 1
Line 2
Line 3
Line 4
Line 5
</span><span class="no">EOF

</span><span class="c"># Delete lines containing 'Line 3'</span>
<span class="nb">sed</span> <span class="s1">'/Line 3/d'</span> numbers.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Line 1
Line 2
Line 4
Line 5
</code></pre></div></div>

<h3 id="working-with-line-numbers">Working with Line Numbers</h3>

<p>Process specific lines by number:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Delete line 2</span>
<span class="nb">sed</span> <span class="s1">'2d'</span> numbers.txt
Line 1
Line 3
Line 4
Line 5

<span class="c"># Delete lines 2 through 4</span>
<span class="nb">sed</span> <span class="s1">'2,4d'</span> numbers.txt
Line 1
Line 5

<span class="c"># Delete from line 3 to the end</span>
<span class="nb">sed</span> <span class="s1">'3,$d'</span> numbers.txt
Line 1
Line 2
</code></pre></div></div>

<h3 id="multiple-commands-with--e">Multiple Commands with -e</h3>

<p>Apply several editing commands in sequence:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Replace 'Line' with 'Entry' and remove lines containing '3'</span>
<span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/Line/Entry/g'</span> <span class="nt">-e</span> <span class="s1">'/3/d'</span> numbers.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Entry 1
Entry 2
Entry 4
Entry 5
</code></pre></div></div>

<h3 id="using-address-ranges">Using Address Ranges</h3>

<p>Apply commands only to specific line ranges:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Replace 'Line' with 'Entry' only on lines 2-4</span>
<span class="nb">sed</span> <span class="s1">'2,4s/Line/Entry/'</span> numbers.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Line 1
Entry 2
Entry 3
Entry 4
Line 5
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="advanced-sed-techniques">Advanced sed Techniques</h2>

<h4 id="using-the-hold-buffer">Using the Hold Buffer</h4>

<p>sed has a special “hold buffer” that can store text for later use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create example file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; verse.txt
Roses are red
Violets are blue
Sugar is sweet
And so are you
</span><span class="no">EOF

</span><span class="c"># Reverse the order of lines</span>
<span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'1!G;h;$p'</span> verse.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>And so are you
Sugar is sweet
Violets are blue
Roses are red
</code></pre></div></div>

<p>Explanation:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">1!G</code>: For all lines except the first, get the hold buffer and append it to the pattern space</li>
  <li><code class="language-plaintext highlighter-rouge">h</code>: Copy the pattern space to the hold buffer</li>
  <li><code class="language-plaintext highlighter-rouge">$p</code>: On the last line, print the pattern space</li>
</ul>

<h4 id="extended-regular-expressions-with--e">Extended Regular Expressions with -E</h4>

<p>Use extended regular expressions for more powerful pattern matching:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a file with email addresses</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; emails.txt
contact@example.com
user.name@company.co.jp
test_123@test-server.io
not-an-email
just.another@example.com
</span><span class="no">EOF

</span><span class="c"># Extract valid email addresses using extended regex</span>
<span class="nb">sed</span> <span class="nt">-E</span> <span class="s1">'/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/!d'</span> emails.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>contact@example.com
user.name@company.co.jp
test_123@test-server.io
just.another@example.com
</code></pre></div></div>

<h4 id="multiline-processing">Multiline Processing</h4>

<p>Process text across multiple lines:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create HTML-like file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; simple.html
&lt;header&gt;
  &lt;title&gt;Sample Page&lt;/title&gt;
&lt;/header&gt;
&lt;body&gt;
  &lt;h1&gt;Welcome&lt;/h1&gt;
  &lt;p&gt;This is a sample paragraph.&lt;/p&gt;
&lt;/body&gt;
</span><span class="no">EOF

</span><span class="c"># Extract text between &lt;title&gt; and &lt;/title&gt; tags</span>
<span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'/&lt;title&gt;/,/&lt;\/title&gt;/p'</span> simple.html
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;title&gt;Sample Page&lt;/title&gt;
</code></pre></div></div>

<h4 id="conditional-processing-with-sed">Conditional Processing with sed</h4>

<p>Process lines based on conditions:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Process numbers.txt conditionally</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; values.txt
Name: John, Age: 25
Name: Jane, Age: 17
Name: Bob, Age: 32
Name: Alice, Age: 15
</span><span class="no">EOF

</span><span class="c"># Only show adults (Age &gt;= 18)</span>
<span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'/Age: [1-9]\|Age: 1[0-7]/!p'</span> values.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Name: John, Age: 25
Name: Bob, Age: 32
</code></pre></div></div>

<h4 id="character-translations">Character Translations</h4>

<p>Translate (replace) characters systematically:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a sample file</span>
<span class="nb">echo</span> <span class="s2">"Hello, World! 123"</span> <span class="o">&gt;</span> translate.txt

<span class="c"># Convert all lowercase to uppercase and digits to 'X'</span>
<span class="nb">sed</span> <span class="s1">'y/abcdefghijklmnopqrstuvwxyz0123456789/ABCDEFGHIJKLMNOPQRSTUVWXYZXXXXXXXXXX/'</span> translate.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HELLO, WORLD! XXX
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="practical-sed-use-cases">Practical sed Use Cases</h2>

<h3 id="batch-file-processing">Batch File Processing</h3>

<p>Process multiple files with a single command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create multiple configuration files</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> config
<span class="nb">echo</span> <span class="s2">"server=old-server.com"</span> <span class="o">&gt;</span> config/app1.conf
<span class="nb">echo</span> <span class="s2">"server=old-server.com"</span> <span class="o">&gt;</span> config/app2.conf
<span class="nb">echo</span> <span class="s2">"server=old-server.com"</span> <span class="o">&gt;</span> config/app3.conf

<span class="c"># Update server address in all configuration files</span>
find config/ <span class="nt">-name</span> <span class="s2">"*.conf"</span> <span class="nt">-exec</span> <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/old-server\.com/new-server\.com/g'</span> <span class="o">{}</span> <span class="se">\;</span>

<span class="c"># Verify changes</span>
<span class="nb">cat </span>config/app1.conf
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server=new-server.com
</code></pre></div></div>

<h3 id="log-file-analysis">Log File Analysis</h3>

<p>Extract specific information from log files:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a sample log file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; sample.log
2023-01-01 12:00:01 INFO  Server started
2023-01-01 12:05:32 ERROR Database connection failed
2023-01-01 12:06:15 WARN  Retry attempt 1
2023-01-01 12:06:45 ERROR Login failed for user 'admin'
2023-01-01 12:07:23 INFO  Configuration reloaded
</span><span class="no">EOF

</span><span class="c"># Extract all ERROR messages</span>
<span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'/ERROR/p'</span> sample.log
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2023-01-01 12:05:32 ERROR Database connection failed
2023-01-01 12:06:45 ERROR Login failed for user 'admin'
</code></pre></div></div>

<h3 id="commentuncomment-configuration-lines">Comment/Uncomment Configuration Lines</h3>

<p>Easily comment or uncomment configuration file lines:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a configuration file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; app.conf
# Main settings
port=8080
debug=false
# log_level=debug
max_connections=100
</span><span class="no">EOF

</span><span class="c"># Uncomment the log_level line</span>
<span class="nb">sed</span> <span class="s1">'s/^# log_level/log_level/'</span> app.conf
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Main settings
port=8080
debug=false
log_level=debug
max_connections=100
</code></pre></div></div>

<h3 id="csv-data-processing">CSV Data Processing</h3>

<p>Clean and transform CSV data:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a CSV file with inconsistent formatting</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; data.csv
Name, Age, Location
John Doe,  28,New York
Jane Smith,31 , Boston
"Bob Johnson", 45, "San Francisco"
</span><span class="no">EOF

</span><span class="c"># Clean up formatting (remove extra spaces, standardize quotes)</span>
<span class="nb">sed</span> <span class="nt">-E</span> <span class="s1">'s/[[:space:]]*,[[:space:]]*/,/g; s/"//g'</span> data.csv
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Name,Age,Location
John Doe,28,New York
Jane Smith,31,Boston
Bob Johnson,45,San Francisco
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="the-awk-command-in-depth">The awk Command in Depth</h2>

<div class="info-box info-box-modern">
<strong>awk</strong> is a powerful data processing language designed for extracting and reporting on data. It treats each input line as a record and divides it into fields, making it ideal for structured data processing.
</div>

<h3 id="how-awk-works">How awk Works</h3>

<p>awk processes text through the following sequence:</p>

<ol>
  <li><strong>Begin Phase</strong>: Execute the BEGIN block (if any)</li>
  <li><strong>Main Processing Phase</strong>: For each input line:
    <ul>
      <li>Split the line into fields</li>
      <li>Test against all patterns</li>
      <li>Execute associated actions for matching patterns</li>
    </ul>
  </li>
  <li><strong>End Phase</strong>: Execute the END block (if any)</li>
</ol>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">

    graph TD
      A(BEGIN Block) --&gt; B(Read Input Line)
      B --&gt; C(Split Line into Fields)
      C --&gt; D(Apply Pattern-Action Rules)
      D --&gt; E(Print Output)
      E --&gt; B
      E --&gt; F(END Block)

  </div>
</div>

<h3 id="basic-awk-syntax">Basic awk Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>awk [options] 'pattern { action }' file(s)
awk [options] 'BEGIN { actions } pattern { actions } END { actions }' file(s)
</code></pre></div></div>

<h3 id="understanding-awk-fields">Understanding awk Fields</h3>

<p>awk automatically splits each input line into fields:</p>
<ul>
  <li>By default, fields are separated by whitespace</li>
  <li>Fields are accessed using <code class="language-plaintext highlighter-rouge">$1</code>, <code class="language-plaintext highlighter-rouge">$2</code>, etc.</li>
  <li><code class="language-plaintext highlighter-rouge">$0</code> represents the entire line</li>
  <li>The field separator can be changed with the <code class="language-plaintext highlighter-rouge">-F</code> option</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a sample file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; employees.txt
John Smith IT 75000
Jane Doe HR 65000
Mike Johnson Finance 82000
Sarah Williams IT 78000
</span><span class="no">EOF

</span><span class="c"># Print specific fields</span>
<span class="nb">awk</span> <span class="s1">'{print $1, $2, $4}'</span> employees.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>John Smith 75000
Jane Doe 65000
Mike Johnson 82000
Sarah Williams 78000
</code></pre></div></div>

<h3 id="key-awk-variables">Key awk Variables</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 15%;">Variable</th>
      <th style="width: 35%;">Description</th>
      <th style="width: 50%;">Example</th>
    </tr>
    <tr>
      <td><code>$0</code></td>
      <td>The entire current line</td>
      <td><code>awk '{print $0}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>$1, $2, ...</code></td>
      <td>The 1st, 2nd, etc. field in the current line</td>
      <td><code>awk '{print $1, $3}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>NF</code></td>
      <td>Number of fields in the current line</td>
      <td><code>awk '{print NF}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>NR</code></td>
      <td>Current line/record number</td>
      <td><code>awk '{print NR, $0}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>FS</code></td>
      <td>Field separator (default: whitespace)</td>
      <td><code>awk 'BEGIN {FS=","} {print $1}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>OFS</code></td>
      <td>Output field separator (default: space)</td>
      <td><code>awk 'BEGIN {OFS="|"} {print $1, $2}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>RS</code></td>
      <td>Record separator (default: newline)</td>
      <td><code>awk 'BEGIN {RS=";"} {print $0}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>ORS</code></td>
      <td>Output record separator (default: newline)</td>
      <td><code>awk 'BEGIN {ORS=";\n"} {print $0}' file.txt</code></td>
    </tr>
    <tr>
      <td><code>FILENAME</code></td>
      <td>Current input filename</td>
      <td><code>awk '{print FILENAME, $0}' *.txt</code></td>
    </tr>
  </table>
</div>

<p><br /></p>

<hr />

<h2 id="essential-awk-examples">Essential awk Examples</h2>

<h3 id="basic-field-processing">Basic Field Processing</h3>

<p>Extract specific fields from structured data:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create data.txt with comma-separated values</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; data.csv
John,Smith,35,New York
Jane,Doe,28,San Francisco
Bob,Johnson,42,Chicago
Alice,Williams,31,Boston
</span><span class="no">EOF

</span><span class="c"># Print fields in a different order with a custom separator</span>
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'{print $2 " - " $1 ", Age: " $3}'</span> data.csv
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Smith - John, Age: 35
Doe - Jane, Age: 28
Johnson - Bob, Age: 42
Williams - Alice, Age: 31
</code></pre></div></div>

<h3 id="pattern-matching">Pattern Matching</h3>

<p>Process only lines that match specific patterns:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Only print lines where age &gt; 30</span>
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'$3 &gt; 30 {print $1 " " $2 " is " $3 " years old"}'</span> data.csv
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>John Smith is 35 years old
Bob Johnson is 42 years old
Alice Williams is 31 years old
</code></pre></div></div>

<h3 id="calculating-totals-and-averages">Calculating Totals and Averages</h3>

<p>Perform calculations on numeric data:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Calculate average age</span>
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'{ sum += $3; count++ } END { print "Average age: " sum/count }'</span> data.csv
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Average age: 34
</code></pre></div></div>

<h3 id="using-begin-and-end-blocks">Using BEGIN and END Blocks</h3>

<p>Initialize variables and print summaries:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Format output with headers and totals</span>
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'
BEGIN { print "Name\t\tAge\tCity"; print "--------------------" }
{ printf "%-15s %d\t%s\n", $1 " " $2, $3, $4 }
END { print "--------------------"; print "Total records: " NR }
'</span> data.csv
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Name		Age	City
--------------------
John Smith      35	New York
Jane Doe        28	San Francisco
Bob Johnson     42	Chicago
Alice Williams  31	Boston
--------------------
Total records: 4
</code></pre></div></div>

<h3 id="custom-field-and-record-separators">Custom Field and Record Separators</h3>

<p>Process data with non-standard formats:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a file with custom format</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; weird_format.txt
Name:John;Age:35;City:New York
Name:Jane;Age:28;City:San Francisco
</span><span class="no">EOF

</span><span class="c"># Process with custom record and field separators</span>
<span class="nb">awk</span> <span class="s1">'BEGIN {RS="\n"; FS="[;:]"} {print $2, "is", $4, "years old and lives in", $6}'</span> weird_format.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>John is 35 years old and lives in New York
Jane is 28 years old and lives in San Francisco
</code></pre></div></div>

<h3 id="conditional-logic-in-awk">Conditional Logic in awk</h3>

<p>Implement if-else statements for complex decision making:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create data with mixed values</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; student_scores.txt
John 85 92 78
Mary 95 88 91
Peter 65 70 68
Sarah 90 94 89
</span><span class="no">EOF

</span><span class="c"># Categorize students based on average score</span>
<span class="nb">awk</span> <span class="s1">'{
    avg = ($2 + $3 + $4) / 3;
    if (avg &gt;= 90) {
        grade = "A";
    } else if (avg &gt;= 80) {
        grade = "B";
    } else if (avg &gt;= 70) {
        grade = "C";
    } else {
        grade = "D";
    }
    printf "%s: Average = %.1f, Grade = %s\n", $1, avg, grade;
}'</span> student_scores.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>John: Average = 85.0, Grade = B
Mary: Average = 91.3, Grade = A
Peter: Average = 67.7, Grade = D
Sarah: Average = 91.0, Grade = A
</code></pre></div></div>

<h3 id="arrays-in-awk">Arrays in awk</h3>

<p>Use arrays for more complex data processing:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Count word frequency in a text file</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; sample_text.txt
the quick brown fox jumps over the lazy dog
a quick brown dog runs faster than the quick fox
</span><span class="no">EOF

</span><span class="c"># Count and display word frequency</span>
<span class="nb">awk</span> <span class="s1">'
{
    for (i=1; i&lt;=NF; i++) {
        count[$i]++;
    }
}
END {
    print "Word Frequency:";
    for (word in count) {
        printf "%-10s %d\n", word, count[word];
    }
}'</span> sample_text.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Word Frequency:
quick       2
than        1
runs        1
dog         2
jumps       1
brown       2
lazy        1
over        1
a           1
the         2
fox         2
faster      1
</code></pre></div></div>

<h3 id="built-in-functions">Built-in Functions</h3>

<p>awk includes numerous built-in functions for string and mathematical operations:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create sample data</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; function_test.txt
string1 UPPERCASE 3.14159
string2 lowercase 2.71828
string3 MixedCase 1.61803
</span><span class="no">EOF

</span><span class="c"># Demonstrate built-in functions</span>
<span class="nb">awk</span> <span class="s1">'{
    # String functions
    lower = tolower($2);
    upper = toupper($1);
    str_len = length($3);
    
    # Math functions
    rounded = int($3);
    square_root = sqrt($3);
    
    printf "Original: %s %s %s\n", $1, $2, $3;
    printf "Modified: %s %s (length: %d)\n", upper, lower, str_len;
    printf "Math: rounded = %d, sqrt = %.4f\n\n", rounded, square_root;
}'</span> function_test.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Original: string1 UPPERCASE 3.14159
Modified: STRING1 uppercase (length: 7)
Math: rounded = 3, sqrt = 1.7725

Original: string2 lowercase 2.71828
Modified: STRING2 lowercase (length: 7)
Math: rounded = 2, sqrt = 1.6488

Original: string3 MixedCase 1.61803
Modified: STRING3 mixedcase (length: 7)
Math: rounded = 1, sqrt = 1.2722
</code></pre></div></div>

<h3 id="formatted-output-with-printf">Formatted Output with printf</h3>

<p>Create precisely formatted output with printf:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create data for a simple report</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; sales.txt
North 10500 8500 12000
South 9500 7200 8300
East 12300 10500 11200
West 8200 9200 10100
</span><span class="no">EOF

</span><span class="c"># Generate a formatted sales report</span>
<span class="nb">awk</span> <span class="s1">'
BEGIN {
    printf "%-10s %10s %10s %10s %10s\n", "Region", "Q1", "Q2", "Q3", "Total";
    printf "%-10s %10s %10s %10s %10s\n", "------", "--", "--", "--", "-----";
}
{
    total = $2 + $3 + $4;
    q1_sum += $2;
    q2_sum += $3;
    q3_sum += $4;
    grand_total += total;
    printf "%-10s %10.2f %10.2f %10.2f %10.2f\n", $1, $2, $3, $4, total;
}
END {
    printf "%-10s %10s %10s %10s %10s\n", "------", "--", "--", "--", "-----";
    printf "%-10s %10s %10s %10s %10s\n", "Total", q1_sum, q2_sum, q3_sum, grand_total;
}'</span> sales.txt
</code></pre></div></div>

<p>Output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Region          Q1         Q2         Q3      Total
------          --         --         --      -----
North      10500.00    8500.00   12000.00   31000.00
South       9500.00    7200.00    8300.00   25000.00
East       12300.00   10500.00   11200.00   34000.00
West        8200.00    9200.00   10100.00   27500.00
------          --         --         --      -----
Total      40500.00   35400.00   41600.00  117500.00
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="-combined-usage-of-sed-and-awk">🚄 Combined Usage of sed and awk</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create example.txt</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; example.txt
1, John Doe, 30
2, Jane Smith, 25
3, Emily Davis, 40
</span><span class="no">EOF

</span><span class="c"># Combine sed and awk to process data</span>
<span class="nb">sed</span> <span class="s1">'s/, */,/g'</span> example.txt | <span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'$3 &gt; 30 {print $2}'</span>
Emily Davis
</code></pre></div></div>

<div class="info-box info-box-default">
  <strong>🔍 Understanding sed and awk Commands</strong><br /><br />
  <strong>sed 's/, */,/g' example.txt</strong><br />
  → Replaces comma-space patterns with just commas<br />
  → 's' indicates substitution<br />
  → 'g' flag means global replacement (applies to all occurrences in each line)<br /><br />
  <strong>awk -F, '$3 &gt; 30 {print $2}'</strong><br />
  → Processes the output from sed<br />
  → '-F' sets comma as the field separator<br />
  → '$3 &gt; 30 {print $2}' instructs awk to print the second field when the third field (age) is greater than 30
</div>

<p><br /></p>

<hr />

<h2 id="common-options">Common Options</h2>

<h4 id="sed-options">sed Options:</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">-i</code>: Edit files in place</li>
  <li><code class="language-plaintext highlighter-rouge">-i.bak</code>: Edit files in place but create backup with .bak extension</li>
  <li><code class="language-plaintext highlighter-rouge">-n</code>: Suppress automatic printing of pattern space</li>
  <li><code class="language-plaintext highlighter-rouge">-e</code>: Add the script to the commands to be executed</li>
  <li><code class="language-plaintext highlighter-rouge">-f</code>: Add the contents of script-file to the commands to be executed</li>
  <li><code class="language-plaintext highlighter-rouge">s/pattern/replacement/</code>: Substitute pattern with replacement</li>
  <li><code class="language-plaintext highlighter-rouge">g</code>: Global replacement (all occurrences in each line)</li>
  <li><code class="language-plaintext highlighter-rouge">p</code>: Print the pattern space</li>
  <li><code class="language-plaintext highlighter-rouge">d</code>: Delete pattern space and start next cycle</li>
  <li><code class="language-plaintext highlighter-rouge">w filename</code>: Write pattern space to file</li>
</ul>

<h4 id="awk-options">awk Options:</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">-F</code>: Specify field separator</li>
  <li><code class="language-plaintext highlighter-rouge">-f</code>: Read program from file</li>
  <li><code class="language-plaintext highlighter-rouge">-v var=value</code>: Assign value to variable var</li>
  <li><code class="language-plaintext highlighter-rouge">-W</code>: Set warning level</li>
  <li><code class="language-plaintext highlighter-rouge">$n</code>: Reference nth field</li>
  <li><code class="language-plaintext highlighter-rouge">$0</code>: Reference entire line</li>
  <li><code class="language-plaintext highlighter-rouge">NF</code>: Number of fields in current record</li>
  <li><code class="language-plaintext highlighter-rouge">NR</code>: Current record number</li>
  <li><code class="language-plaintext highlighter-rouge">FS</code>: Input field separator</li>
  <li><code class="language-plaintext highlighter-rouge">OFS</code>: Output field separator</li>
  <li><code class="language-plaintext highlighter-rouge">RS</code>: Input record separator</li>
  <li><code class="language-plaintext highlighter-rouge">ORS</code>: Output record separator</li>
  <li><code class="language-plaintext highlighter-rouge">print</code>: Output specified fields</li>
  <li><code class="language-plaintext highlighter-rouge">printf</code>: Formatted output</li>
  <li><code class="language-plaintext highlighter-rouge">pattern {action}</code>: Perform action when pattern matches</li>
  <li><code class="language-plaintext highlighter-rouge">BEGIN {action}</code>: Execute action before processing any input</li>
  <li><code class="language-plaintext highlighter-rouge">END {action}</code>: Execute action after processing all input</li>
</ul>

<p><br /></p>

<hr />

<h2 id="reference">Reference</h2>
<ul>
  <li><a href="https://wikidocs.net/29643">WikiDocs - sed Command</a></li>
  <li><a href="https://wikidocs.net/33828">WikiDocs - awk Command</a></li>
  <li><a href="https://www.gnu.org/software/sed/manual/sed.html">GNU sed Manual</a></li>
  <li><a href="https://www.gnu.org/software/gawk/manual/gawk.html">The GNU Awk User’s Guide</a></li>
  <li><a href="https://tldp.org/LDP/abs/html/sedawk.html">Linux Documentation Project: Sed by Example</a></li>
  <li><a href="https://github.com/codenameyau/awesome-sed">Awesome Sed: A curated list of sed resources</a></li>
</ul>

<h2 id="sed-and-awk-in-modern-devops-workflows">sed and awk in Modern DevOps Workflows</h2>

<p>In today’s DevOps environments, sed and awk remain invaluable for their ability to quickly transform and analyze configuration files, logs, and deployment artifacts. Here are some modern applications:</p>

<h3 id="infrastructure-as-code-iac">Infrastructure as Code (IaC)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Update environment variables in Terraform configuration</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/environment = "dev"/environment = "prod"/'</span> terraform/<span class="k">*</span>.tf

<span class="c"># Extract and summarize AWS resources from Terraform state</span>
terraform show <span class="nt">-json</span> | jq <span class="nt">-r</span> <span class="s1">'.values.root_module.resources[] | [.type, .name] | @csv'</span> | 
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'{
    gsub(/"/, "", $0);
    resources[$1]++;
}
END {
    print "Resource Type Count";
    print "-----------------";
    for (res in resources) {
        printf "%-30s %d\n", res, resources[res];
    }
}'</span>
</code></pre></div></div>

<h3 id="container-orchestration">Container Orchestration</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Analyze Docker image sizes</span>
docker images <span class="nt">--format</span> <span class="s2">"{{.Repository}},{{.Tag}},{{.Size}}"</span> | 
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'{
    # Convert sizes to MB for comparison
    gsub(/MB/, "", $3);
    gsub(/GB/, "", $3);
    if ($3 ~ /GB/) {
        size = $3 * 1024;
    } else {
        size = $3;
    }
    
    if (size &gt; 500) {
        printf "Large image (%.2f MB): %s:%s\n", size, $1, $2;
    }
}'</span>

<span class="c"># Update Kubernetes manifests</span>
find k8s/ <span class="nt">-name</span> <span class="s2">"*.yaml"</span> <span class="nt">-exec</span> <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/image: myapp:v1/image: myapp:v2/g'</span> <span class="o">{}</span> <span class="se">\;</span>

<span class="c"># Extract resource requests from all pods in a namespace</span>
kubectl get pods <span class="nt">-n</span> production <span class="nt">-o</span> json | 
jq <span class="nt">-r</span> <span class="s1">'.items[] | select(.spec.containers != null) | 
      .metadata.name + "," + 
      (.spec.containers[0].resources.requests.cpu // "none") + "," + 
      (.spec.containers[0].resources.requests.memory // "none")'</span> | 
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'
BEGIN {
    print "Pod,CPU Request,Memory Request";
}
{
    print $1 "," $2 "," $3;
}'</span>
</code></pre></div></div>

<h3 id="gitops-workflows">GitOps Workflows</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Update version numbers across multiple files in Git-controlled project</span>
git ls-files | xargs <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/version: 1.0.0/version: 1.0.1/g'</span>

<span class="c"># Generate changelog from Git commit messages</span>
git log <span class="nt">--pretty</span><span class="o">=</span>format:<span class="s2">"%h,%an,%s"</span> | 
<span class="nb">awk</span> <span class="nt">-F</span>, <span class="s1">'
BEGIN {
    print "# Changelog\n";
    print "| Commit | Author | Description |";
    print "| ------ | ------ | ----------- |";
}
{
    printf "| %s | %s | %s |\n", $1, $2, $3;
}'</span>
</code></pre></div></div>



                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/cs/load-average/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1744340441/load-average_nqzjno.png">
                                    
                                    <h3>Load Average in top Command - What It Really Means</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/openstack/openstack/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1742267532/openstack_t2tmoc.png">
                                    
                                    <h3>What is OpenStack?</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/cs/os-cache-disk/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1744340260/os-cache-disk_jwhgck.png">
                                    
                                    <h3>OS Cache and Disk I/O - MySQL and Redis Performance Analysis</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="23">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/category/linux/linux-chattr-lsattr/" class="post-preview">
        <div class="image">
            
                <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737449198/lsattr-chattr_st2w2w.png">
            
        </div>
        <h3 class="title">Understanding chattr and lsattr - Linux File Attribute Management</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Learn how to efficiently process and transform text with sed and awk, two of the most powerful command-line utilities in Linux.&quot;%20https://somaz.blog/category/linux/linux-sed-awk/%20via%20&#64;twitter_username&hashtags=Linux,sed,awk,text,processing"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/linux/linux-sed-awk/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/linux/linux-sed-awk/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "Mastering sed and awk - The Ultimate Guide to Text Processing in Linux",
            "headline": "Powerful text manipulation tools for Linux administrators and developers",
            "description": "Learn how to efficiently process and transform text with sed and awk, two of the most powerful command-line utilities in Linux.",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737448291/sed-awk_zwdfw8.png",
            "url": "https://somaz.blog/category/linux/linux-sed-awk/",
            "articleBody": "Introduction

sed (stream editor) and awk (named after its creators Aho, Weinberger, and Kernighan) are powerful text processing utilities available in Unix/Linux environments. Both tools excel at manipulating text data but approach the task differently. While sed operates on a line-by-line basis and is designed for simple text transformations, awk treats text as records and fields, making it more suitable for complex data processing tasks.

This comprehensive guide will explore both utilities, their unique capabilities, and how they can be combined to solve complex text processing challenges. Whether you’re a system administrator managing log files, a data analyst processing CSV files, or a developer automating text transformations, mastering sed and awk will significantly enhance your command-line productivity.





What are sed and awk?


sed and awk are powerful text processing utilities in Unix/Linux environments that form the cornerstone of command-line text manipulation. These tools allow you to transform, extract, and report on text data with remarkable flexibility, making them essential for system administrators, data analysts, and developers working in terminal environments.



  

    graph LR
      A(Text Input) --&amp;gt; B(sed)
      A --&amp;gt; C(awk)
      B --&amp;gt; D(Transformed Text)
      C --&amp;gt; E(Structured Data)
      B --&amp;gt; F(Filtered Content)
      C --&amp;gt; G(Reports &amp;amp; Analysis)

  


Comparing sed and awk


  
    
      
      sed
      awk
    
    
      Primary Purpose
      Stream editing and text transformation
      Text pattern scanning and processing
    
    
      Designed For
      Simple text substitutions and filtering
      Structured data processing and reporting
    
    
      Processing Model
      Line-by-line text processing
      Record-based data processing with fields
    
    
      Complexity
      Simpler syntax, focused on editing
      Fuller programming language with variables and functions
    
    
      Best For
      Find and replace, text filtering, basic transformations
      Data extraction, report generation, complex transformations
    
  



  Historical Context
  Both tools emerged from Bell Labs during the development of Unix:
  
    sed was created by Lee E. McMahon in 1973 as part of the Unix text processing pipeline.
    awk was developed in 1977, named after its creators: Alfred Aho, Peter Weinberger, and Brian Kernighan.
  
  Their enduring popularity for over four decades speaks to their utility and power in command-line environments.






The sed Command in Depth


sed (Stream Editor) is a non-interactive text editor that processes text line by line from standard input or files, applying specified transformations and outputting the result to standard output.


How sed Works

sed processes text through the following sequence:


  Read: Read a line from the input stream
  Execute: Apply all commands to the line (stored in “pattern space”)
  Display: Print the result (unless suppressed)
  Repeat: Move to the next line and repeat



  

    graph LR
      A(Input Stream) --&amp;gt; B(Read Line)
      B --&amp;gt; C(Apply Commands)
      C --&amp;gt; D(Print Result)
      D --&amp;gt; E(Next Line)
      E --&amp;gt; B
      E --&amp;gt; F(End)

  


Basic sed Syntax

sed [options] &apos;command&apos; file(s)
sed [options] -e &apos;command1&apos; -e &apos;command2&apos; file(s)
sed [options] -f script-file file(s)


Common sed Commands


  
    
      Command
      Description
      Example
    
    
      s/pattern/replacement/
      Substitute text matching pattern
      sed &apos;s/apple/orange/&apos; file.txt
    
    
      d
      Delete matching lines
      sed &apos;/pattern/d&apos; file.txt
    
    
      p
      Print matching lines
      sed -n &apos;/pattern/p&apos; file.txt
    
    
      i\
      Insert text before line
      sed &apos;2i\New line&apos; file.txt
    
    
      a\
      Append text after line
      sed &apos;2a\New line&apos; file.txt
    
    
      c\
      Change line with new text
      sed &apos;2c\New content&apos; file.txt
    
    
      y/set1/set2/
      Transliterate characters
      sed &apos;y/abc/ABC/&apos; file.txt
    
    
      q
      Quit sed after processing
      sed &apos;5q&apos; file.txt
    
    
      r file
      Read file and append content
      sed &apos;/pattern/r insert.txt&apos; file.txt
    
    
      w file
      Write pattern space to file
      sed -n &apos;/pattern/w output.txt&apos; file.txt
    
  






Essential sed Examples

Basic Substitution

Replace the first occurrence of a pattern on each line:

# Create example.txt
cat &amp;lt;&amp;lt;EOF &amp;gt; example.txt
Hello World
Hello Somaz
Hello promi
EOF

# Replace &apos;Hello&apos; with &apos;Hi&apos; (first occurrence on each line)
sed &apos;s/Hello/Hi/&apos; example.txt


Output:
Hi World
Hi Somaz
Hi promi


Global Substitution

Replace all occurrences of a pattern on each line:

# Create example with multiple occurrences
cat &amp;lt;&amp;lt;EOF &amp;gt; multiple.txt
Hello World Hello Again
Hello Somaz Hello Again
EOF

# Replace all occurrences of &apos;Hello&apos; with &apos;Hi&apos;
sed &apos;s/Hello/Hi/g&apos; multiple.txt


Output:
Hi World Hi Again
Hi Somaz Hi Again


In-place Editing

Modify files directly rather than printing to standard output:

# First let&apos;s check the original file
cat example.txt
Hello World
Hello Somaz
Hello promi

# Now edit in place
sed -i &apos;s/Hello/Hi/&apos; example.txt

# Verify the changes
cat example.txt
Hi World
Hi Somaz
Hi promi


Creating Backups During In-place Editing

# Create backup with .bak extension
sed -i.bak &apos;s/Hi/Hello/&apos; example.txt

# Original file was changed
cat example.txt
Hello World
Hello Somaz
Hello promi

# Backup contains the previous version
cat example.txt.bak
Hi World
Hi Somaz
Hi promi


Deleting Lines

Remove lines matching a pattern:

# Create a file with numbered lines
cat &amp;lt;&amp;lt;EOF &amp;gt; numbers.txt
Line 1
Line 2
Line 3
Line 4
Line 5
EOF

# Delete lines containing &apos;Line 3&apos;
sed &apos;/Line 3/d&apos; numbers.txt


Output:
Line 1
Line 2
Line 4
Line 5


Working with Line Numbers

Process specific lines by number:

# Delete line 2
sed &apos;2d&apos; numbers.txt
Line 1
Line 3
Line 4
Line 5

# Delete lines 2 through 4
sed &apos;2,4d&apos; numbers.txt
Line 1
Line 5

# Delete from line 3 to the end
sed &apos;3,$d&apos; numbers.txt
Line 1
Line 2


Multiple Commands with -e

Apply several editing commands in sequence:

# Replace &apos;Line&apos; with &apos;Entry&apos; and remove lines containing &apos;3&apos;
sed -e &apos;s/Line/Entry/g&apos; -e &apos;/3/d&apos; numbers.txt


Output:
Entry 1
Entry 2
Entry 4
Entry 5


Using Address Ranges

Apply commands only to specific line ranges:

# Replace &apos;Line&apos; with &apos;Entry&apos; only on lines 2-4
sed &apos;2,4s/Line/Entry/&apos; numbers.txt


Output:
Line 1
Entry 2
Entry 3
Entry 4
Line 5






Advanced sed Techniques

Using the Hold Buffer

sed has a special “hold buffer” that can store text for later use:

# Create example file
cat &amp;lt;&amp;lt;EOF &amp;gt; verse.txt
Roses are red
Violets are blue
Sugar is sweet
And so are you
EOF

# Reverse the order of lines
sed -n &apos;1!G;h;$p&apos; verse.txt


Output:
And so are you
Sugar is sweet
Violets are blue
Roses are red


Explanation:

  1!G: For all lines except the first, get the hold buffer and append it to the pattern space
  h: Copy the pattern space to the hold buffer
  $p: On the last line, print the pattern space


Extended Regular Expressions with -E

Use extended regular expressions for more powerful pattern matching:

# Create a file with email addresses
cat &amp;lt;&amp;lt;EOF &amp;gt; emails.txt
contact@example.com
user.name@company.co.jp
test_123@test-server.io
not-an-email
just.another@example.com
EOF

# Extract valid email addresses using extended regex
sed -E &apos;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/!d&apos; emails.txt


Output:
contact@example.com
user.name@company.co.jp
test_123@test-server.io
just.another@example.com


Multiline Processing

Process text across multiple lines:

# Create HTML-like file
cat &amp;lt;&amp;lt;EOF &amp;gt; simple.html
&amp;lt;header&amp;gt;
  &amp;lt;title&amp;gt;Sample Page&amp;lt;/title&amp;gt;
&amp;lt;/header&amp;gt;
&amp;lt;body&amp;gt;
  &amp;lt;h1&amp;gt;Welcome&amp;lt;/h1&amp;gt;
  &amp;lt;p&amp;gt;This is a sample paragraph.&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
EOF

# Extract text between &amp;lt;title&amp;gt; and &amp;lt;/title&amp;gt; tags
sed -n &apos;/&amp;lt;title&amp;gt;/,/&amp;lt;\/title&amp;gt;/p&apos; simple.html


Output:
  &amp;lt;title&amp;gt;Sample Page&amp;lt;/title&amp;gt;


Conditional Processing with sed

Process lines based on conditions:

# Process numbers.txt conditionally
cat &amp;lt;&amp;lt;EOF &amp;gt; values.txt
Name: John, Age: 25
Name: Jane, Age: 17
Name: Bob, Age: 32
Name: Alice, Age: 15
EOF

# Only show adults (Age &amp;gt;= 18)
sed -n &apos;/Age: [1-9]\|Age: 1[0-7]/!p&apos; values.txt


Output:
Name: John, Age: 25
Name: Bob, Age: 32


Character Translations

Translate (replace) characters systematically:

# Create a sample file
echo &quot;Hello, World! 123&quot; &amp;gt; translate.txt

# Convert all lowercase to uppercase and digits to &apos;X&apos;
sed &apos;y/abcdefghijklmnopqrstuvwxyz0123456789/ABCDEFGHIJKLMNOPQRSTUVWXYZXXXXXXXXXX/&apos; translate.txt


Output:
HELLO, WORLD! XXX






Practical sed Use Cases

Batch File Processing

Process multiple files with a single command:

# Create multiple configuration files
mkdir -p config
echo &quot;server=old-server.com&quot; &amp;gt; config/app1.conf
echo &quot;server=old-server.com&quot; &amp;gt; config/app2.conf
echo &quot;server=old-server.com&quot; &amp;gt; config/app3.conf

# Update server address in all configuration files
find config/ -name &quot;*.conf&quot; -exec sed -i &apos;s/old-server\.com/new-server\.com/g&apos; {} \;

# Verify changes
cat config/app1.conf


Output:
server=new-server.com


Log File Analysis

Extract specific information from log files:

# Create a sample log file
cat &amp;lt;&amp;lt;EOF &amp;gt; sample.log
2023-01-01 12:00:01 INFO  Server started
2023-01-01 12:05:32 ERROR Database connection failed
2023-01-01 12:06:15 WARN  Retry attempt 1
2023-01-01 12:06:45 ERROR Login failed for user &apos;admin&apos;
2023-01-01 12:07:23 INFO  Configuration reloaded
EOF

# Extract all ERROR messages
sed -n &apos;/ERROR/p&apos; sample.log


Output:
2023-01-01 12:05:32 ERROR Database connection failed
2023-01-01 12:06:45 ERROR Login failed for user &apos;admin&apos;


Comment/Uncomment Configuration Lines

Easily comment or uncomment configuration file lines:

# Create a configuration file
cat &amp;lt;&amp;lt;EOF &amp;gt; app.conf
# Main settings
port=8080
debug=false
# log_level=debug
max_connections=100
EOF

# Uncomment the log_level line
sed &apos;s/^# log_level/log_level/&apos; app.conf


Output:
# Main settings
port=8080
debug=false
log_level=debug
max_connections=100


CSV Data Processing

Clean and transform CSV data:

# Create a CSV file with inconsistent formatting
cat &amp;lt;&amp;lt;EOF &amp;gt; data.csv
Name, Age, Location
John Doe,  28,New York
Jane Smith,31 , Boston
&quot;Bob Johnson&quot;, 45, &quot;San Francisco&quot;
EOF

# Clean up formatting (remove extra spaces, standardize quotes)
sed -E &apos;s/[[:space:]]*,[[:space:]]*/,/g; s/&quot;//g&apos; data.csv


Output:
Name,Age,Location
John Doe,28,New York
Jane Smith,31,Boston
Bob Johnson,45,San Francisco






The awk Command in Depth


awk is a powerful data processing language designed for extracting and reporting on data. It treats each input line as a record and divides it into fields, making it ideal for structured data processing.


How awk Works

awk processes text through the following sequence:


  Begin Phase: Execute the BEGIN block (if any)
  Main Processing Phase: For each input line:
    
      Split the line into fields
      Test against all patterns
      Execute associated actions for matching patterns
    
  
  End Phase: Execute the END block (if any)



  

    graph TD
      A(BEGIN Block) --&amp;gt; B(Read Input Line)
      B --&amp;gt; C(Split Line into Fields)
      C --&amp;gt; D(Apply Pattern-Action Rules)
      D --&amp;gt; E(Print Output)
      E --&amp;gt; B
      E --&amp;gt; F(END Block)

  


Basic awk Syntax

awk [options] &apos;pattern { action }&apos; file(s)
awk [options] &apos;BEGIN { actions } pattern { actions } END { actions }&apos; file(s)


Understanding awk Fields

awk automatically splits each input line into fields:

  By default, fields are separated by whitespace
  Fields are accessed using $1, $2, etc.
  $0 represents the entire line
  The field separator can be changed with the -F option


# Create a sample file
cat &amp;lt;&amp;lt;EOF &amp;gt; employees.txt
John Smith IT 75000
Jane Doe HR 65000
Mike Johnson Finance 82000
Sarah Williams IT 78000
EOF

# Print specific fields
awk &apos;{print $1, $2, $4}&apos; employees.txt


Output:
John Smith 75000
Jane Doe 65000
Mike Johnson 82000
Sarah Williams 78000


Key awk Variables


  
    
      Variable
      Description
      Example
    
    
      $0
      The entire current line
      awk &apos;{print $0}&apos; file.txt
    
    
      $1, $2, ...
      The 1st, 2nd, etc. field in the current line
      awk &apos;{print $1, $3}&apos; file.txt
    
    
      NF
      Number of fields in the current line
      awk &apos;{print NF}&apos; file.txt
    
    
      NR
      Current line/record number
      awk &apos;{print NR, $0}&apos; file.txt
    
    
      FS
      Field separator (default: whitespace)
      awk &apos;BEGIN {FS=&quot;,&quot;} {print $1}&apos; file.txt
    
    
      OFS
      Output field separator (default: space)
      awk &apos;BEGIN {OFS=&quot;|&quot;} {print $1, $2}&apos; file.txt
    
    
      RS
      Record separator (default: newline)
      awk &apos;BEGIN {RS=&quot;;&quot;} {print $0}&apos; file.txt
    
    
      ORS
      Output record separator (default: newline)
      awk &apos;BEGIN {ORS=&quot;;\n&quot;} {print $0}&apos; file.txt
    
    
      FILENAME
      Current input filename
      awk &apos;{print FILENAME, $0}&apos; *.txt
    
  






Essential awk Examples

Basic Field Processing

Extract specific fields from structured data:

# Create data.txt with comma-separated values
cat &amp;lt;&amp;lt;EOF &amp;gt; data.csv
John,Smith,35,New York
Jane,Doe,28,San Francisco
Bob,Johnson,42,Chicago
Alice,Williams,31,Boston
EOF

# Print fields in a different order with a custom separator
awk -F, &apos;{print $2 &quot; - &quot; $1 &quot;, Age: &quot; $3}&apos; data.csv


Output:
Smith - John, Age: 35
Doe - Jane, Age: 28
Johnson - Bob, Age: 42
Williams - Alice, Age: 31


Pattern Matching

Process only lines that match specific patterns:

# Only print lines where age &amp;gt; 30
awk -F, &apos;$3 &amp;gt; 30 {print $1 &quot; &quot; $2 &quot; is &quot; $3 &quot; years old&quot;}&apos; data.csv


Output:
John Smith is 35 years old
Bob Johnson is 42 years old
Alice Williams is 31 years old


Calculating Totals and Averages

Perform calculations on numeric data:

# Calculate average age
awk -F, &apos;{ sum += $3; count++ } END { print &quot;Average age: &quot; sum/count }&apos; data.csv


Output:
Average age: 34


Using BEGIN and END Blocks

Initialize variables and print summaries:

# Format output with headers and totals
awk -F, &apos;
BEGIN { print &quot;Name\t\tAge\tCity&quot;; print &quot;--------------------&quot; }
{ printf &quot;%-15s %d\t%s\n&quot;, $1 &quot; &quot; $2, $3, $4 }
END { print &quot;--------------------&quot;; print &quot;Total records: &quot; NR }
&apos; data.csv


Output:
Name		Age	City
--------------------
John Smith      35	New York
Jane Doe        28	San Francisco
Bob Johnson     42	Chicago
Alice Williams  31	Boston
--------------------
Total records: 4


Custom Field and Record Separators

Process data with non-standard formats:

# Create a file with custom format
cat &amp;lt;&amp;lt;EOF &amp;gt; weird_format.txt
Name:John;Age:35;City:New York
Name:Jane;Age:28;City:San Francisco
EOF

# Process with custom record and field separators
awk &apos;BEGIN {RS=&quot;\n&quot;; FS=&quot;[;:]&quot;} {print $2, &quot;is&quot;, $4, &quot;years old and lives in&quot;, $6}&apos; weird_format.txt


Output:
John is 35 years old and lives in New York
Jane is 28 years old and lives in San Francisco


Conditional Logic in awk

Implement if-else statements for complex decision making:

# Create data with mixed values
cat &amp;lt;&amp;lt;EOF &amp;gt; student_scores.txt
John 85 92 78
Mary 95 88 91
Peter 65 70 68
Sarah 90 94 89
EOF

# Categorize students based on average score
awk &apos;{
    avg = ($2 + $3 + $4) / 3;
    if (avg &amp;gt;= 90) {
        grade = &quot;A&quot;;
    } else if (avg &amp;gt;= 80) {
        grade = &quot;B&quot;;
    } else if (avg &amp;gt;= 70) {
        grade = &quot;C&quot;;
    } else {
        grade = &quot;D&quot;;
    }
    printf &quot;%s: Average = %.1f, Grade = %s\n&quot;, $1, avg, grade;
}&apos; student_scores.txt


Output:
John: Average = 85.0, Grade = B
Mary: Average = 91.3, Grade = A
Peter: Average = 67.7, Grade = D
Sarah: Average = 91.0, Grade = A


Arrays in awk

Use arrays for more complex data processing:

# Count word frequency in a text file
cat &amp;lt;&amp;lt;EOF &amp;gt; sample_text.txt
the quick brown fox jumps over the lazy dog
a quick brown dog runs faster than the quick fox
EOF

# Count and display word frequency
awk &apos;
{
    for (i=1; i&amp;lt;=NF; i++) {
        count[$i]++;
    }
}
END {
    print &quot;Word Frequency:&quot;;
    for (word in count) {
        printf &quot;%-10s %d\n&quot;, word, count[word];
    }
}&apos; sample_text.txt


Output:
Word Frequency:
quick       2
than        1
runs        1
dog         2
jumps       1
brown       2
lazy        1
over        1
a           1
the         2
fox         2
faster      1


Built-in Functions

awk includes numerous built-in functions for string and mathematical operations:

# Create sample data
cat &amp;lt;&amp;lt;EOF &amp;gt; function_test.txt
string1 UPPERCASE 3.14159
string2 lowercase 2.71828
string3 MixedCase 1.61803
EOF

# Demonstrate built-in functions
awk &apos;{
    # String functions
    lower = tolower($2);
    upper = toupper($1);
    str_len = length($3);
    
    # Math functions
    rounded = int($3);
    square_root = sqrt($3);
    
    printf &quot;Original: %s %s %s\n&quot;, $1, $2, $3;
    printf &quot;Modified: %s %s (length: %d)\n&quot;, upper, lower, str_len;
    printf &quot;Math: rounded = %d, sqrt = %.4f\n\n&quot;, rounded, square_root;
}&apos; function_test.txt


Output:
Original: string1 UPPERCASE 3.14159
Modified: STRING1 uppercase (length: 7)
Math: rounded = 3, sqrt = 1.7725

Original: string2 lowercase 2.71828
Modified: STRING2 lowercase (length: 7)
Math: rounded = 2, sqrt = 1.6488

Original: string3 MixedCase 1.61803
Modified: STRING3 mixedcase (length: 7)
Math: rounded = 1, sqrt = 1.2722


Formatted Output with printf

Create precisely formatted output with printf:

# Create data for a simple report
cat &amp;lt;&amp;lt;EOF &amp;gt; sales.txt
North 10500 8500 12000
South 9500 7200 8300
East 12300 10500 11200
West 8200 9200 10100
EOF

# Generate a formatted sales report
awk &apos;
BEGIN {
    printf &quot;%-10s %10s %10s %10s %10s\n&quot;, &quot;Region&quot;, &quot;Q1&quot;, &quot;Q2&quot;, &quot;Q3&quot;, &quot;Total&quot;;
    printf &quot;%-10s %10s %10s %10s %10s\n&quot;, &quot;------&quot;, &quot;--&quot;, &quot;--&quot;, &quot;--&quot;, &quot;-----&quot;;
}
{
    total = $2 + $3 + $4;
    q1_sum += $2;
    q2_sum += $3;
    q3_sum += $4;
    grand_total += total;
    printf &quot;%-10s %10.2f %10.2f %10.2f %10.2f\n&quot;, $1, $2, $3, $4, total;
}
END {
    printf &quot;%-10s %10s %10s %10s %10s\n&quot;, &quot;------&quot;, &quot;--&quot;, &quot;--&quot;, &quot;--&quot;, &quot;-----&quot;;
    printf &quot;%-10s %10s %10s %10s %10s\n&quot;, &quot;Total&quot;, q1_sum, q2_sum, q3_sum, grand_total;
}&apos; sales.txt


Output:
Region          Q1         Q2         Q3      Total
------          --         --         --      -----
North      10500.00    8500.00   12000.00   31000.00
South       9500.00    7200.00    8300.00   25000.00
East       12300.00   10500.00   11200.00   34000.00
West        8200.00    9200.00   10100.00   27500.00
------          --         --         --      -----
Total      40500.00   35400.00   41600.00  117500.00






🚄 Combined Usage of sed and awk

# Create example.txt
cat &amp;lt;&amp;lt;EOF &amp;gt; example.txt
1, John Doe, 30
2, Jane Smith, 25
3, Emily Davis, 40
EOF

# Combine sed and awk to process data
sed &apos;s/, */,/g&apos; example.txt | awk -F, &apos;$3 &amp;gt; 30 {print $2}&apos;
Emily Davis



  🔍 Understanding sed and awk Commands
  sed &apos;s/, */,/g&apos; example.txt
  → Replaces comma-space patterns with just commas
  → &apos;s&apos; indicates substitution
  → &apos;g&apos; flag means global replacement (applies to all occurrences in each line)
  awk -F, &apos;$3 &amp;gt; 30 {print $2}&apos;
  → Processes the output from sed
  → &apos;-F&apos; sets comma as the field separator
  → &apos;$3 &amp;gt; 30 {print $2}&apos; instructs awk to print the second field when the third field (age) is greater than 30






Common Options

sed Options:

  -i: Edit files in place
  -i.bak: Edit files in place but create backup with .bak extension
  -n: Suppress automatic printing of pattern space
  -e: Add the script to the commands to be executed
  -f: Add the contents of script-file to the commands to be executed
  s/pattern/replacement/: Substitute pattern with replacement
  g: Global replacement (all occurrences in each line)
  p: Print the pattern space
  d: Delete pattern space and start next cycle
  w filename: Write pattern space to file


awk Options:

  -F: Specify field separator
  -f: Read program from file
  -v var=value: Assign value to variable var
  -W: Set warning level
  $n: Reference nth field
  $0: Reference entire line
  NF: Number of fields in current record
  NR: Current record number
  FS: Input field separator
  OFS: Output field separator
  RS: Input record separator
  ORS: Output record separator
  print: Output specified fields
  printf: Formatted output
  pattern {action}: Perform action when pattern matches
  BEGIN {action}: Execute action before processing any input
  END {action}: Execute action after processing all input






Reference

  WikiDocs - sed Command
  WikiDocs - awk Command
  GNU sed Manual
  The GNU Awk User’s Guide
  Linux Documentation Project: Sed by Example
  Awesome Sed: A curated list of sed resources


sed and awk in Modern DevOps Workflows

In today’s DevOps environments, sed and awk remain invaluable for their ability to quickly transform and analyze configuration files, logs, and deployment artifacts. Here are some modern applications:

Infrastructure as Code (IaC)

# Update environment variables in Terraform configuration
sed -i &apos;s/environment = &quot;dev&quot;/environment = &quot;prod&quot;/&apos; terraform/*.tf

# Extract and summarize AWS resources from Terraform state
terraform show -json | jq -r &apos;.values.root_module.resources[] | [.type, .name] | @csv&apos; | 
awk -F, &apos;{
    gsub(/&quot;/, &quot;&quot;, $0);
    resources[$1]++;
}
END {
    print &quot;Resource Type Count&quot;;
    print &quot;-----------------&quot;;
    for (res in resources) {
        printf &quot;%-30s %d\n&quot;, res, resources[res];
    }
}&apos;


Container Orchestration

# Analyze Docker image sizes
docker images --format &quot;{{.Repository}},{{.Tag}},{{.Size}}&quot; | 
awk -F, &apos;{
    # Convert sizes to MB for comparison
    gsub(/MB/, &quot;&quot;, $3);
    gsub(/GB/, &quot;&quot;, $3);
    if ($3 ~ /GB/) {
        size = $3 * 1024;
    } else {
        size = $3;
    }
    
    if (size &amp;gt; 500) {
        printf &quot;Large image (%.2f MB): %s:%s\n&quot;, size, $1, $2;
    }
}&apos;

# Update Kubernetes manifests
find k8s/ -name &quot;*.yaml&quot; -exec sed -i &apos;s/image: myapp:v1/image: myapp:v2/g&apos; {} \;

# Extract resource requests from all pods in a namespace
kubectl get pods -n production -o json | 
jq -r &apos;.items[] | select(.spec.containers != null) | 
      .metadata.name + &quot;,&quot; + 
      (.spec.containers[0].resources.requests.cpu // &quot;none&quot;) + &quot;,&quot; + 
      (.spec.containers[0].resources.requests.memory // &quot;none&quot;)&apos; | 
awk -F, &apos;
BEGIN {
    print &quot;Pod,CPU Request,Memory Request&quot;;
}
{
    print $1 &quot;,&quot; $2 &quot;,&quot; $3;
}&apos;


GitOps Workflows

# Update version numbers across multiple files in Git-controlled project
git ls-files | xargs sed -i &apos;s/version: 1.0.0/version: 1.0.1/g&apos;

# Generate changelog from Git commit messages
git log --pretty=format:&quot;%h,%an,%s&quot; | 
awk -F, &apos;
BEGIN {
    print &quot;# Changelog\n&quot;;
    print &quot;| Commit | Author | Description |&quot;;
    print &quot;| ------ | ------ | ----------- |&quot;;
}
{
    printf &quot;| %s | %s | %s |\n&quot;, $1, $2, $3;
}&apos;


",
            "wordcount": "4163",
            "inLanguage": "en",
            "dateCreated": "2025-01-19/",
            "datePublished": "2025-01-19/",
            "dateModified": "2025-01-19/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "LINUX",
            "articleSection": "LINUX",
            "keywords": ["Linux","sed","awk","text","processing"]
        }
        </script>
    </body>
</html>
