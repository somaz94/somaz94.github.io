<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>Understanding the Linux Kernel - Architecture, Functionality, and Internals | somaz</title>
    <meta name="description" content="Learn about the Linux Kernel, its components, and how it manages system resources">
    
        <meta name="keywords" content="linux, kernel, operating-system, system-architecture, resource-management, device-drivers">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Understanding the Linux Kernel - Architecture, Functionality, and Internals | somaz">
    <meta name="twitter:description" content="Learn about the Linux Kernel, its components, and how it manages system resources">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448912/linux-kernel_r1s4fe.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/linux/linux-kernel/">
    <meta property="og:title" content="Understanding the Linux Kernel - Architecture, Functionality, and Internals | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448912/linux-kernel_r1s4fe.png">
    <meta property="og:description" content="Learn about the Linux Kernel, its components, and how it manages system resources">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/linux/linux-kernel/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-01-20T09:00:00+00:00">
                            


January 20, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>30 min to read</span>
                </p>
                <h1 class="post-title">Understanding the Linux Kernel - Architecture, Functionality, and Internals</h1>
                <p class="post-subtitle">A comprehensive guide to the Linux Kernel architecture and functionality</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737448912/linux-kernel_r1s4fe.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="what-is-the-linux-kernel">What is the Linux Kernel?</h2>

<div class="info-box info-box-modern">
The Linux Kernel is the fundamental core of the Linux operating system - a sophisticated software layer that serves as the critical bridge between hardware components and user applications. <br /><br />It manages system resources, provides essential services, and enables applications to function while abstracting the complexities of hardware interaction.
</div>

<h3 id="historical-context">Historical Context</h3>

<div class="info-box info-box-default-not-check">
  <strong>The Birth of Linux</strong>
  <p>The Linux kernel was first created by Linus Torvalds in 1991 while he was a computer science student at the University of Helsinki. What began as a personal project to create a free alternative to the MINIX operating system has evolved into one of the most significant software projects in computing history.</p>
  
  <p>Key milestones in kernel development:</p>
  <ul>
    <li><strong>1991:</strong> Version 0.01 - Initial release (approximately 10,000 lines of code)</li>
    <li><strong>1994:</strong> Version 1.0 - First stable release</li>
    <li><strong>1996:</strong> Version 2.0 - Added support for multiple architectures</li>
    <li><strong>2011:</strong> Version 3.0 - Primarily a numbering change</li>
    <li><strong>2015:</strong> Version 4.0 - Introduced live patching infrastructure</li>
    <li><strong>2019:</strong> Version 5.0 - Improved support for AMD FreeSync, Raspberry Pi</li>
    <li><strong>2023:</strong> Version 6.0 - Enhanced security, performance improvements</li>
  </ul>
  
  <p>Today's Linux kernel exceeds 30 million lines of code with contributions from thousands of developers worldwide, making it one of the largest collaborative software projects ever created.</p>
</div>

<h3 id="kernel-architecture-overview">Kernel Architecture Overview</h3>

<p>The Linux kernel utilizes a monolithic design with modular capabilities, combining the performance advantages of monolithic kernels with the flexibility of modular systems.</p>

<div style="width: 100%; margin: 25px auto;">
  <div class="mermaid">
    graph TD
      A[Applications] --&gt; B[System Libraries]
      B --&gt; C[System Call Interface]
      
      subgraph "Kernel Space"
        C --&gt; D[Process Management]
        C --&gt; E[Memory Management]
        C --&gt; F[File Systems]
        C --&gt; G[Device Drivers]
        C --&gt; H[Network Stack]
        
        D --- I[Virtual File System]
        E --- I
        F --- I
        
        I --- J[Architecture-Dependent Code]
        G --- J
        H --- J
        
        J --- K[Hardware]
      end
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#f5f5f5,stroke:#333,stroke-width:1px
      style C fill:#a5d6a7,stroke:#333,stroke-width:1px
      style D fill:#64b5f6,stroke:#333,stroke-width:1px
      style E fill:#ffcc80,stroke:#333,stroke-width:1px
      style F fill:#9fa8da,stroke:#333,stroke-width:1px
      style G fill:#ce93d8,stroke:#333,stroke-width:1px
      style H fill:#80deea,stroke:#333,stroke-width:1px
      style I fill:#ef9a9a,stroke:#333,stroke-width:1px
      style J fill:#fff59d,stroke:#333,stroke-width:1px
      style K fill:#f5f5f5,stroke:#333,stroke-width:1px
  </div>
</div>

<h3 id="monolithic-vs-microkernel-design">Monolithic vs. Microkernel Design</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Characteristic</th>
      <th style="width: 40%;">Monolithic Kernel (Linux)</th>
      <th style="width: 40%;">Microkernel</th>
    </tr>
    <tr>
      <td><strong>Architecture</strong></td>
      <td>Single large binary with all core services in kernel space</td>
      <td>Minimal kernel with services in user space</td>
    </tr>
    <tr>
      <td><strong>Performance</strong></td>
      <td>Higher performance due to direct function calls within the kernel</td>
      <td>Lower performance due to IPC (Inter-Process Communication) overhead</td>
    </tr>
    <tr>
      <td><strong>Memory Footprint</strong></td>
      <td>Larger memory footprint in kernel space</td>
      <td>Smaller kernel but with overall similar total memory usage</td>
    </tr>
    <tr>
      <td><strong>Modularity</strong></td>
      <td>Loadable kernel modules provide some modularity</td>
      <td>Inherently modular with isolated services</td>
    </tr>
    <tr>
      <td><strong>Reliability</strong></td>
      <td>Single failure can affect the entire kernel</td>
      <td>Service failures can be isolated without affecting the kernel</td>
    </tr>
    <tr>
      <td><strong>Examples</strong></td>
      <td>Linux, FreeBSD, Solaris</td>
      <td>MINIX, QNX, GNU Hurd</td>
    </tr>
  </table>
</div>

<p>Linux has successfully mitigated many of the traditional disadvantages of monolithic kernels through:</p>

<ul>
  <li><strong>Loadable Kernel Modules</strong>: Components can be loaded/unloaded at runtime</li>
  <li><strong>Preemption Capabilities</strong>: Allows better responsiveness</li>
  <li><strong>Error Containment</strong>: Mechanisms to isolate and recover from certain failures</li>
  <li><strong>Unified Development Model</strong>: Consistent approach across all subsystems</li>
</ul>

<p><br /></p>

<hr />

<h2 id="core-components-and-subsystems">Core Components and Subsystems</h2>

<p>The Linux kernel can be divided into several major subsystems, each responsible for specific aspects of system functionality:</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    pie
      title "Linux Kernel Component Distribution (Approximate Code Size)"
      "Device Drivers" : 55
      "Architecture-Specific Code" : 20
      "File Systems" : 10
      "Networking" : 8
      "Memory Management" : 4
      "Process Management" : 3
  </div>
</div>

<h3 id="process-management">Process Management</h3>

<p>Process management handles the creation, scheduling, and termination of processes, enabling multitasking in the Linux system.</p>

<h4 id="key-features">Key Features:</h4>

<ol>
  <li><strong>Process Scheduler</strong>: Determines which process runs when</li>
  <li><strong>Process Control Block</strong>: Data structure containing all information about a process</li>
  <li><strong>Context Switching</strong>: Mechanism to switch CPU execution from one process to another</li>
  <li><strong>Thread Support</strong>: Native thread implementation via the <code class="language-plaintext highlighter-rouge">clone()</code> system call</li>
</ol>

<h4 id="process-states">Process States:</h4>

<div style="width: 70%; margin: 20px auto;">
  <div class="mermaid">
    stateDiagram-v2
      direction LR
      
      [*] --&gt; Created
      Created --&gt; Ready: Process initialized
      Ready --&gt; Running: Scheduler selects process
      Running --&gt; Ready: Time quantum expires
      Running --&gt; Blocked: I/O or resource wait
      Blocked --&gt; Ready: I/O or resource available
      Running --&gt; Terminated: Process completes
      Terminated --&gt; [*]
      
      note right of Running
        Only one process
        is in the running
        state per CPU
      end note
  </div>
</div>

<h4 id="example-process-creation">Example: Process Creation</h4>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pid_t</span> <span class="n">child_pid</span><span class="p">;</span>
    
    <span class="c1">// Create a new process</span>
    <span class="n">child_pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">child_pid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Error handling</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"fork failed"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">child_pid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Child process code</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Child process: PID = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">getpid</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Parent process code</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Parent process: Child's PID = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">child_pid</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In this example, the <code class="language-plaintext highlighter-rouge">fork()</code> system call creates a new process by duplicating the calling process. The kernel handles the complex tasks of:</p>
<ul>
  <li>Creating a new process control block</li>
  <li>Allocating process resources</li>
  <li>Copying parent’s memory space (with copy-on-write optimization)</li>
  <li>Scheduling the new process for execution</li>
</ul>

<p><br /></p>

<h3 id="memory-management">Memory Management</h3>

<p>Memory management controls how processes access memory, implementing virtual memory and managing physical RAM allocation.</p>

<h4 id="memory-hierarchy">Memory Hierarchy</h4>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[User Application] --&gt; B[Virtual Address Space]
      B --&gt; C[Page Tables]
      
      C --&gt; D[Physical RAM]
      C --&gt; E[Swap Space]
      
      F[TLB - Translation Lookaside Buffer] --- C
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ef9a9a,stroke:#333,stroke-width:1px
      style F fill:#ce93d8,stroke:#333,stroke-width:1px
  </div>
</div>

<h4 id="key-components">Key Components:</h4>

<ol>
  <li><strong>Page Tables</strong>: Map virtual addresses to physical addresses</li>
  <li><strong>Demand Paging</strong>: Loads pages into memory only when needed</li>
  <li><strong>Memory Allocators</strong>:
    <ul>
      <li><strong>Buddy Allocator</strong>: For physical page allocation</li>
      <li><strong>Slab Allocator</strong>: For kernel objects of fixed sizes</li>
    </ul>
  </li>
  <li><strong>Virtual Memory Areas (VMAs)</strong>: Track process memory regions</li>
  <li><strong>Out-of-Memory (OOM) Killer</strong>: Terminates processes when memory is critically low</li>
</ol>

<h4 id="example-memory-information">Example: Memory Information</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Display comprehensive memory usage information</span>
<span class="nv">$ </span>free <span class="nt">-h</span>
               total        used        free      shared  buff/cache   available
Mem:            15Gi       4.5Gi       6.2Gi       625Mi       4.9Gi        10Gi
Swap:          8.0Gi          0B       8.0Gi

<span class="c"># Examine kernel memory parameters</span>
<span class="nv">$ </span>sysctl vm.swappiness
vm.swappiness <span class="o">=</span> 60

<span class="c"># Analyze a process's memory maps</span>
<span class="nv">$ </span><span class="nb">cat</span> /proc/1234/maps
00400000-00452000 r-xp 00000000 08:02 173521      /usr/bin/example
00651000-00652000 r--p 00051000 08:02 173521      /usr/bin/example
...

<span class="c"># Monitor page faults and memory operations</span>
<span class="nv">$ </span>vmstat 1
procs <span class="nt">-----------memory----------</span> <span class="nt">---swap--</span> <span class="nt">-----io----</span> <span class="nt">-system--</span> <span class="nt">------cpu-----</span>
 r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="k">in   </span>cs us sy <span class="nb">id </span>wa st
 2  0      0 6382888  95056 4915476    0    0    12    17    0    0  5  1 93  1  0
</code></pre></div></div>

<p><br /></p>

<h3 id="file-system-layer">File System Layer</h3>

<p>The Linux file system layer provides a unified interface for accessing various file systems while maintaining a consistent API for applications.</p>

<h4 id="architecture">Architecture:</h4>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[System Calls: open, read, write, close, etc.]
      A --&gt; B[Virtual File System - VFS]
      
      B --&gt; C[File System Types]
      C --&gt; D[ext4]
      C --&gt; E[Btrfs]
      C --&gt; F[XFS]
      C --&gt; G[NFS]
      C --&gt; H[...]
      
      B --&gt; I[Buffer Cache]
      I --&gt; J[Block I/O Layer]
      J --&gt; K[Device Drivers]
      K --&gt; L[Storage Hardware]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ffcc80,stroke:#333,stroke-width:1px
      style F fill:#ffcc80,stroke:#333,stroke-width:1px
      style G fill:#ffcc80,stroke:#333,stroke-width:1px
      style H fill:#ffcc80,stroke:#333,stroke-width:1px
      style I fill:#ce93d8,stroke:#333,stroke-width:1px
      style J fill:#ef9a9a,stroke:#333,stroke-width:1px
      style K fill:#80deea,stroke:#333,stroke-width:1px
      style L fill:#f5f5f5,stroke:#333,stroke-width:1px
  </div>
</div>

<h4 id="key-concepts">Key Concepts:</h4>

<ol>
  <li><strong>Virtual File System (VFS)</strong>: Abstract layer that provides a common interface</li>
  <li><strong>Inodes</strong>: Data structures containing file metadata</li>
  <li><strong>Dentries</strong>: Directory entry cache for pathname lookup optimization</li>
  <li><strong>Mount Points</strong>: Connection points for file systems into the unified hierarchy</li>
  <li><strong>Page Cache</strong>: Improves performance by caching file data in memory</li>
</ol>

<h4 id="linux-file-system-operations">Linux File System Operations</h4>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Simplified example of reading from a file using system calls</span>
<span class="cp">#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
    <span class="kt">ssize_t</span> <span class="n">bytes_read</span><span class="p">;</span>
    
    <span class="c1">// Open file - kernel traverses the VFS</span>
    <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">"/etc/hostname"</span><span class="p">,</span> <span class="n">O_RDONLY</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to open file"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// Read file - kernel accesses the specific file system implementation</span>
    <span class="n">bytes_read</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bytes_read</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">buffer</span><span class="p">[</span><span class="n">bytes_read</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'\0'</span><span class="p">;</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Hostname: %s"</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Close file - kernel cleans up file descriptors</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This example demonstrates how user applications interact with the kernel’s file system layer through system calls, which are then routed through the VFS to the specific file system implementation (e.g., ext4, XFS) handling the requested file.</p>

<p><br /></p>

<h3 id="device-drivers">Device Drivers</h3>

<p>Device drivers are the interface between the Linux kernel and hardware devices, enabling the kernel to communicate with a wide range of hardware.</p>

<h4 id="driver-architecture">Driver Architecture:</h4>

<div style="width: 90%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Kernel Subsystems] --&gt; B[Device Driver Interface]
      
      subgraph "Device Drivers"
        B --&gt; C[Character Drivers]
        B --&gt; D[Block Drivers]
        B --&gt; E[Network Drivers]
        B --&gt; F[USB Drivers]
        B --&gt; G[Input Drivers]
        B --&gt; H[GPU Drivers]
      end
      
      C --&gt; I[Hardware Devices]
      D --&gt; I
      E --&gt; I
      F --&gt; I
      G --&gt; I
      H --&gt; I
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#64b5f6,stroke:#333,stroke-width:1px
      style E fill:#64b5f6,stroke:#333,stroke-width:1px
      style F fill:#64b5f6,stroke:#333,stroke-width:1px
      style G fill:#64b5f6,stroke:#333,stroke-width:1px
      style H fill:#64b5f6,stroke:#333,stroke-width:1px
      style I fill:#f5f5f5,stroke:#333,stroke-width:1px
  </div>
</div>

<h4 id="driver-types">Driver Types:</h4>

<ol>
  <li><strong>Character Device Drivers</strong>:
    <ul>
      <li>For devices that are accessed as a stream of bytes (e.g., serial ports, keyboards)</li>
      <li>Accessed through special files in <code class="language-plaintext highlighter-rouge">/dev</code></li>
      <li>Examples: <code class="language-plaintext highlighter-rouge">/dev/tty</code> (terminals), <code class="language-plaintext highlighter-rouge">/dev/random</code> (random number generator)</li>
    </ul>
  </li>
  <li><strong>Block Device Drivers</strong>:
    <ul>
      <li>For devices that handle data in fixed-size blocks (e.g., hard drives, SSDs)</li>
      <li>Support random access to data blocks</li>
      <li>Examples: <code class="language-plaintext highlighter-rouge">/dev/sda</code> (SATA disk), <code class="language-plaintext highlighter-rouge">/dev/nvme0n1</code> (NVMe SSD)</li>
    </ul>
  </li>
  <li><strong>Network Device Drivers</strong>:
    <ul>
      <li>For network interfaces (e.g., Ethernet cards, Wi-Fi adapters)</li>
      <li>Interface with the kernel’s networking stack</li>
      <li>Configured through interfaces like <code class="language-plaintext highlighter-rouge">eth0</code>, <code class="language-plaintext highlighter-rouge">wlan0</code></li>
    </ul>
  </li>
</ol>

<h4 id="working-with-kernel-modules">Working with Kernel Modules:</h4>

<p>Device drivers in Linux are typically implemented as loadable kernel modules, allowing dynamic loading and unloading without rebooting.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List all loaded kernel modules</span>
<span class="nv">$ </span>lsmod
Module                  Size  Used by
bluetooth             610304  0
rfkill                 28672  4 bluetooth
snd_hda_codec_hdmi     61440  1
snd_hda_codec         135168  2 snd_hda_codec_hdmi
...

<span class="c"># Get information about a specific module</span>
<span class="nv">$ </span>modinfo bluetooth
filename:       /lib/modules/5.15.0-75-generic/kernel/net/bluetooth/bluetooth.ko
license:        GPL
version:        2.22
description:    Bluetooth Core ver 2.22
author:         Marcel Holtmann &lt;marcel@holtmann.org&gt;
...

<span class="c"># Load a module</span>
<span class="nv">$ </span><span class="nb">sudo </span>modprobe i915  <span class="c"># Intel graphics driver</span>

<span class="c"># Unload a module</span>
<span class="nv">$ </span><span class="nb">sudo </span>rmmod bluetooth
</code></pre></div></div>

<h4 id="device-driver-development-example">Device Driver Development Example:</h4>

<p>This is a simplified example of a character device driver:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;linux/module.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;linux/kernel.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;linux/fs.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;linux/cdev.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;linux/device.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;linux/uaccess.h&gt;</span><span class="cp">
</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">device_open</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">device_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">ssize_t</span> <span class="nf">device_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="n">loff_t</span> <span class="o">*</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">ssize_t</span> <span class="nf">device_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="n">loff_t</span> <span class="o">*</span><span class="p">);</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">fops</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">.</span><span class="n">open</span> <span class="o">=</span> <span class="n">device_open</span><span class="p">,</span>
    <span class="p">.</span><span class="n">release</span> <span class="o">=</span> <span class="n">device_release</span><span class="p">,</span>
    <span class="p">.</span><span class="n">read</span> <span class="o">=</span> <span class="n">device_read</span><span class="p">,</span>
    <span class="p">.</span><span class="n">write</span> <span class="o">=</span> <span class="n">device_write</span>
<span class="p">};</span>

<span class="c1">// Implementation of driver functions...</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">simple_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Register character device</span>
    <span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">"Simple driver: Initializing</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">simple_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Unregister character device</span>
    <span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">"Simple driver: Exiting</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">simple_init</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">simple_exit</span><span class="p">);</span>

<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">"GPL"</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">"Example Author"</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">"A simple character device driver"</span><span class="p">);</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="networking-stack">Networking Stack</h3>

<p>The Linux networking stack is a sophisticated subsystem that handles network communication across various protocols and interfaces.</p>

<h4 id="networking-architecture">Networking Architecture:</h4>

<div style="width: 95%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[User Applications] --&gt; B[Socket Interface]
      
      subgraph "Networking Stack"
        B --&gt; C[Socket Layer]
        C --&gt; D[Transport Protocols: TCP, UDP, SCTP]
        D --&gt; E[Internet Protocols: IPv4, IPv6, ICMP]
        E --&gt; F[Routing &amp; Firewall]
        F --&gt; G[Network Device Interface]
      end
      
      G --&gt; H[Network Device Drivers]
      H --&gt; I[Network Hardware]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#ef9a9a,stroke:#333,stroke-width:1px
      style G fill:#9fa8da,stroke:#333,stroke-width:1px
      style H fill:#80deea,stroke:#333,stroke-width:1px
      style I fill:#f5f5f5,stroke:#333,stroke-width:1px
  </div>
</div>

<h4 id="key-components-1">Key Components:</h4>

<ol>
  <li><strong>Socket Interface</strong>: API for applications to access network services</li>
  <li><strong>Protocol Implementations</strong>: TCP, UDP, IP, ICMP, etc.</li>
  <li><strong>Network Device Interface</strong>: Infrastructure for network device drivers</li>
  <li><strong>Netfilter</strong>: Framework for packet filtering, network address translation (NAT)</li>
  <li><strong>Routing Subsystem</strong>: Determines how packets are forwarded</li>
  <li><strong>Network Namespaces</strong>: Virtualization for network resources</li>
</ol>

<h4 id="socket-programming-example">Socket Programming Example:</h4>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/socket.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;netinet/in.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;arpa/inet.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">socket_fd</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sockaddr_in</span> <span class="n">server_addr</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Hello from client"</span><span class="p">;</span>
    
    <span class="c1">// Create socket</span>
    <span class="n">socket_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">socket_fd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Socket creation failed"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// Initialize server address structure</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server_addr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">server_addr</span><span class="p">));</span>
    <span class="n">server_addr</span><span class="p">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="n">AF_INET</span><span class="p">;</span>
    <span class="n">server_addr</span><span class="p">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="n">htons</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
    <span class="n">inet_pton</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="s">"127.0.0.1"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">server_addr</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">);</span>
    
    <span class="c1">// Connect to server</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">connect</span><span class="p">(</span><span class="n">socket_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">server_addr</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">server_addr</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Connection failed"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// Send message to server</span>
    <span class="n">send</span><span class="p">(</span><span class="n">socket_fd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"Message sent</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    
    <span class="n">close</span><span class="p">(</span><span class="n">socket_fd</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When this program runs, the socket system call initiates a complex chain of events in the kernel:</p>
<ol>
  <li>A socket structure is allocated and initialized</li>
  <li>Protocol-specific operations are set up (TCP in this case)</li>
  <li>A file descriptor is returned to the application</li>
  <li>Subsequent operations (connect, send) invoke specific protocol handlers</li>
</ol>

<p><br /></p>

<h3 id="interprocess-communication-ipc">Interprocess Communication (IPC)</h3>

<p>Linux provides various mechanisms for processes to communicate with each other.</p>

<h4 id="ipc-mechanisms">IPC Mechanisms:</h4>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">IPC Mechanism</th>
      <th style="width: 40%;">Characteristics</th>
      <th style="width: 40%;">Use Cases</th>
    </tr>
    <tr>
      <td><strong>Pipes</strong></td>
      <td>Unidirectional, related processes, FIFO queue</td>
      <td>Shell pipelines, parent-child communication</td>
    </tr>
    <tr>
      <td><strong>Named Pipes (FIFOs)</strong></td>
      <td>Like pipes but accessible via filesystem path</td>
      <td>Communication between unrelated processes</td>
    </tr>
    <tr>
      <td><strong>Message Queues</strong></td>
      <td>Structured messages with types, persistent</td>
      <td>Client-server applications, event handling</td>
    </tr>
    <tr>
      <td><strong>Shared Memory</strong></td>
      <td>Fast, requires synchronization</td>
      <td>High-performance data sharing, databases</td>
    </tr>
    <tr>
      <td><strong>Semaphores</strong></td>
      <td>Counting mechanism for synchronization</td>
      <td>Controlling access to shared resources</td>
    </tr>
    <tr>
      <td><strong>Sockets</strong></td>
      <td>Network-transparent, flexible</td>
      <td>Network communication, local process communication</td>
    </tr>
    <tr>
      <td><strong>Signals</strong></td>
      <td>Asynchronous notifications</td>
      <td>Process termination, error handling</td>
    </tr>
  </table>
</div>

<h4 id="example-pipe-communication">Example: Pipe Communication</h4>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">pipe_fd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">pid_t</span> <span class="n">child_pid</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">message</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"Message from parent"</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
    
    <span class="c1">// Create pipe</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pipe</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Pipe creation failed"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// Create child process</span>
    <span class="n">child_pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">child_pid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Fork failed"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">child_pid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Child process</span>
        <span class="n">close</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>  <span class="c1">// Close write end</span>
        
        <span class="c1">// Read from pipe</span>
        <span class="n">read</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Child received: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span>
        
        <span class="n">close</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Parent process</span>
        <span class="n">close</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>  <span class="c1">// Close read end</span>
        
        <span class="c1">// Write to pipe</span>
        <span class="n">write</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">message</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Parent sent message</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        
        <span class="n">close</span><span class="p">(</span><span class="n">pipe_fd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="kernel-space-vs-user-space">Kernel Space vs User Space</h2>

<p>In Linux, memory and execution modes are divided into two distinct domains: kernel space and user space. This separation is fundamental to system security and stability.</p>

<h3 id="memory-and-protection-rings">Memory and Protection Rings</h3>

<div style="width: 70%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      subgraph "Ring 0 (Kernel Mode)"
        A[Kernel Code]
        B[Device Drivers]
        C[Core Kernel Services]
      end
      
      subgraph "Ring 3 (User Mode)"
        D[User Applications]
        E[Libraries]
        F[Daemons]
      end
      
      D -- "System Calls" --&gt; A
      E -- "System Calls" --&gt; A
      F -- "System Calls" --&gt; A
      
      style A fill:#64b5f6,stroke:#333,stroke-width:1px
      style B fill:#64b5f6,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#a5d6a7,stroke:#333,stroke-width:1px
      style E fill:#a5d6a7,stroke:#333,stroke-width:1px
      style F fill:#a5d6a7,stroke:#333,stroke-width:1px
  </div>
</div>

<h3 id="key-differences">Key Differences</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Characteristic</th>
      <th style="width: 40%;">Kernel Space</th>
      <th style="width: 40%;">User Space</th>
    </tr>
    <tr>
      <td><strong>Access Level</strong></td>
      <td>Unrestricted access to hardware and memory</td>
      <td>Limited access through system calls</td>
    </tr>
    <tr>
      <td><strong>Memory Addressing</strong></td>
      <td>Can access all physical and virtual memory</td>
      <td>Can only access its own virtual address space</td>
    </tr>
    <tr>
      <td><strong>Protection</strong></td>
      <td>No protection - errors can crash system</td>
      <td>Protected - errors confined to process</td>
    </tr>
    <tr>
      <td><strong>CPU Mode</strong></td>
      <td>Privileged mode (Ring 0)</td>
      <td>Unprivileged mode (Ring 3)</td>
    </tr>
    <tr>
      <td><strong>Code Running</strong></td>
      <td>Kernel code, drivers, essential services</td>
      <td>Applications, libraries, utilities</td>
    </tr>
    <tr>
      <td><strong>Interrupt Handling</strong></td>
      <td>Can handle hardware interrupts directly</td>
      <td>Cannot handle interrupts</td>
    </tr>
  </table>
</div>

<h3 id="crossing-the-boundary-system-calls">Crossing the Boundary: System Calls</h3>

<p>System calls are the controlled interface between user space and kernel space, providing a secure way for applications to request kernel services.</p>

<div style="width: 95%; margin: 20px auto;">
  <div class="mermaid">
    sequenceDiagram
        participant UA as User Application
        participant UL as User Libraries (glibc)
        participant SC as System Call Interface
        participant K as Kernel Services
        
        UA-&gt;&gt;UL: Call library function<br />(e.g., fopen())
        UL-&gt;&gt;SC: Invoke system call<br />(e.g., open())
        Note over UL,SC: CPU switches to kernel mode
        SC-&gt;&gt;K: Execute kernel function
        K-&gt;&gt;SC: Return result
        Note over SC,UL: CPU switches back to user mode
        SC-&gt;&gt;UL: Return to library
        UL-&gt;&gt;UA: Return to application
  </div>
</div>

<h4 id="example-tracing-system-calls">Example: Tracing System Calls</h4>

<p>We can observe system calls using the <code class="language-plaintext highlighter-rouge">strace</code> utility:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Trace system calls made by the 'ls' command</span>
<span class="nv">$ </span>strace <span class="nb">ls
</span>execve<span class="o">(</span><span class="s2">"/usr/bin/ls"</span>, <span class="o">[</span><span class="s2">"ls"</span><span class="o">]</span>, 0x7ffc82dff800 /<span class="k">*</span> 55 vars <span class="k">*</span>/<span class="o">)</span> <span class="o">=</span> 0
brk<span class="o">(</span>NULL<span class="o">)</span>                               <span class="o">=</span> 0x55de6db64000
arch_prctl<span class="o">(</span>0x3001 /<span class="k">*</span> ARCH_??? <span class="k">*</span>/, 0x7fff4acaff00<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINVAL
access<span class="o">(</span><span class="s2">"/etc/ld.so.preload"</span>, R_OK<span class="o">)</span>      <span class="o">=</span> <span class="nt">-1</span> ENOENT
openat<span class="o">(</span>AT_FDCWD, <span class="s2">"/etc/ld.so.cache"</span>, O_RDONLY|O_CLOEXEC<span class="o">)</span> <span class="o">=</span> 3
...
openat<span class="o">(</span>AT_FDCWD, <span class="s2">"."</span>, O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY<span class="o">)</span> <span class="o">=</span> 3
getdents64<span class="o">(</span>3, /<span class="k">*</span> 20 entries <span class="k">*</span>/, 32768<span class="o">)</span>  <span class="o">=</span> 704
getdents64<span class="o">(</span>3, /<span class="k">*</span> 0 entries <span class="k">*</span>/, 32768<span class="o">)</span>   <span class="o">=</span> 0
close<span class="o">(</span>3<span class="o">)</span>                                <span class="o">=</span> 0
fstat<span class="o">(</span>1, <span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFCHR|0620, <span class="nv">st_rdev</span><span class="o">=</span>makedev<span class="o">(</span>136, 1<span class="o">)</span>, ...<span class="o">})</span> <span class="o">=</span> 0
write<span class="o">(</span>1, <span class="s2">"file1.txt  file2.txt  folder1  f"</span>..., 40<span class="o">)</span> <span class="o">=</span> 40
close<span class="o">(</span>1<span class="o">)</span>                                <span class="o">=</span> 0
close<span class="o">(</span>2<span class="o">)</span>                                <span class="o">=</span> 0
exit_group<span class="o">(</span>0<span class="o">)</span>                           <span class="o">=</span> ?
+++ exited with 0 +++
</code></pre></div></div>

<p>This output shows how even a simple command like <code class="language-plaintext highlighter-rouge">ls</code> makes numerous system calls to interact with the kernel for operations like file access and directory reading.</p>

<p><br /></p>

<hr />

<h2 id="advanced-kernel-features">Advanced Kernel Features</h2>

<h3 id="kernel-modules">Kernel Modules</h3>

<p>Kernel modules are dynamically loadable components that extend the kernel’s functionality without requiring a system reboot.</p>

<h4 id="module-management">Module Management</h4>

<div class="info-box info-box-default-not-check">
  <strong>Kernel Module Lifecycle</strong>
  <p>Kernel modules are object files (.ko) that can be loaded and unloaded at runtime, providing a flexible way to add functionality to the kernel.</p>
  
  <p>Key module management commands:</p>
  <ul>
    <li><code>lsmod</code>: List currently loaded modules</li>
    <li><code>modinfo</code>: Display information about a module</li>
    <li><code>modprobe</code>: Load a module and its dependencies</li>
    <li><code>rmmod</code>: Unload a module</li>
    <li><code>insmod</code>: Load a module directly (without dependency handling)</li>
  </ul>
  
  <p>Modules are typically stored in <code>/lib/modules/$(uname -r)/kernel/</code></p>
</div>

<h4 id="module-parameters">Module Parameters</h4>

<p>Modules can be configured through parameters at load time:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Load module with custom parameters</span>
<span class="nv">$ </span><span class="nb">sudo </span>modprobe iwlwifi <span class="nv">power_save</span><span class="o">=</span>1 <span class="nv">disable_11ax</span><span class="o">=</span>0

<span class="c"># View current module parameters</span>
<span class="nv">$ </span>systool <span class="nt">-v</span> <span class="nt">-m</span> iwlwifi
    power_save              <span class="o">=</span> <span class="s2">"1"</span>
    disable_11ax            <span class="o">=</span> <span class="s2">"0"</span>
    
<span class="c"># Set parameters through sysfs</span>
<span class="nv">$ </span><span class="nb">echo </span>0 | <span class="nb">sudo tee</span> /sys/module/iwlwifi/parameters/power_save
</code></pre></div></div>

<h3 id="namespaces">Namespaces</h3>

<p>Namespaces isolate system resources, forming the foundation for container technologies.</p>

<h4 id="types-of-namespaces">Types of Namespaces:</h4>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Namespace</th>
      <th style="width: 40%;">Resources Isolated</th>
      <th style="width: 40%;">Example Command</th>
    </tr>
    <tr>
      <td><strong>PID</strong></td>
      <td>Process IDs</td>
      <td><code>unshare --pid --fork bash</code></td>
    </tr>
    <tr>
      <td><strong>Network</strong></td>
      <td>Network interfaces, routing tables, firewall rules</td>
      <td><code>ip netns add mynet</code></td>
    </tr>
    <tr>
      <td><strong>Mount</strong></td>
      <td>Mount points</td>
      <td><code>unshare --mount bash</code></td>
    </tr>
    <tr>
      <td><strong>UTS</strong></td>
      <td>Hostname and domain name</td>
      <td><code>unshare --uts bash</code></td>
    </tr>
    <tr>
      <td><strong>IPC</strong></td>
      <td>System V IPC objects, POSIX message queues</td>
      <td><code>unshare --ipc bash</code></td>
    </tr>
    <tr>
      <td><strong>User</strong></td>
      <td>User and group IDs</td>
      <td><code>unshare --map-root-user --user bash</code></td>
    </tr>
    <tr>
      <td><strong>Cgroup</strong></td>
      <td>Control group root directory</td>
      <td><code>unshare --cgroup bash</code></td>
    </tr>
  </table>
</div>

<h3 id="control-groups-cgroups">Control Groups (cgroups)</h3>

<p>Control groups allow the kernel to allocate and limit resources among process groups.</p>

<h4 id="using-cgroups">Using cgroups</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a new cgroup for a database service</span>
<span class="nv">$ </span><span class="nb">sudo </span>cgcreate <span class="nt">-g</span> memory,cpu:database

<span class="c"># Set memory limit to 2GB</span>
<span class="nv">$ </span><span class="nb">sudo </span>cgset <span class="nt">-r</span> memory.limit_in_bytes<span class="o">=</span>2G database

<span class="c"># Set CPU quota (40% of one CPU core)</span>
<span class="nv">$ </span><span class="nb">sudo </span>cgset <span class="nt">-r</span> cpu.cfs_quota_us<span class="o">=</span>40000 database
<span class="nv">$ </span><span class="nb">sudo </span>cgset <span class="nt">-r</span> cpu.cfs_period_us<span class="o">=</span>100000 database

<span class="c"># Add a process to the cgroup</span>
<span class="nv">$ </span><span class="nb">sudo </span>cgclassify <span class="nt">-g</span> memory,cpu:database <span class="si">$(</span>pgrep mysqld<span class="si">)</span>

<span class="c"># Check resource usage</span>
<span class="nv">$ </span><span class="nb">cat</span> /sys/fs/cgroup/memory/database/memory.usage_in_bytes
</code></pre></div></div>

<h3 id="linux-capabilities">Linux Capabilities</h3>

<p>Capabilities break down the traditional root/non-root privilege binary into finer-grained permissions.</p>

<h4 id="working-with-capabilities">Working with Capabilities</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># View capabilities of a process</span>
<span class="nv">$ </span>getpcaps <span class="nv">$$</span>
Capabilities <span class="k">for</span> <span class="sb">`</span>15632<span class="s1">': = cap_chown,cap_dac_override,...

# View capabilities of a binary
$ getcap /usr/bin/ping
/usr/bin/ping = cap_net_raw+ep

# Add capabilities to a binary
$ sudo setcap cap_net_admin+ep /usr/local/bin/my_network_tool

# Run a process with specific capabilities
$ capsh --caps="cap_net_admin+ep" --
</span></code></pre></div></div>

<h3 id="performance-monitoring-and-tracing">Performance Monitoring and Tracing</h3>

<p>The Linux kernel provides sophisticated tools for monitoring and tracing system behavior.</p>

<h4 id="key-tracing-frameworks">Key Tracing Frameworks:</h4>

<ol>
  <li><strong>ftrace</strong>: Function tracer built into the kernel</li>
  <li><strong>perf</strong>: Performance analysis tool</li>
  <li><strong>eBPF</strong>: Extended Berkeley Packet Filter for efficient in-kernel programmability</li>
  <li><strong>SystemTap</strong>: Scripting language for kernel instrumentation</li>
  <li><strong>LTTng</strong>: Linux Trace Toolkit, next generation</li>
</ol>

<h4 id="example-using-perf-for-cpu-profiling">Example: Using perf for CPU profiling</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Record performance data for a command</span>
<span class="nv">$ </span>perf record <span class="nt">-F</span> 99 <span class="nt">-g</span> ./my_application

<span class="c"># Analyze the recorded data</span>
<span class="nv">$ </span>perf report

<span class="c"># Live monitoring of CPU events</span>
<span class="nv">$ </span>perf top

<span class="c"># Count system-wide events for 10 seconds</span>
<span class="nv">$ </span>perf <span class="nb">stat</span> <span class="nt">-a</span> <span class="nb">sleep </span>10
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="kernel-security-features">Kernel Security Features</h2>

<h3 id="security-mechanisms">Security Mechanisms</h3>

<p>Linux incorporates multiple layers of security within the kernel itself.</p>

<h4 id="core-security-features">Core Security Features:</h4>

<div style="width: 95%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Linux Kernel Security]
      
      A --&gt; B[Access Control]
      B --&gt; B1[Discretionary Access Control]
      B --&gt; B2[Mandatory Access Control]
      B --&gt; B3[Capabilities]
      
      A --&gt; C[Memory Protection]
      C --&gt; C1[Address Space Layout Randomization]
      C --&gt; C2[Data Execution Prevention]
      C --&gt; C3[Stack Canaries]
      
      A --&gt; D[Network Security]
      D --&gt; D1[Netfilter Framework]
      D --&gt; D2[Network Namespaces]
      D --&gt; D3[BPF Filtering]
      
      A --&gt; E[Other Security Features]
      E --&gt; E1[Seccomp]
      E --&gt; E2[Integrity Measurement Architecture]
      E --&gt; E3[Kernel Lockdown Mode]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
  </div>
</div>

<h3 id="selinux-and-apparmor">SELinux and AppArmor</h3>

<p>These are Mandatory Access Control (MAC) systems that enforce security policies beyond traditional Unix permissions.</p>

<h4 id="selinux-example">SELinux Example:</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if SELinux is enabled</span>
<span class="nv">$ </span>getenforce
Enforcing

<span class="c"># View SELinux context of a file</span>
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-Z</span> /etc/passwd
system_u:object_r:passwd_file_t:s0 /etc/passwd

<span class="c"># View SELinux context of a process</span>
<span class="nv">$ </span>ps <span class="nt">-Z</span> <span class="nt">-p</span> <span class="nv">$$</span>
unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 3842 pts/0 bash
</code></pre></div></div>

<h4 id="apparmor-example">AppArmor Example:</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check AppArmor status</span>
<span class="nv">$ </span>aa-status
apparmor module is loaded.
14 profiles are loaded.
13 profiles are <span class="k">in </span>enforce mode.
1 profiles are <span class="k">in </span>complain mode.
...

<span class="c"># Put profile in complain mode (log but don't block)</span>
<span class="nv">$ </span><span class="nb">sudo </span>aa-complain /usr/bin/firefox

<span class="c"># Put profile in enforce mode</span>
<span class="nv">$ </span><span class="nb">sudo </span>aa-enforce /etc/apparmor.d/usr.bin.firefox
</code></pre></div></div>

<h3 id="seccomp">Seccomp</h3>

<p>Seccomp (secure computing mode) restricts the system calls that a process can make.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Run a shell with only limited syscalls allowed</span>
<span class="nv">$ </span><span class="nb">sudo </span>docker run <span class="nt">--security-opt</span> <span class="nv">seccomp</span><span class="o">=</span>/path/to/seccomp.json alpine sh

<span class="c"># Example of a minimal seccomp filter in C</span>
<span class="c">#include &lt;stdio.h&gt;</span>
<span class="c">#include &lt;seccomp.h&gt;</span>
<span class="c">#include &lt;unistd.h&gt;</span>

int main<span class="o">()</span> <span class="o">{</span>
    scmp_filter_ctx ctx<span class="p">;</span>
    
    // Initialize filter <span class="k">in </span>whitelist mode
    ctx <span class="o">=</span> seccomp_init<span class="o">(</span>SCMP_ACT_KILL<span class="o">)</span><span class="p">;</span>
    
    // Allow minimal syscalls
    seccomp_rule_add<span class="o">(</span>ctx, SCMP_ACT_ALLOW, SCMP_SYS<span class="o">(</span><span class="nb">read</span><span class="o">)</span>, 0<span class="o">)</span><span class="p">;</span>
    seccomp_rule_add<span class="o">(</span>ctx, SCMP_ACT_ALLOW, SCMP_SYS<span class="o">(</span>write<span class="o">)</span>, 0<span class="o">)</span><span class="p">;</span>
    seccomp_rule_add<span class="o">(</span>ctx, SCMP_ACT_ALLOW, SCMP_SYS<span class="o">(</span><span class="nb">exit</span><span class="o">)</span>, 0<span class="o">)</span><span class="p">;</span>
    
    // Load the filter
    seccomp_load<span class="o">(</span>ctx<span class="o">)</span><span class="p">;</span>
    
    <span class="nb">printf</span><span class="o">(</span><span class="s2">"Seccomp filter loaded. Only read/write/exit syscalls allowed.</span><span class="se">\n</span><span class="s2">"</span><span class="o">)</span><span class="p">;</span>
    
    // This execve call will be blocked
    execve<span class="o">(</span><span class="s2">"/bin/ls"</span>, NULL, NULL<span class="o">)</span><span class="p">;</span>
    
    <span class="k">return </span>0<span class="p">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="kernel-monitoring-and-tuning">Kernel Monitoring and Tuning</h2>

<h3 id="the-proc-filesystem">The /proc Filesystem</h3>

<p>The <code class="language-plaintext highlighter-rouge">/proc</code> filesystem provides a window into the kernel’s view of the system.</p>

<h4 id="key-proc-files">Key <code class="language-plaintext highlighter-rouge">/proc</code> Files:</h4>

<div class="info-box info-box-default-not-check">
  <strong>Important /proc Files</strong>
  <ul>
    <li><code>/proc/cpuinfo</code>: Detailed CPU information</li>
    <li><code>/proc/meminfo</code>: Memory usage statistics</li>
    <li><code>/proc/loadavg</code>: System load averages</li>
    <li><code>/proc/net/</code>: Networking statistics and configuration</li>
    <li><code>/proc/sys/</code>: Kernel parameters that can be tuned</li>
    <li><code>/proc/[pid]/</code>: Information about specific processes</li>
    <li><code>/proc/interrupts</code>: IRQ usage statistics</li>
    <li><code>/proc/filesystems</code>: Supported filesystems</li>
    <li><code>/proc/diskstats</code>: Disk I/O statistics</li>
    <li><code>/proc/version</code>: Kernel version information</li>
  </ul>
</div>

<h3 id="kernel-parameters-with-sysctl">Kernel Parameters with sysctl</h3>

<p>The sysctl interface allows viewing and modifying kernel parameters at runtime.</p>

<h4 id="example-sysctl-commands">Example sysctl Commands:</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List all kernel parameters</span>
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-a</span>

<span class="c"># Get specific parameter</span>
<span class="nv">$ </span>sysctl vm.swappiness
vm.swappiness <span class="o">=</span> 60

<span class="c"># Set parameter temporarily (until reboot)</span>
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> vm.swappiness<span class="o">=</span>10

<span class="c"># Make setting persistent</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"vm.swappiness=10"</span> | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/sysctl.conf
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-p</span>  <span class="c"># Load settings from file</span>
</code></pre></div></div>

<h3 id="common-kernel-tuning-parameters">Common Kernel Tuning Parameters</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Parameter</th>
      <th style="width: 30%;">Description</th>
      <th style="width: 40%;">Typical Use Case</th>
    </tr>
    <tr>
      <td><code>vm.swappiness</code></td>
      <td>Controls how aggressively memory is swapped to disk</td>
      <td>Lower for database servers (e.g., 10-30) to reduce disk I/O</td>
    </tr>
    <tr>
      <td><code>fs.file-max</code></td>
      <td>Maximum number of file handles</td>
      <td>Increase for servers handling many connections</td>
    </tr>
    <tr>
      <td><code>net.core.somaxconn</code></td>
      <td>Maximum socket connection backlog</td>
      <td>Increase for high-traffic web servers</td>
    </tr>
    <tr>
      <td><code>net.ipv4.tcp_fin_timeout</code></td>
      <td>How long to keep sockets in FIN-WAIT-2 state</td>
      <td>Reduce to free up resources faster in high-connection environments</td>
    </tr>
    <tr>
      <td><code>kernel.pid_max</code></td>
      <td>Maximum process ID number</td>
      <td>Increase for systems running many processes</td>
    </tr>
    <tr>
      <td><code>vm.dirty_ratio</code></td>
      <td>Percentage of memory that can be filled with dirty pages before flushing</td>
      <td>Adjust for I/O-intensive workloads</td>
    </tr>
  </table>
</div>

<h3 id="performance-monitoring-tools">Performance Monitoring Tools</h3>

<div class="info-box info-box-success-check">
  <strong>Essential Linux Performance Tools</strong>
  <ul>
    <li><strong>top/htop</strong>: Interactive process viewer</li>
    <li><strong>vmstat</strong>: Virtual memory statistics</li>
    <li><strong>iostat</strong>: CPU and disk I/O statistics</li>
    <li><strong>mpstat</strong>: Multi-processor statistics</li>
    <li><strong>sar</strong>: System activity reporter with historical data</li>
    <li><strong>perf</strong>: Performance analysis with CPU profiling</li>
    <li><strong>strace</strong>: Trace system calls and signals</li>
    <li><strong>tcpdump</strong>: Network packet analyzer</li>
    <li><strong>netstat/ss</strong>: Network statistics</li>
    <li><strong>ftrace</strong>: Kernel function tracer</li>
  </ul>
</div>

<h4 id="example-using-sar-to-monitor-system-activity">Example: Using sar to Monitor System Activity</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install sar (if not already available)</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>sysstat

<span class="c"># Enable data collection</span>
<span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>sysstat
<span class="nv">$ </span><span class="nb">sudo </span>systemctl start sysstat

<span class="c"># View CPU statistics from today</span>
<span class="nv">$ </span>sar <span class="nt">-u</span>

<span class="c"># View memory usage with 2-second intervals for 5 samples</span>
<span class="nv">$ </span>sar <span class="nt">-r</span> 2 5

<span class="c"># View historical disk I/O from yesterday</span>
<span class="nv">$ </span>sar <span class="nt">-b</span> <span class="nt">-f</span> /var/log/sysstat/sa<span class="si">$(</span><span class="nb">date</span> <span class="nt">-d</span> yesterday +%d<span class="si">)</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="kernel-compilation-and-customization">Kernel Compilation and Customization</h2>

<p>For advanced users, compiling a custom kernel provides maximum control over the system.</p>

<h3 id="why-compile-a-custom-kernel">Why Compile a Custom Kernel?</h3>

<ul>
  <li>Add specific features not in the standard kernel</li>
  <li>Remove unnecessary components to reduce size</li>
  <li>Optimize for specific hardware</li>
  <li>Apply custom patches</li>
  <li>Learn about kernel internals</li>
</ul>

<h3 id="basic-kernel-compilation-process">Basic Kernel Compilation Process</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install required packages</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>build-essential libncurses-dev bison flex libssl-dev libelf-dev

<span class="c"># Download kernel source</span>
<span class="nv">$ </span>wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.tar.xz
<span class="nv">$ </span><span class="nb">tar </span>xf linux-5.15.tar.xz
<span class="nv">$ </span><span class="nb">cd </span>linux-5.15

<span class="c"># Copy current configuration as starting point</span>
<span class="nv">$ </span><span class="nb">cp</span> /boot/config-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span> .config

<span class="c"># Customize configuration</span>
<span class="nv">$ </span>make menuconfig

<span class="c"># Compile the kernel (using all CPU cores)</span>
<span class="nv">$ </span>make <span class="nt">-j</span><span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>

<span class="c"># Install modules</span>
<span class="nv">$ </span><span class="nb">sudo </span>make modules_install

<span class="c"># Install the kernel</span>
<span class="nv">$ </span><span class="nb">sudo </span>make <span class="nb">install</span>

<span class="c"># Update bootloader</span>
<span class="nv">$ </span><span class="nb">sudo </span>update-grub
</code></pre></div></div>

<h3 id="kernel-configuration-options">Kernel Configuration Options</h3>

<p>The kernel has thousands of configuration options. Some important categories:</p>

<ul>
  <li><strong>Processor type and features</strong>: CPU-specific optimizations</li>
  <li><strong>Power management</strong>: Options for saving power</li>
  <li><strong>Networking support</strong>: Protocols and hardware support</li>
  <li><strong>Device drivers</strong>: Hardware-specific drivers</li>
  <li><strong>File systems</strong>: Support for various file systems</li>
  <li><strong>Security options</strong>: Security features and hardening</li>
  <li><strong>Virtualization</strong>: Hypervisor and guest support</li>
</ul>

<p><br /></p>

<hr />

<h2 id="key-points">Key Points</h2>

<div class="info-box info-box-success-not-check">
  <strong>💡 Essential Kernel Concepts</strong>
  <ul>
    <li>
      <strong>Core Functions</strong><br />
      - Process scheduling and management<br />
      - Memory management with virtual memory<br />
      - Device drivers for hardware interaction<br />
      - File systems for data organization<br />
      - Networking stack for communications
    </li>
    <li>
      <strong>Architecture</strong><br />
      - Monolithic design with modular capabilities<br />
      - Kernel space/user space separation<br />
      - System calls as the interface between spaces<br />
      - Preemptible for better responsiveness
    </li>
    <li>
      <strong>Advanced Features</strong><br />
      - Loadable kernel modules for extensibility<br />
      - Namespaces and cgroups for resource isolation<br />
      - Security mechanisms like SELinux, capabilities<br />
      - Rich monitoring and tracing capabilities
    </li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="reference">Reference</h2>
<ul>
  <li><a href="https://www.kernel.org/">The Linux Kernel Archives</a></li>
  <li><a href="https://www.kernel.org/doc/html/latest/">Linux Kernel Documentation</a></li>
  <li><a href="https://www.amazon.com/Linux-Kernel-Development-Robert-Love/dp/0672329468">Linux Kernel Development (3rd Edition) by Robert Love</a></li>
  <li><a href="https://www.oreilly.com/library/view/understanding-the-linux/0596005652/">Understanding the Linux Kernel by Daniel P. Bovet</a></li>
  <li><a href="https://www.redhat.com/en/topics/linux/what-is-the-linux-kernel">Red Hat - What is the Linux Kernel</a></li>
  <li><a href="https://man7.org/tlpi/">The Linux Programming Interface by Michael Kerrisk</a></li>
  <li><a href="https://lwn.net/">LWN.net - Linux Weekly News</a></li>
  <li><a href="https://kernelnewbies.org/">Kernel Newbies</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/openstack/openstack/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1742267532/openstack_t2tmoc.png">
                                    
                                    <h3>What is OpenStack?</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/cs/os-cache-disk/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1744340260/os-cache-disk_jwhgck.png">
                                    
                                    <h3>OS Cache and Disk I/O - MySQL and Redis Performance Analysis</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/network/ssh-tunneling/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1742264887/ssh-tunneling_gm5ruo.png">
                                    
                                    <h3>Understanding SSH Tunneling</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="30">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/category/cicd/gitlab-gitlabrunner/" class="post-preview">
        <div class="image">
            
                <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737524828/gitlab_1_zviqqo.png">
            
        </div>
        <h3 class="title">What is GitLab, GitLab Runner?</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Learn about the Linux Kernel, its components, and how it manages system resources&quot;%20https://somaz.blog/category/linux/linux-kernel/%20via%20&#64;twitter_username&hashtags=linux,kernel,operating-system,system-architecture,resource-management,device-drivers"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/linux/linux-kernel/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/linux/linux-kernel/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "Understanding the Linux Kernel - Architecture, Functionality, and Internals",
            "headline": "A comprehensive guide to the Linux Kernel architecture and functionality",
            "description": "Learn about the Linux Kernel, its components, and how it manages system resources",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737448912/linux-kernel_r1s4fe.png",
            "url": "https://somaz.blog/category/linux/linux-kernel/",
            "articleBody": "



What is the Linux Kernel?


The Linux Kernel is the fundamental core of the Linux operating system - a sophisticated software layer that serves as the critical bridge between hardware components and user applications. It manages system resources, provides essential services, and enables applications to function while abstracting the complexities of hardware interaction.


Historical Context


  The Birth of Linux
  The Linux kernel was first created by Linus Torvalds in 1991 while he was a computer science student at the University of Helsinki. What began as a personal project to create a free alternative to the MINIX operating system has evolved into one of the most significant software projects in computing history.
  
  Key milestones in kernel development:
  
    1991: Version 0.01 - Initial release (approximately 10,000 lines of code)
    1994: Version 1.0 - First stable release
    1996: Version 2.0 - Added support for multiple architectures
    2011: Version 3.0 - Primarily a numbering change
    2015: Version 4.0 - Introduced live patching infrastructure
    2019: Version 5.0 - Improved support for AMD FreeSync, Raspberry Pi
    2023: Version 6.0 - Enhanced security, performance improvements
  
  
  Today&apos;s Linux kernel exceeds 30 million lines of code with contributions from thousands of developers worldwide, making it one of the largest collaborative software projects ever created.


Kernel Architecture Overview

The Linux kernel utilizes a monolithic design with modular capabilities, combining the performance advantages of monolithic kernels with the flexibility of modular systems.


  
    graph TD
      A[Applications] --&amp;gt; B[System Libraries]
      B --&amp;gt; C[System Call Interface]
      
      subgraph &quot;Kernel Space&quot;
        C --&amp;gt; D[Process Management]
        C --&amp;gt; E[Memory Management]
        C --&amp;gt; F[File Systems]
        C --&amp;gt; G[Device Drivers]
        C --&amp;gt; H[Network Stack]
        
        D --- I[Virtual File System]
        E --- I
        F --- I
        
        I --- J[Architecture-Dependent Code]
        G --- J
        H --- J
        
        J --- K[Hardware]
      end
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#f5f5f5,stroke:#333,stroke-width:1px
      style C fill:#a5d6a7,stroke:#333,stroke-width:1px
      style D fill:#64b5f6,stroke:#333,stroke-width:1px
      style E fill:#ffcc80,stroke:#333,stroke-width:1px
      style F fill:#9fa8da,stroke:#333,stroke-width:1px
      style G fill:#ce93d8,stroke:#333,stroke-width:1px
      style H fill:#80deea,stroke:#333,stroke-width:1px
      style I fill:#ef9a9a,stroke:#333,stroke-width:1px
      style J fill:#fff59d,stroke:#333,stroke-width:1px
      style K fill:#f5f5f5,stroke:#333,stroke-width:1px
  


Monolithic vs. Microkernel Design


  
    
      Characteristic
      Monolithic Kernel (Linux)
      Microkernel
    
    
      Architecture
      Single large binary with all core services in kernel space
      Minimal kernel with services in user space
    
    
      Performance
      Higher performance due to direct function calls within the kernel
      Lower performance due to IPC (Inter-Process Communication) overhead
    
    
      Memory Footprint
      Larger memory footprint in kernel space
      Smaller kernel but with overall similar total memory usage
    
    
      Modularity
      Loadable kernel modules provide some modularity
      Inherently modular with isolated services
    
    
      Reliability
      Single failure can affect the entire kernel
      Service failures can be isolated without affecting the kernel
    
    
      Examples
      Linux, FreeBSD, Solaris
      MINIX, QNX, GNU Hurd
    
  


Linux has successfully mitigated many of the traditional disadvantages of monolithic kernels through:


  Loadable Kernel Modules: Components can be loaded/unloaded at runtime
  Preemption Capabilities: Allows better responsiveness
  Error Containment: Mechanisms to isolate and recover from certain failures
  Unified Development Model: Consistent approach across all subsystems






Core Components and Subsystems

The Linux kernel can be divided into several major subsystems, each responsible for specific aspects of system functionality:


  
    pie
      title &quot;Linux Kernel Component Distribution (Approximate Code Size)&quot;
      &quot;Device Drivers&quot; : 55
      &quot;Architecture-Specific Code&quot; : 20
      &quot;File Systems&quot; : 10
      &quot;Networking&quot; : 8
      &quot;Memory Management&quot; : 4
      &quot;Process Management&quot; : 3
  


Process Management

Process management handles the creation, scheduling, and termination of processes, enabling multitasking in the Linux system.

Key Features:


  Process Scheduler: Determines which process runs when
  Process Control Block: Data structure containing all information about a process
  Context Switching: Mechanism to switch CPU execution from one process to another
  Thread Support: Native thread implementation via the clone() system call


Process States:


  
    stateDiagram-v2
      direction LR
      
      [*] --&amp;gt; Created
      Created --&amp;gt; Ready: Process initialized
      Ready --&amp;gt; Running: Scheduler selects process
      Running --&amp;gt; Ready: Time quantum expires
      Running --&amp;gt; Blocked: I/O or resource wait
      Blocked --&amp;gt; Ready: I/O or resource available
      Running --&amp;gt; Terminated: Process completes
      Terminated --&amp;gt; [*]
      
      note right of Running
        Only one process
        is in the running
        state per CPU
      end note
  


Example: Process Creation

#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;

int main() {
    pid_t child_pid;
    
    // Create a new process
    child_pid = fork();
    
    if (child_pid == -1) {
        // Error handling
        perror(&quot;fork failed&quot;);
        return 1;
    } else if (child_pid == 0) {
        // Child process code
        printf(&quot;Child process: PID = %d\n&quot;, getpid());
    } else {
        // Parent process code
        printf(&quot;Parent process: Child&apos;s PID = %d\n&quot;, child_pid);
    }
    
    return 0;
}


In this example, the fork() system call creates a new process by duplicating the calling process. The kernel handles the complex tasks of:

  Creating a new process control block
  Allocating process resources
  Copying parent’s memory space (with copy-on-write optimization)
  Scheduling the new process for execution




Memory Management

Memory management controls how processes access memory, implementing virtual memory and managing physical RAM allocation.

Memory Hierarchy


  
    graph TD
      A[User Application] --&amp;gt; B[Virtual Address Space]
      B --&amp;gt; C[Page Tables]
      
      C --&amp;gt; D[Physical RAM]
      C --&amp;gt; E[Swap Space]
      
      F[TLB - Translation Lookaside Buffer] --- C
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ef9a9a,stroke:#333,stroke-width:1px
      style F fill:#ce93d8,stroke:#333,stroke-width:1px
  


Key Components:


  Page Tables: Map virtual addresses to physical addresses
  Demand Paging: Loads pages into memory only when needed
  Memory Allocators:
    
      Buddy Allocator: For physical page allocation
      Slab Allocator: For kernel objects of fixed sizes
    
  
  Virtual Memory Areas (VMAs): Track process memory regions
  Out-of-Memory (OOM) Killer: Terminates processes when memory is critically low


Example: Memory Information

# Display comprehensive memory usage information
$ free -h
               total        used        free      shared  buff/cache   available
Mem:            15Gi       4.5Gi       6.2Gi       625Mi       4.9Gi        10Gi
Swap:          8.0Gi          0B       8.0Gi

# Examine kernel memory parameters
$ sysctl vm.swappiness
vm.swappiness = 60

# Analyze a process&apos;s memory maps
$ cat /proc/1234/maps
00400000-00452000 r-xp 00000000 08:02 173521      /usr/bin/example
00651000-00652000 r--p 00051000 08:02 173521      /usr/bin/example
...

# Monitor page faults and memory operations
$ vmstat 1
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 2  0      0 6382888  95056 4915476    0    0    12    17    0    0  5  1 93  1  0




File System Layer

The Linux file system layer provides a unified interface for accessing various file systems while maintaining a consistent API for applications.

Architecture:


  
    graph TD
      A[System Calls: open, read, write, close, etc.]
      A --&amp;gt; B[Virtual File System - VFS]
      
      B --&amp;gt; C[File System Types]
      C --&amp;gt; D[ext4]
      C --&amp;gt; E[Btrfs]
      C --&amp;gt; F[XFS]
      C --&amp;gt; G[NFS]
      C --&amp;gt; H[...]
      
      B --&amp;gt; I[Buffer Cache]
      I --&amp;gt; J[Block I/O Layer]
      J --&amp;gt; K[Device Drivers]
      K --&amp;gt; L[Storage Hardware]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ffcc80,stroke:#333,stroke-width:1px
      style F fill:#ffcc80,stroke:#333,stroke-width:1px
      style G fill:#ffcc80,stroke:#333,stroke-width:1px
      style H fill:#ffcc80,stroke:#333,stroke-width:1px
      style I fill:#ce93d8,stroke:#333,stroke-width:1px
      style J fill:#ef9a9a,stroke:#333,stroke-width:1px
      style K fill:#80deea,stroke:#333,stroke-width:1px
      style L fill:#f5f5f5,stroke:#333,stroke-width:1px
  


Key Concepts:


  Virtual File System (VFS): Abstract layer that provides a common interface
  Inodes: Data structures containing file metadata
  Dentries: Directory entry cache for pathname lookup optimization
  Mount Points: Connection points for file systems into the unified hierarchy
  Page Cache: Improves performance by caching file data in memory


Linux File System Operations

// Simplified example of reading from a file using system calls
#include &amp;lt;fcntl.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;

int main() {
    int fd;
    char buffer[128];
    ssize_t bytes_read;
    
    // Open file - kernel traverses the VFS
    fd = open(&quot;/etc/hostname&quot;, O_RDONLY);
    if (fd == -1) {
        perror(&quot;Failed to open file&quot;);
        return 1;
    }
    
    // Read file - kernel accesses the specific file system implementation
    bytes_read = read(fd, buffer, sizeof(buffer) - 1);
    if (bytes_read &amp;gt; 0) {
        buffer[bytes_read] = &apos;\0&apos;;
        printf(&quot;Hostname: %s&quot;, buffer);
    }
    
    // Close file - kernel cleans up file descriptors
    close(fd);
    return 0;
}


This example demonstrates how user applications interact with the kernel’s file system layer through system calls, which are then routed through the VFS to the specific file system implementation (e.g., ext4, XFS) handling the requested file.



Device Drivers

Device drivers are the interface between the Linux kernel and hardware devices, enabling the kernel to communicate with a wide range of hardware.

Driver Architecture:


  
    graph TD
      A[Kernel Subsystems] --&amp;gt; B[Device Driver Interface]
      
      subgraph &quot;Device Drivers&quot;
        B --&amp;gt; C[Character Drivers]
        B --&amp;gt; D[Block Drivers]
        B --&amp;gt; E[Network Drivers]
        B --&amp;gt; F[USB Drivers]
        B --&amp;gt; G[Input Drivers]
        B --&amp;gt; H[GPU Drivers]
      end
      
      C --&amp;gt; I[Hardware Devices]
      D --&amp;gt; I
      E --&amp;gt; I
      F --&amp;gt; I
      G --&amp;gt; I
      H --&amp;gt; I
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#64b5f6,stroke:#333,stroke-width:1px
      style E fill:#64b5f6,stroke:#333,stroke-width:1px
      style F fill:#64b5f6,stroke:#333,stroke-width:1px
      style G fill:#64b5f6,stroke:#333,stroke-width:1px
      style H fill:#64b5f6,stroke:#333,stroke-width:1px
      style I fill:#f5f5f5,stroke:#333,stroke-width:1px
  


Driver Types:


  Character Device Drivers:
    
      For devices that are accessed as a stream of bytes (e.g., serial ports, keyboards)
      Accessed through special files in /dev
      Examples: /dev/tty (terminals), /dev/random (random number generator)
    
  
  Block Device Drivers:
    
      For devices that handle data in fixed-size blocks (e.g., hard drives, SSDs)
      Support random access to data blocks
      Examples: /dev/sda (SATA disk), /dev/nvme0n1 (NVMe SSD)
    
  
  Network Device Drivers:
    
      For network interfaces (e.g., Ethernet cards, Wi-Fi adapters)
      Interface with the kernel’s networking stack
      Configured through interfaces like eth0, wlan0
    
  


Working with Kernel Modules:

Device drivers in Linux are typically implemented as loadable kernel modules, allowing dynamic loading and unloading without rebooting.

# List all loaded kernel modules
$ lsmod
Module                  Size  Used by
bluetooth             610304  0
rfkill                 28672  4 bluetooth
snd_hda_codec_hdmi     61440  1
snd_hda_codec         135168  2 snd_hda_codec_hdmi
...

# Get information about a specific module
$ modinfo bluetooth
filename:       /lib/modules/5.15.0-75-generic/kernel/net/bluetooth/bluetooth.ko
license:        GPL
version:        2.22
description:    Bluetooth Core ver 2.22
author:         Marcel Holtmann &amp;lt;marcel@holtmann.org&amp;gt;
...

# Load a module
$ sudo modprobe i915  # Intel graphics driver

# Unload a module
$ sudo rmmod bluetooth


Device Driver Development Example:

This is a simplified example of a character device driver:

#include &amp;lt;linux/module.h&amp;gt;
#include &amp;lt;linux/kernel.h&amp;gt;
#include &amp;lt;linux/fs.h&amp;gt;
#include &amp;lt;linux/cdev.h&amp;gt;
#include &amp;lt;linux/device.h&amp;gt;
#include &amp;lt;linux/uaccess.h&amp;gt;

static int device_open(struct inode *, struct file *);
static int device_release(struct inode *, struct file *);
static ssize_t device_read(struct file *, char *, size_t, loff_t *);
static ssize_t device_write(struct file *, const char *, size_t, loff_t *);

static struct file_operations fops = {
    .open = device_open,
    .release = device_release,
    .read = device_read,
    .write = device_write
};

// Implementation of driver functions...

static int __init simple_init(void) {
    // Register character device
    printk(KERN_INFO &quot;Simple driver: Initializing\n&quot;);
    return 0;
}

static void __exit simple_exit(void) {
    // Unregister character device
    printk(KERN_INFO &quot;Simple driver: Exiting\n&quot;);
}

module_init(simple_init);
module_exit(simple_exit);

MODULE_LICENSE(&quot;GPL&quot;);
MODULE_AUTHOR(&quot;Example Author&quot;);
MODULE_DESCRIPTION(&quot;A simple character device driver&quot;);




Networking Stack

The Linux networking stack is a sophisticated subsystem that handles network communication across various protocols and interfaces.

Networking Architecture:


  
    graph TD
      A[User Applications] --&amp;gt; B[Socket Interface]
      
      subgraph &quot;Networking Stack&quot;
        B --&amp;gt; C[Socket Layer]
        C --&amp;gt; D[Transport Protocols: TCP, UDP, SCTP]
        D --&amp;gt; E[Internet Protocols: IPv4, IPv6, ICMP]
        E --&amp;gt; F[Routing &amp;amp; Firewall]
        F --&amp;gt; G[Network Device Interface]
      end
      
      G --&amp;gt; H[Network Device Drivers]
      H --&amp;gt; I[Network Hardware]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#ef9a9a,stroke:#333,stroke-width:1px
      style G fill:#9fa8da,stroke:#333,stroke-width:1px
      style H fill:#80deea,stroke:#333,stroke-width:1px
      style I fill:#f5f5f5,stroke:#333,stroke-width:1px
  


Key Components:


  Socket Interface: API for applications to access network services
  Protocol Implementations: TCP, UDP, IP, ICMP, etc.
  Network Device Interface: Infrastructure for network device drivers
  Netfilter: Framework for packet filtering, network address translation (NAT)
  Routing Subsystem: Determines how packets are forwarded
  Network Namespaces: Virtualization for network resources


Socket Programming Example:

#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;

int main() {
    int socket_fd;
    struct sockaddr_in server_addr;
    char buffer[1024] = &quot;Hello from client&quot;;
    
    // Create socket
    socket_fd = socket(AF_INET, SOCK_STREAM, 0);
    if (socket_fd &amp;lt; 0) {
        perror(&quot;Socket creation failed&quot;);
        return 1;
    }
    
    // Initialize server address structure
    memset(&amp;amp;server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(8080);
    inet_pton(AF_INET, &quot;127.0.0.1&quot;, &amp;amp;server_addr.sin_addr);
    
    // Connect to server
    if (connect(socket_fd, (struct sockaddr*)&amp;amp;server_addr, sizeof(server_addr)) &amp;lt; 0) {
        perror(&quot;Connection failed&quot;);
        return 1;
    }
    
    // Send message to server
    send(socket_fd, buffer, strlen(buffer), 0);
    printf(&quot;Message sent\n&quot;);
    
    close(socket_fd);
    return 0;
}


When this program runs, the socket system call initiates a complex chain of events in the kernel:

  A socket structure is allocated and initialized
  Protocol-specific operations are set up (TCP in this case)
  A file descriptor is returned to the application
  Subsequent operations (connect, send) invoke specific protocol handlers




Interprocess Communication (IPC)

Linux provides various mechanisms for processes to communicate with each other.

IPC Mechanisms:


  
    
      IPC Mechanism
      Characteristics
      Use Cases
    
    
      Pipes
      Unidirectional, related processes, FIFO queue
      Shell pipelines, parent-child communication
    
    
      Named Pipes (FIFOs)
      Like pipes but accessible via filesystem path
      Communication between unrelated processes
    
    
      Message Queues
      Structured messages with types, persistent
      Client-server applications, event handling
    
    
      Shared Memory
      Fast, requires synchronization
      High-performance data sharing, databases
    
    
      Semaphores
      Counting mechanism for synchronization
      Controlling access to shared resources
    
    
      Sockets
      Network-transparent, flexible
      Network communication, local process communication
    
    
      Signals
      Asynchronous notifications
      Process termination, error handling
    
  


Example: Pipe Communication

#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;string.h&amp;gt;

int main() {
    int pipe_fd[2];
    pid_t child_pid;
    char message[] = &quot;Message from parent&quot;;
    char buffer[100];
    
    // Create pipe
    if (pipe(pipe_fd) == -1) {
        perror(&quot;Pipe creation failed&quot;);
        return 1;
    }
    
    // Create child process
    child_pid = fork();
    
    if (child_pid == -1) {
        perror(&quot;Fork failed&quot;);
        return 1;
    }
    
    if (child_pid == 0) {
        // Child process
        close(pipe_fd[1]);  // Close write end
        
        // Read from pipe
        read(pipe_fd[0], buffer, sizeof(buffer));
        printf(&quot;Child received: %s\n&quot;, buffer);
        
        close(pipe_fd[0]);
    } else {
        // Parent process
        close(pipe_fd[0]);  // Close read end
        
        // Write to pipe
        write(pipe_fd[1], message, strlen(message) + 1);
        printf(&quot;Parent sent message\n&quot;);
        
        close(pipe_fd[1]);
    }
    
    return 0;
}






Kernel Space vs User Space

In Linux, memory and execution modes are divided into two distinct domains: kernel space and user space. This separation is fundamental to system security and stability.

Memory and Protection Rings


  
    graph TD
      subgraph &quot;Ring 0 (Kernel Mode)&quot;
        A[Kernel Code]
        B[Device Drivers]
        C[Core Kernel Services]
      end
      
      subgraph &quot;Ring 3 (User Mode)&quot;
        D[User Applications]
        E[Libraries]
        F[Daemons]
      end
      
      D -- &quot;System Calls&quot; --&amp;gt; A
      E -- &quot;System Calls&quot; --&amp;gt; A
      F -- &quot;System Calls&quot; --&amp;gt; A
      
      style A fill:#64b5f6,stroke:#333,stroke-width:1px
      style B fill:#64b5f6,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#a5d6a7,stroke:#333,stroke-width:1px
      style E fill:#a5d6a7,stroke:#333,stroke-width:1px
      style F fill:#a5d6a7,stroke:#333,stroke-width:1px
  


Key Differences


  
    
      Characteristic
      Kernel Space
      User Space
    
    
      Access Level
      Unrestricted access to hardware and memory
      Limited access through system calls
    
    
      Memory Addressing
      Can access all physical and virtual memory
      Can only access its own virtual address space
    
    
      Protection
      No protection - errors can crash system
      Protected - errors confined to process
    
    
      CPU Mode
      Privileged mode (Ring 0)
      Unprivileged mode (Ring 3)
    
    
      Code Running
      Kernel code, drivers, essential services
      Applications, libraries, utilities
    
    
      Interrupt Handling
      Can handle hardware interrupts directly
      Cannot handle interrupts
    
  


Crossing the Boundary: System Calls

System calls are the controlled interface between user space and kernel space, providing a secure way for applications to request kernel services.


  
    sequenceDiagram
        participant UA as User Application
        participant UL as User Libraries (glibc)
        participant SC as System Call Interface
        participant K as Kernel Services
        
        UA-&amp;gt;&amp;gt;UL: Call library function(e.g., fopen())
        UL-&amp;gt;&amp;gt;SC: Invoke system call(e.g., open())
        Note over UL,SC: CPU switches to kernel mode
        SC-&amp;gt;&amp;gt;K: Execute kernel function
        K-&amp;gt;&amp;gt;SC: Return result
        Note over SC,UL: CPU switches back to user mode
        SC-&amp;gt;&amp;gt;UL: Return to library
        UL-&amp;gt;&amp;gt;UA: Return to application
  


Example: Tracing System Calls

We can observe system calls using the strace utility:

# Trace system calls made by the &apos;ls&apos; command
$ strace ls
execve(&quot;/usr/bin/ls&quot;, [&quot;ls&quot;], 0x7ffc82dff800 /* 55 vars */) = 0
brk(NULL)                               = 0x55de6db64000
arch_prctl(0x3001 /* ARCH_??? */, 0x7fff4acaff00) = -1 EINVAL
access(&quot;/etc/ld.so.preload&quot;, R_OK)      = -1 ENOENT
openat(AT_FDCWD, &quot;/etc/ld.so.cache&quot;, O_RDONLY|O_CLOEXEC) = 3
...
openat(AT_FDCWD, &quot;.&quot;, O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 3
getdents64(3, /* 20 entries */, 32768)  = 704
getdents64(3, /* 0 entries */, 32768)   = 0
close(3)                                = 0
fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 1), ...}) = 0
write(1, &quot;file1.txt  file2.txt  folder1  f&quot;..., 40) = 40
close(1)                                = 0
close(2)                                = 0
exit_group(0)                           = ?
+++ exited with 0 +++


This output shows how even a simple command like ls makes numerous system calls to interact with the kernel for operations like file access and directory reading.





Advanced Kernel Features

Kernel Modules

Kernel modules are dynamically loadable components that extend the kernel’s functionality without requiring a system reboot.

Module Management


  Kernel Module Lifecycle
  Kernel modules are object files (.ko) that can be loaded and unloaded at runtime, providing a flexible way to add functionality to the kernel.
  
  Key module management commands:
  
    lsmod: List currently loaded modules
    modinfo: Display information about a module
    modprobe: Load a module and its dependencies
    rmmod: Unload a module
    insmod: Load a module directly (without dependency handling)
  
  
  Modules are typically stored in /lib/modules/$(uname -r)/kernel/


Module Parameters

Modules can be configured through parameters at load time:

# Load module with custom parameters
$ sudo modprobe iwlwifi power_save=1 disable_11ax=0

# View current module parameters
$ systool -v -m iwlwifi
    power_save              = &quot;1&quot;
    disable_11ax            = &quot;0&quot;
    
# Set parameters through sysfs
$ echo 0 | sudo tee /sys/module/iwlwifi/parameters/power_save


Namespaces

Namespaces isolate system resources, forming the foundation for container technologies.

Types of Namespaces:


  
    
      Namespace
      Resources Isolated
      Example Command
    
    
      PID
      Process IDs
      unshare --pid --fork bash
    
    
      Network
      Network interfaces, routing tables, firewall rules
      ip netns add mynet
    
    
      Mount
      Mount points
      unshare --mount bash
    
    
      UTS
      Hostname and domain name
      unshare --uts bash
    
    
      IPC
      System V IPC objects, POSIX message queues
      unshare --ipc bash
    
    
      User
      User and group IDs
      unshare --map-root-user --user bash
    
    
      Cgroup
      Control group root directory
      unshare --cgroup bash
    
  


Control Groups (cgroups)

Control groups allow the kernel to allocate and limit resources among process groups.

Using cgroups

# Create a new cgroup for a database service
$ sudo cgcreate -g memory,cpu:database

# Set memory limit to 2GB
$ sudo cgset -r memory.limit_in_bytes=2G database

# Set CPU quota (40% of one CPU core)
$ sudo cgset -r cpu.cfs_quota_us=40000 database
$ sudo cgset -r cpu.cfs_period_us=100000 database

# Add a process to the cgroup
$ sudo cgclassify -g memory,cpu:database $(pgrep mysqld)

# Check resource usage
$ cat /sys/fs/cgroup/memory/database/memory.usage_in_bytes


Linux Capabilities

Capabilities break down the traditional root/non-root privilege binary into finer-grained permissions.

Working with Capabilities

# View capabilities of a process
$ getpcaps $$
Capabilities for `15632&apos;: = cap_chown,cap_dac_override,...

# View capabilities of a binary
$ getcap /usr/bin/ping
/usr/bin/ping = cap_net_raw+ep

# Add capabilities to a binary
$ sudo setcap cap_net_admin+ep /usr/local/bin/my_network_tool

# Run a process with specific capabilities
$ capsh --caps=&quot;cap_net_admin+ep&quot; --


Performance Monitoring and Tracing

The Linux kernel provides sophisticated tools for monitoring and tracing system behavior.

Key Tracing Frameworks:


  ftrace: Function tracer built into the kernel
  perf: Performance analysis tool
  eBPF: Extended Berkeley Packet Filter for efficient in-kernel programmability
  SystemTap: Scripting language for kernel instrumentation
  LTTng: Linux Trace Toolkit, next generation


Example: Using perf for CPU profiling

# Record performance data for a command
$ perf record -F 99 -g ./my_application

# Analyze the recorded data
$ perf report

# Live monitoring of CPU events
$ perf top

# Count system-wide events for 10 seconds
$ perf stat -a sleep 10






Kernel Security Features

Security Mechanisms

Linux incorporates multiple layers of security within the kernel itself.

Core Security Features:


  
    graph TD
      A[Linux Kernel Security]
      
      A --&amp;gt; B[Access Control]
      B --&amp;gt; B1[Discretionary Access Control]
      B --&amp;gt; B2[Mandatory Access Control]
      B --&amp;gt; B3[Capabilities]
      
      A --&amp;gt; C[Memory Protection]
      C --&amp;gt; C1[Address Space Layout Randomization]
      C --&amp;gt; C2[Data Execution Prevention]
      C --&amp;gt; C3[Stack Canaries]
      
      A --&amp;gt; D[Network Security]
      D --&amp;gt; D1[Netfilter Framework]
      D --&amp;gt; D2[Network Namespaces]
      D --&amp;gt; D3[BPF Filtering]
      
      A --&amp;gt; E[Other Security Features]
      E --&amp;gt; E1[Seccomp]
      E --&amp;gt; E2[Integrity Measurement Architecture]
      E --&amp;gt; E3[Kernel Lockdown Mode]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
  


SELinux and AppArmor

These are Mandatory Access Control (MAC) systems that enforce security policies beyond traditional Unix permissions.

SELinux Example:

# Check if SELinux is enabled
$ getenforce
Enforcing

# View SELinux context of a file
$ ls -Z /etc/passwd
system_u:object_r:passwd_file_t:s0 /etc/passwd

# View SELinux context of a process
$ ps -Z -p $$
unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 3842 pts/0 bash


AppArmor Example:

# Check AppArmor status
$ aa-status
apparmor module is loaded.
14 profiles are loaded.
13 profiles are in enforce mode.
1 profiles are in complain mode.
...

# Put profile in complain mode (log but don&apos;t block)
$ sudo aa-complain /usr/bin/firefox

# Put profile in enforce mode
$ sudo aa-enforce /etc/apparmor.d/usr.bin.firefox


Seccomp

Seccomp (secure computing mode) restricts the system calls that a process can make.

# Run a shell with only limited syscalls allowed
$ sudo docker run --security-opt seccomp=/path/to/seccomp.json alpine sh

# Example of a minimal seccomp filter in C
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;seccomp.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;

int main() {
    scmp_filter_ctx ctx;
    
    // Initialize filter in whitelist mode
    ctx = seccomp_init(SCMP_ACT_KILL);
    
    // Allow minimal syscalls
    seccomp_rule_add(ctx, SCMP_ACT_ALLOW, SCMP_SYS(read), 0);
    seccomp_rule_add(ctx, SCMP_ACT_ALLOW, SCMP_SYS(write), 0);
    seccomp_rule_add(ctx, SCMP_ACT_ALLOW, SCMP_SYS(exit), 0);
    
    // Load the filter
    seccomp_load(ctx);
    
    printf(&quot;Seccomp filter loaded. Only read/write/exit syscalls allowed.\n&quot;);
    
    // This execve call will be blocked
    execve(&quot;/bin/ls&quot;, NULL, NULL);
    
    return 0;
}






Kernel Monitoring and Tuning

The /proc Filesystem

The /proc filesystem provides a window into the kernel’s view of the system.

Key /proc Files:


  Important /proc Files
  
    /proc/cpuinfo: Detailed CPU information
    /proc/meminfo: Memory usage statistics
    /proc/loadavg: System load averages
    /proc/net/: Networking statistics and configuration
    /proc/sys/: Kernel parameters that can be tuned
    /proc/[pid]/: Information about specific processes
    /proc/interrupts: IRQ usage statistics
    /proc/filesystems: Supported filesystems
    /proc/diskstats: Disk I/O statistics
    /proc/version: Kernel version information
  


Kernel Parameters with sysctl

The sysctl interface allows viewing and modifying kernel parameters at runtime.

Example sysctl Commands:

# List all kernel parameters
$ sudo sysctl -a

# Get specific parameter
$ sysctl vm.swappiness
vm.swappiness = 60

# Set parameter temporarily (until reboot)
$ sudo sysctl -w vm.swappiness=10

# Make setting persistent
$ echo &quot;vm.swappiness=10&quot; | sudo tee -a /etc/sysctl.conf
$ sudo sysctl -p  # Load settings from file


Common Kernel Tuning Parameters


  
    
      Parameter
      Description
      Typical Use Case
    
    
      vm.swappiness
      Controls how aggressively memory is swapped to disk
      Lower for database servers (e.g., 10-30) to reduce disk I/O
    
    
      fs.file-max
      Maximum number of file handles
      Increase for servers handling many connections
    
    
      net.core.somaxconn
      Maximum socket connection backlog
      Increase for high-traffic web servers
    
    
      net.ipv4.tcp_fin_timeout
      How long to keep sockets in FIN-WAIT-2 state
      Reduce to free up resources faster in high-connection environments
    
    
      kernel.pid_max
      Maximum process ID number
      Increase for systems running many processes
    
    
      vm.dirty_ratio
      Percentage of memory that can be filled with dirty pages before flushing
      Adjust for I/O-intensive workloads
    
  


Performance Monitoring Tools


  Essential Linux Performance Tools
  
    top/htop: Interactive process viewer
    vmstat: Virtual memory statistics
    iostat: CPU and disk I/O statistics
    mpstat: Multi-processor statistics
    sar: System activity reporter with historical data
    perf: Performance analysis with CPU profiling
    strace: Trace system calls and signals
    tcpdump: Network packet analyzer
    netstat/ss: Network statistics
    ftrace: Kernel function tracer
  


Example: Using sar to Monitor System Activity

# Install sar (if not already available)
$ sudo apt install sysstat

# Enable data collection
$ sudo systemctl enable sysstat
$ sudo systemctl start sysstat

# View CPU statistics from today
$ sar -u

# View memory usage with 2-second intervals for 5 samples
$ sar -r 2 5

# View historical disk I/O from yesterday
$ sar -b -f /var/log/sysstat/sa$(date -d yesterday +%d)






Kernel Compilation and Customization

For advanced users, compiling a custom kernel provides maximum control over the system.

Why Compile a Custom Kernel?


  Add specific features not in the standard kernel
  Remove unnecessary components to reduce size
  Optimize for specific hardware
  Apply custom patches
  Learn about kernel internals


Basic Kernel Compilation Process

# Install required packages
$ sudo apt install build-essential libncurses-dev bison flex libssl-dev libelf-dev

# Download kernel source
$ wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.tar.xz
$ tar xf linux-5.15.tar.xz
$ cd linux-5.15

# Copy current configuration as starting point
$ cp /boot/config-$(uname -r) .config

# Customize configuration
$ make menuconfig

# Compile the kernel (using all CPU cores)
$ make -j$(nproc)

# Install modules
$ sudo make modules_install

# Install the kernel
$ sudo make install

# Update bootloader
$ sudo update-grub


Kernel Configuration Options

The kernel has thousands of configuration options. Some important categories:


  Processor type and features: CPU-specific optimizations
  Power management: Options for saving power
  Networking support: Protocols and hardware support
  Device drivers: Hardware-specific drivers
  File systems: Support for various file systems
  Security options: Security features and hardening
  Virtualization: Hypervisor and guest support






Key Points


  💡 Essential Kernel Concepts
  
    
      Core Functions
      - Process scheduling and management
      - Memory management with virtual memory
      - Device drivers for hardware interaction
      - File systems for data organization
      - Networking stack for communications
    
    
      Architecture
      - Monolithic design with modular capabilities
      - Kernel space/user space separation
      - System calls as the interface between spaces
      - Preemptible for better responsiveness
    
    
      Advanced Features
      - Loadable kernel modules for extensibility
      - Namespaces and cgroups for resource isolation
      - Security mechanisms like SELinux, capabilities
      - Rich monitoring and tracing capabilities
    
  






Reference

  The Linux Kernel Archives
  Linux Kernel Documentation
  Linux Kernel Development (3rd Edition) by Robert Love
  Understanding the Linux Kernel by Daniel P. Bovet
  Red Hat - What is the Linux Kernel
  The Linux Programming Interface by Michael Kerrisk
  LWN.net - Linux Weekly News
  Kernel Newbies

",
            "wordcount": "5571",
            "inLanguage": "en",
            "dateCreated": "2025-01-20/",
            "datePublished": "2025-01-20/",
            "dateModified": "2025-01-20/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "LINUX",
            "articleSection": "LINUX",
            "keywords": ["linux","kernel","operating-system","system-architecture","resource-management","device-drivers"]
        }
        </script>
    </body>
</html>
