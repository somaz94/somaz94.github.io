<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>HashiCorp Packer: Automated Multi-Platform Image Building and Golden Image Creation | somaz</title>
    <meta name="description" content="Comprehensive tutorial covering Packer installation, configuration, template creation, and automated image building for AWS, GCP, Azure, and local environmen...">
    
        <meta name="keywords" content="packer, hashicorp, golden-images, infrastructure-as-code, automation, aws-ami, gcp-images, vagrant-boxes, multi-platform, hcl2">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="HashiCorp Packer: Automated Multi-Platform Image Building and Golden Image Creation | somaz">
    <meta name="twitter:description" content="Comprehensive tutorial covering Packer installation, configuration, template creation, and automated image building for AWS, GCP, Azure, and local environmen...">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1755135220/packer_lrlizr.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/iac/what-is-packer/">
    <meta property="og:title" content="HashiCorp Packer: Automated Multi-Platform Image Building and Golden Image Creation | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1755135220/packer_lrlizr.png">
    <meta property="og:description" content="Comprehensive tutorial covering Packer installation, configuration, template creation, and automated image building for AWS, GCP, Azure, and local environmen...">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/iac/what-is-packer/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-09-20T00:00:00+00:00">
                            


September 20, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>11 min to read</span>
                </p>
                <h1 class="post-title">HashiCorp Packer: Automated Multi-Platform Image Building and Golden Image Creation</h1>
                <p class="post-subtitle">Complete guide to building consistent machine images across cloud platforms using Packer with HCL2 and JSON templates</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1755135220/packer_lrlizr.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>In modern infrastructure management, creating <strong>consistent and reproducible machine images</strong> across multiple platforms remains a critical challenge.</p>

<p><strong>HashiCorp Packer</strong> addresses this need by providing a powerful automation tool for building identical machine images from a single source template across various platforms.</p>

<p>This comprehensive guide explores <strong>Packer’s capabilities for creating Golden Images</strong> - standardized, pre-configured machine images that serve as the foundation for consistent deployments.</p>

<p>We’ll cover everything from basic installation to advanced multi-platform image building, including <strong>integration with Vagrant, AWS, GCP, and Azure</strong>.</p>

<p>Packer excels at <strong>Infrastructure as Code principles</strong>, enabling teams to version control their image configurations and automate the entire image building pipeline.</p>

<p>When combined with <strong>Terraform and Vagrant</strong>, Packer becomes an essential component of complete infrastructure automation workflows.</p>

<p><br /></p>

<hr />

<h2 id="what-is-hashicorp-packer">What is HashiCorp Packer?</h2>

<p>Packer is an <strong>open-source tool for creating identical machine images for multiple platforms from a single source configuration</strong>. It automates the process of building, provisioning, and packaging machine images, making it ideal for creating “Golden Images” that teams can use consistently across their cloud infrastructure.</p>

<p><br /></p>

<h3 id="core-capabilities">Core Capabilities:</h3>

<ul>
  <li><strong>Multi-Platform Support</strong>: AWS, GCP, Azure, VMware, VirtualBox, Docker, and more</li>
  <li><strong>Single Source Template</strong>: One configuration builds images for all platforms</li>
  <li><strong>Automated Provisioning</strong>: Integration with Shell, Ansible, Puppet, Chef</li>
  <li><strong>Immutable Infrastructure</strong>: Pre-configured images reduce deployment time</li>
  <li><strong>CI/CD Integration</strong>: Automated image building in deployment pipelines</li>
  <li><strong>Template Flexibility</strong>: Support for both JSON and HCL2 configurations</li>
</ul>

<p><br /></p>

<h3 id="key-benefits">Key Benefits:</h3>

<h4 id="golden-image-advantages">Golden Image Advantages</h4>
<ul>
  <li>Consistent base configurations across environments</li>
  <li>Faster deployment times (pre-configured images)</li>
  <li>Reduced configuration drift</li>
  <li>Enhanced security through standardized hardening</li>
  <li>Simplified compliance and auditing</li>
  <li>Version-controlled image definitions</li>
</ul>

<p><br /></p>

<hr />

<h2 id="installation-and-setup">Installation and Setup</h2>

<p><br /></p>

<h3 id="step-1-install-packer">Step 1: Install Packer</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># CentOS/RHEL Installation</span>
<span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> yum-utils
<span class="nb">sudo </span>yum-config-manager <span class="nt">--add-repo</span> https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
<span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>packer

<span class="c"># Ubuntu/Debian Installation</span>
wget <span class="nt">-O-</span> https://apt.releases.hashicorp.com/gpg | <span class="nb">sudo </span>gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /usr/share/keyrings/hashicorp-archive-keyring.gpg
<span class="nb">echo</span> <span class="s2">"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/hashicorp.list
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>packer

<span class="c"># macOS Installation</span>
brew tap hashicorp/tap
brew <span class="nb">install </span>hashicorp/tap/packer

<span class="c"># Verify installation</span>
packer version
</code></pre></div></div>

<p><br /></p>

<h3 id="step-2-install-supporting-tools">Step 2: Install Supporting Tools</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># For local virtualization (KVM/QEMU)</span>
<span class="c"># CentOS/RHEL</span>
<span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>qemu libvirt libvirt-devel ruby-devel gcc qemu-kvm libguestfs-tools

<span class="c"># Ubuntu/Debian</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> qemu qemu-kvm libvirt-daemon libvirt-clients bridge-utils virt-manager

<span class="c"># For Vagrant integration</span>
<span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>vagrant  <span class="c"># or apt install vagrant</span>
vagrant plugin <span class="nb">install </span>vagrant-libvirt
vagrant plugin <span class="nb">install </span>vagrant-mutate

<span class="c"># For cloud provider CLI tools</span>
<span class="c"># AWS CLI</span>
curl <span class="s2">"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip"</span> <span class="nt">-o</span> <span class="s2">"awscliv2.zip"</span>
unzip awscliv2.zip <span class="o">&amp;&amp;</span> <span class="nb">sudo</span> ./aws/install

<span class="c"># Google Cloud SDK</span>
curl https://sdk.cloud.google.com | bash
<span class="nb">exec</span> <span class="nt">-l</span> <span class="nv">$SHELL</span>
gcloud init
</code></pre></div></div>

<p><br /></p>

<h3 id="step-3-enable-command-autocompletion">Step 3: Enable Command Autocompletion</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable Packer autocompletion</span>
packer <span class="nt">-autocomplete-install</span>

<span class="c"># Reload shell configuration</span>
<span class="nb">source</span> ~/.bashrc  <span class="c"># or ~/.zshrc</span>

<span class="c"># Test autocompletion</span>
packer &lt;TAB&gt;&lt;TAB&gt;
</code></pre></div></div>

<p><br /></p>

<h3 id="step-4-resolve-binary-conflicts-if-needed">Step 4: Resolve Binary Conflicts (If Needed)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check for conflicting packer binaries</span>
which packer
<span class="nb">ls</span> <span class="nt">-la</span> /usr/sbin/packer

<span class="c"># If cracklib-packer conflict exists</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /usr/sbin/packer
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/bin/packer /usr/sbin/packer

<span class="c"># Verify correct packer is active</span>
packer version
<span class="c"># Should show: Packer v1.x.x</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="packer-cli-commands">Packer CLI Commands</h2>

<p><br /></p>

<h3 id="core-commands-overview">Core Commands Overview</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Essential Packer commands</span>
packer init        <span class="c"># Install missing plugins</span>
packer validate    <span class="c"># Validate template syntax</span>
packer build       <span class="c"># Build images from template</span>
packer inspect     <span class="c"># Show template components</span>
packer <span class="nb">fmt</span>         <span class="c"># Format HCL2 templates</span>
packer console     <span class="c"># Interactive console for testing</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="command-packer-init">Command: <code class="language-plaintext highlighter-rouge">packer init</code></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Initialize plugins for a template</span>
packer init <span class="nt">-h</span>

Usage: packer init <span class="o">[</span>options] <span class="o">[</span>config.pkr.hcl|folder/]

  Install all the missing plugins required <span class="k">in </span>a Packer config.
  This is the first <span class="nb">command </span>that should be executed when working 
  with a new or existing template.

Options:
  <span class="nt">-upgrade</span>                     Update installed plugins to latest version
  
<span class="c"># Example usage</span>
packer init <span class="nb">.</span>
packer init templates/
packer init <span class="nt">-upgrade</span> aws-template.pkr.hcl
</code></pre></div></div>

<p><br /></p>

<h3 id="command-packer-build">Command: <code class="language-plaintext highlighter-rouge">packer build</code></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Build images from templates</span>
packer build <span class="nt">-h</span>

Usage: packer build <span class="o">[</span>options] TEMPLATE

  Execute multiple builds <span class="k">in </span>parallel as defined <span class="k">in </span>the template.
  Various artifacts created by the template will be outputted.

Options:
  <span class="nt">-color</span><span class="o">=</span><span class="nb">false                  </span>Disable color output
  <span class="nt">-debug</span>                        Enable debug mode <span class="k">for </span>builds
  <span class="nt">-except</span><span class="o">=</span>foo,bar,baz          Run all builds except these
  <span class="nt">-only</span><span class="o">=</span>foo,bar,baz            Build only specified builds
  <span class="nt">-force</span>                       Force build, delete existing artifacts
  <span class="nt">-parallel-builds</span><span class="o">=</span>1           Number of parallel builds <span class="o">(</span>0 <span class="o">=</span> no limit<span class="o">)</span>
  <span class="nt">-var</span> <span class="s1">'key=value'</span>             Template variables
  <span class="nt">-var-file</span><span class="o">=</span>path               Variable file <span class="o">(</span>JSON/HCL2<span class="o">)</span>

<span class="c"># Example usage</span>
packer build template.pkr.hcl
packer build <span class="nt">-var</span> <span class="s1">'region=us-west-2'</span> aws-template.pkr.hcl
packer build <span class="nt">-var-file</span><span class="o">=</span>variables.pkrvars.hcl template.pkr.hcl
packer build <span class="nt">-only</span><span class="o">=</span>amazon-ebs.ubuntu template.pkr.hcl
</code></pre></div></div>

<p><br /></p>

<h3 id="command-packer-validate">Command: <code class="language-plaintext highlighter-rouge">packer validate</code></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Validate template configuration</span>
packer validate template.pkr.hcl
packer validate <span class="nt">-var-file</span><span class="o">=</span>vars.pkrvars.hcl template.pkr.hcl

<span class="c"># Example output for valid template:</span>
<span class="c"># The configuration is valid.</span>

<span class="c"># Example output for invalid template:</span>
<span class="c"># Error: Invalid template syntax</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="command-packer-plugins">Command: <code class="language-plaintext highlighter-rouge">packer plugins</code></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Plugin management commands</span>
packer plugins <span class="nb">install </span>github.com/hashicorp/amazon
packer plugins installed
packer plugins required <span class="nb">.</span>
packer plugins remove github.com/hashicorp/amazon

<span class="c"># List available plugins</span>
packer plugins installed
<span class="c"># Example output:</span>
<span class="c"># github.com/hashicorp/amazon v1.2.1</span>
<span class="c"># github.com/hashicorp/googlecompute v1.0.16</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="template-formats-hcl2-vs-json">Template Formats: HCL2 vs JSON</h2>

<p><br /></p>

<h3 id="modern-hcl2-format-recommended">Modern HCL2 Format (Recommended)</h3>

<p>HCL2 (HashiCorp Configuration Language 2) is the modern template format used across HashiCorp tools. It provides better syntax, modularity, and advanced features compared to JSON.</p>

<script src="https://gist.github.com/somaz94/46b3884c083fdb7f0f0e199288fd8fc9.js"></script>

<p><br /></p>

<script src="https://gist.github.com/somaz94/199ac3a1621cf29907d76924127dcebe.js"></script>

<p><br /></p>

<h3 id="legacy-json-format">Legacy JSON Format</h3>

<script src="https://gist.github.com/somaz94/fd9886e67422563eaec1ff9ef0873b02.js"></script>

<p><br /></p>

<hr />

<h2 id="multi-platform-image-building">Multi-Platform Image Building</h2>

<p><br /></p>

<h3 id="aws-ami-creation">AWS AMI Creation</h3>

<script src="https://gist.github.com/somaz94/8a4d56acfd84f334ef79d226ade9f09f.js"></script>

<p><br /></p>

<h3 id="google-cloud-platform-images">Google Cloud Platform Images</h3>

<script src="https://gist.github.com/somaz94/dbd6559921f1aa1480c1de6c3e02faf0.js"></script>

<p><br /></p>

<h3 id="azure-vm-images">Azure VM Images</h3>

<script src="https://gist.github.com/somaz94/d4691ae961909f5f4aa922322006b6b2.js"></script>

<p><br /></p>

<hr />

<h2 id="vagrant-box-creation">Vagrant Box Creation</h2>

<p><br /></p>

<h3 id="local-vagrant-box-with-qemukvm">Local Vagrant Box with QEMU/KVM</h3>

<script src="https://gist.github.com/somaz94/88ab091d80d75c67e24db2ec4174c493.js"></script>

<p><br /></p>

<h3 id="vagrant-setup-scripts">Vagrant Setup Scripts</h3>

<script src="https://gist.github.com/somaz94/4ecbe1e29f6310f368b0e633442166fd.js"></script>

<p><br /></p>

<hr />

<h2 id="template-migration-and-management">Template Migration and Management</h2>

<p><br /></p>

<h3 id="json-to-hcl2-migration">JSON to HCL2 Migration</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Upgrade existing JSON template to HCL2</span>
packer hcl2_upgrade <span class="nt">-with-annotations</span> template.json

<span class="c"># This creates template.json.pkr.hcl with:</span>
<span class="c"># - Detailed comments</span>
<span class="c"># - Modern HCL2 syntax</span>
<span class="c"># - Variable type definitions</span>
<span class="c"># - Plugin requirements</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="example-migration-process">Example Migration Process</h3>

<script src="https://gist.github.com/somaz94/1491edf93a8470b4a17cf7d570fedc57.js"></script>

<p><br /></p>

<h3 id="template-organization-best-practices">Template Organization Best Practices</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Recommended directory structure</span>
packer-templates/
├── aws/
│   ├── variables.pkrvars.hcl
│   ├── ubuntu.pkr.hcl
│   ├── centos.pkr.hcl
│   └── windows.pkr.hcl
├── gcp/
│   ├── variables.pkrvars.hcl
│   └── ubuntu.pkr.hcl
├── vagrant/
│   ├── ubuntu-box.pkr.hcl
│   └── centos-box.pkr.hcl
├── scripts/
│   ├── common/
│   ├── aws/
│   ├── gcp/
│   └── vagrant/
└── http/
    ├── preseed.cfg
    └── kickstart.cfg
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="advanced-provisioning-strategies">Advanced Provisioning Strategies</h2>

<p><br /></p>

<h3 id="ansible-integration">Ansible Integration</h3>

<script src="https://gist.github.com/somaz94/597fc6f66bca17e007a68ce3e45c0145.js"></script>

<p><br /></p>

<h3 id="docker-image-building">Docker Image Building</h3>

<script src="https://gist.github.com/somaz94/c929d3e2960e5194f3977bf71d630fac.js"></script>

<p><br /></p>

<h3 id="windows-image-building">Windows Image Building</h3>

<script src="https://gist.github.com/somaz94/0f3203347d05436ed12e6ee25988de11.js"></script>

<p><br /></p>

<hr />

<h2 id="cicd-integration-and-automation">CI/CD Integration and Automation</h2>

<p><br /></p>

<h3 id="github-actions-workflow">GitHub Actions Workflow</h3>

<script src="https://gist.github.com/somaz94/d402455815a9602cf846909085f7cf98.js"></script>

<p><br /></p>

<h3 id="jenkins-pipeline">Jenkins Pipeline</h3>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Jenkinsfile</span>
<span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>
    
    <span class="n">environment</span> <span class="o">{</span>
        <span class="n">PACKER_VERSION</span> <span class="o">=</span> <span class="s1">'1.9.4'</span>
        <span class="n">AWS_REGION</span> <span class="o">=</span> <span class="s1">'us-west-2'</span>
    <span class="o">}</span>
    
    <span class="n">parameters</span> <span class="o">{</span>
        <span class="n">choice</span><span class="o">(</span>
            <span class="nl">name:</span> <span class="s1">'BUILD_TYPE'</span><span class="o">,</span>
            <span class="nl">choices:</span> <span class="o">[</span><span class="s1">'validate'</span><span class="o">,</span> <span class="s1">'build'</span><span class="o">,</span> <span class="s1">'build-all'</span><span class="o">],</span>
            <span class="nl">description:</span> <span class="s1">'Type of build to perform'</span>
        <span class="o">)</span>
        <span class="n">choice</span><span class="o">(</span>
            <span class="nl">name:</span> <span class="s1">'TEMPLATE'</span><span class="o">,</span>
            <span class="nl">choices:</span> <span class="o">[</span><span class="s1">'ubuntu'</span><span class="o">,</span> <span class="s1">'centos'</span><span class="o">,</span> <span class="s1">'amazon-linux'</span><span class="o">,</span> <span class="s1">'all'</span><span class="o">],</span>
            <span class="nl">description:</span> <span class="s1">'Template to build'</span>
        <span class="o">)</span>
    <span class="o">}</span>
    
    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Setup'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">script</span> <span class="o">{</span>
                    <span class="c1">// Download and setup Packer</span>
                    <span class="n">sh</span> <span class="s2">"""
                        wget -O packer.zip https://releases.hashicorp.com/packer/${PACKER_VERSION}/packer_${PACKER_VERSION}_linux_amd64.zip
                        unzip -o packer.zip
                        chmod +x packer
                        ./packer version
                    """</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Initialize'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">'./packer init packer/'</span>
            <span class="o">}</span>
        <span class="o">}</span>
        
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Validate'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">script</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">params</span><span class="o">.</span><span class="na">TEMPLATE</span> <span class="o">==</span> <span class="s1">'all'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">sh</span> <span class="s1">'''
                            for template in packer/*.pkr.hcl; do
                                echo "Validating $template"
                                ./packer validate "$template"
                            done
                        '''</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="n">sh</span> <span class="s2">"./packer validate packer/${params.TEMPLATE}.pkr.hcl"</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Build'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">when</span> <span class="o">{</span>
                <span class="n">anyOf</span> <span class="o">{</span>
                    <span class="n">equals</span> <span class="nl">expected:</span> <span class="s1">'build'</span><span class="o">,</span> <span class="nl">actual:</span> <span class="n">params</span><span class="o">.</span><span class="na">BUILD_TYPE</span>
                    <span class="n">equals</span> <span class="nl">expected:</span> <span class="s1">'build-all'</span><span class="o">,</span> <span class="nl">actual:</span> <span class="n">params</span><span class="o">.</span><span class="na">BUILD_TYPE</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">script</span> <span class="o">{</span>
                    <span class="n">withCredentials</span><span class="o">([</span>
                        <span class="n">string</span><span class="o">(</span><span class="nl">credentialsId:</span> <span class="s1">'aws-access-key'</span><span class="o">,</span> <span class="nl">variable:</span> <span class="s1">'AWS_ACCESS_KEY_ID'</span><span class="o">),</span>
                        <span class="n">string</span><span class="o">(</span><span class="nl">credentialsId:</span> <span class="s1">'aws-secret-key'</span><span class="o">,</span> <span class="nl">variable:</span> <span class="s1">'AWS_SECRET_ACCESS_KEY'</span><span class="o">)</span>
                    <span class="o">])</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">params</span><span class="o">.</span><span class="na">TEMPLATE</span> <span class="o">==</span> <span class="s1">'all'</span><span class="o">)</span> <span class="o">{</span>
                            <span class="n">sh</span> <span class="s1">'''
                                for template in packer/*.pkr.hcl; do
                                    echo "Building $template"
                                    ./packer build -var "region=${AWS_REGION}" "$template"
                                done
                            '''</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="n">sh</span> <span class="s2">"./packer build -var 'region=${AWS_REGION}' packer/${params.TEMPLATE}.pkr.hcl"</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        
        <span class="n">stage</span><span class="o">(</span><span class="s1">'Archive Artifacts'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">archiveArtifacts</span> <span class="nl">artifacts:</span> <span class="s1">'manifest.json'</span><span class="o">,</span> <span class="nl">allowEmptyArchive:</span> <span class="kc">true</span>
                <span class="n">publishHTML</span><span class="o">([</span>
                    <span class="nl">allowMissing:</span> <span class="kc">false</span><span class="o">,</span>
                    <span class="nl">alwaysLinkToLastBuild:</span> <span class="kc">true</span><span class="o">,</span>
                    <span class="nl">keepAll:</span> <span class="kc">true</span><span class="o">,</span>
                    <span class="nl">reportDir:</span> <span class="s1">'.'</span><span class="o">,</span>
                    <span class="nl">reportFiles:</span> <span class="s1">'manifest.json'</span><span class="o">,</span>
                    <span class="nl">reportName:</span> <span class="s1">'Packer Build Report'</span>
                <span class="o">])</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="n">post</span> <span class="o">{</span>
        <span class="n">always</span> <span class="o">{</span>
            <span class="n">cleanWs</span><span class="o">()</span>
        <span class="o">}</span>
        <span class="n">success</span> <span class="o">{</span>
            <span class="n">echo</span> <span class="s1">'Packer build completed successfully!'</span>
        <span class="o">}</span>
        <span class="n">failure</span> <span class="o">{</span>
            <span class="n">echo</span> <span class="s1">'Packer build failed!'</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="monitoring-and-logging">Monitoring and Logging</h2>

<p><br /></p>

<h3 id="build-monitoring-script">Build Monitoring Script</h3>

<script src="https://gist.github.com/somaz94/da5af5f52c3a92bae87e4c0eee3999c1.js"></script>

<p><br /></p>

<hr />

<h2 id="best-practices-and-security">Best Practices and Security</h2>

<p><br /></p>

<h3 id="security-hardening-template">Security Hardening Template</h3>

<script src="https://gist.github.com/somaz94/2908eb83950387f99f1e75d38ae68b6c.js"></script>

<p><br /></p>

<h3 id="environment-specific-variables">Environment-Specific Variables</h3>

<script src="https://gist.github.com/somaz94/8c0d90544981a5fb7264e5671ef5a590.js"></script>

<p><br /></p>

<h3 id="build-validation-and-testing">Build Validation and Testing</h3>

<script src="https://gist.github.com/somaz94/d101a4f8ecfa9f8a2dcd01e54859a616.js"></script>

<p><br /></p>

<hr />

<h2 id="conclusion">Conclusion</h2>

<p>HashiCorp Packer revolutionizes <strong>infrastructure image management</strong> by providing a unified, automated approach to building consistent machine images across multiple platforms. The transition from manual image creation to <strong>Infrastructure as Code</strong> principles fundamentally improves deployment reliability, security, and operational efficiency.</p>

<p><br /></p>

<h3 id="key-achievements">Key Achievements:</h3>

<ol>
  <li><strong>Multi-Platform Consistency</strong>: Single template creates identical images across AWS, GCP, Azure, and local environments</li>
  <li><strong>Automated Golden Images</strong>: Standardized, pre-configured images reduce deployment time and configuration drift</li>
  <li><strong>Security Integration</strong>: Built-in security hardening and compliance validation</li>
  <li><strong>CI/CD Pipeline Integration</strong>: Automated image building and testing workflows</li>
</ol>

<p><br /></p>

<h3 id="operational-benefits">Operational Benefits:</h3>

<ul>
  <li><strong>Faster Deployments</strong>: Pre-configured images eliminate runtime configuration</li>
  <li><strong>Consistent Environments</strong>: Identical images across development, staging, and production</li>
  <li><strong>Enhanced Security</strong>: Standardized hardening and patch management</li>
  <li><strong>Cost Optimization</strong>: Reduced compute time for application deployment</li>
  <li><strong>Version Control</strong>: Image definitions tracked and versioned with application code</li>
</ul>

<p><br /></p>

<h4 id="future-enhancements">Future Enhancements:</h4>
<ul>
  <li>Implement multi-stage image building for complex applications</li>
  <li>Integrate with container registries for hybrid VM/container workflows</li>
  <li>Develop custom Packer plugins for specialized requirements</li>
  <li>Establish automated image vulnerability scanning and compliance reporting</li>
</ul>

<p>Mastering Packer enables organizations to achieve <strong>true Infrastructure as Code maturity</strong>, where every component of the infrastructure stack is automated, versioned, and reproducible. The combination of <strong>consistent image building, security hardening, and multi-platform support</strong> makes Packer an essential tool for modern cloud infrastructure teams.</p>

<blockquote>
  <p><em>“Packer transforms image management from a manual, error-prone process into an automated, reliable foundation for scalable infrastructure.”</em></p>
</blockquote>

<p><br /></p>

<hr />

<h2 id="references">References</h2>

<ul>
  <li><a href="https://www.packer.io/docs">HashiCorp Packer Documentation</a></li>
  <li><a href="https://www.packer.io/plugins">Packer Plugin Registry</a></li>
  <li><a href="https://github.com/hashicorp/hcl">HCL2 Configuration Language</a></li>
  <li><a href="https://github.com/hashicorp/packer/tree/main/examples">Packer Template Examples</a></li>
  <li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html">AWS AMI Building Guide</a></li>
  <li><a href="https://cloud.google.com/compute/docs/images">Google Cloud Image Building</a></li>
  <li><a href="https://github.com/somaz94/vagrant-packer">Example Project Repository</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/container/docker-compose/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755654072/docker-compose_l2hvau.png">
                                    
                                    <h3>Docker Compose - Complete Guide to Multi-Container Application Orchestration</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/ai/claude-gemini/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767603840/claude-gemini-1_q0lkop.png">
                                    
                                    <h3>Claude 4.5 Sonnet vs Gemini 3 Pro: The Ultimate 2026 AI Model Showdown</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/iac/ansible/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755657938/ansible-1_qtomxt.png">
                                    
                                    <h3>Ansible - Complete Guide to Infrastructure Automation and Galaxy Platform</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="11">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/troubleshooting/nvidia-driver-library-mismatch-resolution/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767769657/nvidia-mismatch-1_cjibne.png">
                
            </div>
            <h3 class="title">Resolving NVIDIA Driver/Library Version Mismatch Errors</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Comprehensive tutorial covering Packer installation, configuration, template creation, and automated image building for AWS, GCP, Azure, and local environments including Vagrant Box creation.&quot;%20https://somaz.blog/category/iac/what-is-packer/%20via%20&#64;twitter_username&hashtags=packer,hashicorp,golden-images,infrastructure-as-code,automation,aws-ami,gcp-images,vagrant-boxes,multi-platform,hcl2"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/iac/what-is-packer/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/iac/what-is-packer/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "HashiCorp Packer: Automated Multi-Platform Image Building and Golden Image Creation",
            "headline": "Complete guide to building consistent machine images across cloud platforms using Packer with HCL2 and JSON templates",
            "description": "Comprehensive tutorial covering Packer installation, configuration, template creation, and automated image building for AWS, GCP, Azure, and local environments including Vagrant Box creation.",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1755135220/packer_lrlizr.png",
            "url": "https://somaz.blog/category/iac/what-is-packer/",
            "articleBody": "



Overview

In modern infrastructure management, creating consistent and reproducible machine images across multiple platforms remains a critical challenge.

HashiCorp Packer addresses this need by providing a powerful automation tool for building identical machine images from a single source template across various platforms.

This comprehensive guide explores Packer’s capabilities for creating Golden Images - standardized, pre-configured machine images that serve as the foundation for consistent deployments.

We’ll cover everything from basic installation to advanced multi-platform image building, including integration with Vagrant, AWS, GCP, and Azure.

Packer excels at Infrastructure as Code principles, enabling teams to version control their image configurations and automate the entire image building pipeline.

When combined with Terraform and Vagrant, Packer becomes an essential component of complete infrastructure automation workflows.





What is HashiCorp Packer?

Packer is an open-source tool for creating identical machine images for multiple platforms from a single source configuration. It automates the process of building, provisioning, and packaging machine images, making it ideal for creating “Golden Images” that teams can use consistently across their cloud infrastructure.



Core Capabilities:


  Multi-Platform Support: AWS, GCP, Azure, VMware, VirtualBox, Docker, and more
  Single Source Template: One configuration builds images for all platforms
  Automated Provisioning: Integration with Shell, Ansible, Puppet, Chef
  Immutable Infrastructure: Pre-configured images reduce deployment time
  CI/CD Integration: Automated image building in deployment pipelines
  Template Flexibility: Support for both JSON and HCL2 configurations




Key Benefits:

Golden Image Advantages

  Consistent base configurations across environments
  Faster deployment times (pre-configured images)
  Reduced configuration drift
  Enhanced security through standardized hardening
  Simplified compliance and auditing
  Version-controlled image definitions






Installation and Setup



Step 1: Install Packer

# CentOS/RHEL Installation
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
sudo yum -y install packer

# Ubuntu/Debian Installation
wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
echo &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list
sudo apt update &amp;amp;&amp;amp; sudo apt install packer

# macOS Installation
brew tap hashicorp/tap
brew install hashicorp/tap/packer

# Verify installation
packer version




Step 2: Install Supporting Tools

# For local virtualization (KVM/QEMU)
# CentOS/RHEL
sudo yum -y install qemu libvirt libvirt-devel ruby-devel gcc qemu-kvm libguestfs-tools

# Ubuntu/Debian
sudo apt install -y qemu qemu-kvm libvirt-daemon libvirt-clients bridge-utils virt-manager

# For Vagrant integration
sudo yum -y install vagrant  # or apt install vagrant
vagrant plugin install vagrant-libvirt
vagrant plugin install vagrant-mutate

# For cloud provider CLI tools
# AWS CLI
curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;
unzip awscliv2.zip &amp;amp;&amp;amp; sudo ./aws/install

# Google Cloud SDK
curl https://sdk.cloud.google.com | bash
exec -l $SHELL
gcloud init




Step 3: Enable Command Autocompletion

# Enable Packer autocompletion
packer -autocomplete-install

# Reload shell configuration
source ~/.bashrc  # or ~/.zshrc

# Test autocompletion
packer &amp;lt;TAB&amp;gt;&amp;lt;TAB&amp;gt;




Step 4: Resolve Binary Conflicts (If Needed)

# Check for conflicting packer binaries
which packer
ls -la /usr/sbin/packer

# If cracklib-packer conflict exists
sudo rm -rf /usr/sbin/packer
sudo ln -s /usr/bin/packer /usr/sbin/packer

# Verify correct packer is active
packer version
# Should show: Packer v1.x.x






Packer CLI Commands



Core Commands Overview

# Essential Packer commands
packer init        # Install missing plugins
packer validate    # Validate template syntax
packer build       # Build images from template
packer inspect     # Show template components
packer fmt         # Format HCL2 templates
packer console     # Interactive console for testing




Command: packer init

# Initialize plugins for a template
packer init -h

Usage: packer init [options] [config.pkr.hcl|folder/]

  Install all the missing plugins required in a Packer config.
  This is the first command that should be executed when working 
  with a new or existing template.

Options:
  -upgrade                     Update installed plugins to latest version
  
# Example usage
packer init .
packer init templates/
packer init -upgrade aws-template.pkr.hcl




Command: packer build

# Build images from templates
packer build -h

Usage: packer build [options] TEMPLATE

  Execute multiple builds in parallel as defined in the template.
  Various artifacts created by the template will be outputted.

Options:
  -color=false                  Disable color output
  -debug                        Enable debug mode for builds
  -except=foo,bar,baz          Run all builds except these
  -only=foo,bar,baz            Build only specified builds
  -force                       Force build, delete existing artifacts
  -parallel-builds=1           Number of parallel builds (0 = no limit)
  -var &apos;key=value&apos;             Template variables
  -var-file=path               Variable file (JSON/HCL2)

# Example usage
packer build template.pkr.hcl
packer build -var &apos;region=us-west-2&apos; aws-template.pkr.hcl
packer build -var-file=variables.pkrvars.hcl template.pkr.hcl
packer build -only=amazon-ebs.ubuntu template.pkr.hcl




Command: packer validate

# Validate template configuration
packer validate template.pkr.hcl
packer validate -var-file=vars.pkrvars.hcl template.pkr.hcl

# Example output for valid template:
# The configuration is valid.

# Example output for invalid template:
# Error: Invalid template syntax




Command: packer plugins

# Plugin management commands
packer plugins install github.com/hashicorp/amazon
packer plugins installed
packer plugins required .
packer plugins remove github.com/hashicorp/amazon

# List available plugins
packer plugins installed
# Example output:
# github.com/hashicorp/amazon v1.2.1
# github.com/hashicorp/googlecompute v1.0.16






Template Formats: HCL2 vs JSON



Modern HCL2 Format (Recommended)

HCL2 (HashiCorp Configuration Language 2) is the modern template format used across HashiCorp tools. It provides better syntax, modularity, and advanced features compared to JSON.









Legacy JSON Format







Multi-Platform Image Building



AWS AMI Creation





Google Cloud Platform Images





Azure VM Images







Vagrant Box Creation



Local Vagrant Box with QEMU/KVM





Vagrant Setup Scripts







Template Migration and Management



JSON to HCL2 Migration

# Upgrade existing JSON template to HCL2
packer hcl2_upgrade -with-annotations template.json

# This creates template.json.pkr.hcl with:
# - Detailed comments
# - Modern HCL2 syntax
# - Variable type definitions
# - Plugin requirements




Example Migration Process





Template Organization Best Practices

# Recommended directory structure
packer-templates/
├── aws/
│   ├── variables.pkrvars.hcl
│   ├── ubuntu.pkr.hcl
│   ├── centos.pkr.hcl
│   └── windows.pkr.hcl
├── gcp/
│   ├── variables.pkrvars.hcl
│   └── ubuntu.pkr.hcl
├── vagrant/
│   ├── ubuntu-box.pkr.hcl
│   └── centos-box.pkr.hcl
├── scripts/
│   ├── common/
│   ├── aws/
│   ├── gcp/
│   └── vagrant/
└── http/
    ├── preseed.cfg
    └── kickstart.cfg






Advanced Provisioning Strategies



Ansible Integration





Docker Image Building





Windows Image Building







CI/CD Integration and Automation



GitHub Actions Workflow





Jenkins Pipeline

// Jenkinsfile
pipeline {
    agent any
    
    environment {
        PACKER_VERSION = &apos;1.9.4&apos;
        AWS_REGION = &apos;us-west-2&apos;
    }
    
    parameters {
        choice(
            name: &apos;BUILD_TYPE&apos;,
            choices: [&apos;validate&apos;, &apos;build&apos;, &apos;build-all&apos;],
            description: &apos;Type of build to perform&apos;
        )
        choice(
            name: &apos;TEMPLATE&apos;,
            choices: [&apos;ubuntu&apos;, &apos;centos&apos;, &apos;amazon-linux&apos;, &apos;all&apos;],
            description: &apos;Template to build&apos;
        )
    }
    
    stages {
        stage(&apos;Setup&apos;) {
            steps {
                script {
                    // Download and setup Packer
                    sh &quot;&quot;&quot;
                        wget -O packer.zip https://releases.hashicorp.com/packer/${PACKER_VERSION}/packer_${PACKER_VERSION}_linux_amd64.zip
                        unzip -o packer.zip
                        chmod +x packer
                        ./packer version
                    &quot;&quot;&quot;
                }
            }
        }
        
        stage(&apos;Initialize&apos;) {
            steps {
                sh &apos;./packer init packer/&apos;
            }
        }
        
        stage(&apos;Validate&apos;) {
            steps {
                script {
                    if (params.TEMPLATE == &apos;all&apos;) {
                        sh &apos;&apos;&apos;
                            for template in packer/*.pkr.hcl; do
                                echo &quot;Validating $template&quot;
                                ./packer validate &quot;$template&quot;
                            done
                        &apos;&apos;&apos;
                    } else {
                        sh &quot;./packer validate packer/${params.TEMPLATE}.pkr.hcl&quot;
                    }
                }
            }
        }
        
        stage(&apos;Build&apos;) {
            when {
                anyOf {
                    equals expected: &apos;build&apos;, actual: params.BUILD_TYPE
                    equals expected: &apos;build-all&apos;, actual: params.BUILD_TYPE
                }
            }
            steps {
                script {
                    withCredentials([
                        string(credentialsId: &apos;aws-access-key&apos;, variable: &apos;AWS_ACCESS_KEY_ID&apos;),
                        string(credentialsId: &apos;aws-secret-key&apos;, variable: &apos;AWS_SECRET_ACCESS_KEY&apos;)
                    ]) {
                        if (params.TEMPLATE == &apos;all&apos;) {
                            sh &apos;&apos;&apos;
                                for template in packer/*.pkr.hcl; do
                                    echo &quot;Building $template&quot;
                                    ./packer build -var &quot;region=${AWS_REGION}&quot; &quot;$template&quot;
                                done
                            &apos;&apos;&apos;
                        } else {
                            sh &quot;./packer build -var &apos;region=${AWS_REGION}&apos; packer/${params.TEMPLATE}.pkr.hcl&quot;
                        }
                    }
                }
            }
        }
        
        stage(&apos;Archive Artifacts&apos;) {
            steps {
                archiveArtifacts artifacts: &apos;manifest.json&apos;, allowEmptyArchive: true
                publishHTML([
                    allowMissing: false,
                    alwaysLinkToLastBuild: true,
                    keepAll: true,
                    reportDir: &apos;.&apos;,
                    reportFiles: &apos;manifest.json&apos;,
                    reportName: &apos;Packer Build Report&apos;
                ])
            }
        }
    }
    
    post {
        always {
            cleanWs()
        }
        success {
            echo &apos;Packer build completed successfully!&apos;
        }
        failure {
            echo &apos;Packer build failed!&apos;
        }
    }
}






Monitoring and Logging



Build Monitoring Script







Best Practices and Security



Security Hardening Template





Environment-Specific Variables





Build Validation and Testing







Conclusion

HashiCorp Packer revolutionizes infrastructure image management by providing a unified, automated approach to building consistent machine images across multiple platforms. The transition from manual image creation to Infrastructure as Code principles fundamentally improves deployment reliability, security, and operational efficiency.



Key Achievements:


  Multi-Platform Consistency: Single template creates identical images across AWS, GCP, Azure, and local environments
  Automated Golden Images: Standardized, pre-configured images reduce deployment time and configuration drift
  Security Integration: Built-in security hardening and compliance validation
  CI/CD Pipeline Integration: Automated image building and testing workflows




Operational Benefits:


  Faster Deployments: Pre-configured images eliminate runtime configuration
  Consistent Environments: Identical images across development, staging, and production
  Enhanced Security: Standardized hardening and patch management
  Cost Optimization: Reduced compute time for application deployment
  Version Control: Image definitions tracked and versioned with application code




Future Enhancements:

  Implement multi-stage image building for complex applications
  Integrate with container registries for hybrid VM/container workflows
  Develop custom Packer plugins for specialized requirements
  Establish automated image vulnerability scanning and compliance reporting


Mastering Packer enables organizations to achieve true Infrastructure as Code maturity, where every component of the infrastructure stack is automated, versioned, and reproducible. The combination of consistent image building, security hardening, and multi-platform support makes Packer an essential tool for modern cloud infrastructure teams.


  “Packer transforms image management from a manual, error-prone process into an automated, reliable foundation for scalable infrastructure.”






References


  HashiCorp Packer Documentation
  Packer Plugin Registry
  HCL2 Configuration Language
  Packer Template Examples
  AWS AMI Building Guide
  Google Cloud Image Building
  Example Project Repository

",
            "wordcount": "2135",
            "inLanguage": "en",
            "dateCreated": "2025-09-20/",
            "datePublished": "2025-09-20/",
            "dateModified": "2025-09-20/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "IAC",
            "articleSection": "IAC",
            "keywords": ["packer","hashicorp","golden-images","infrastructure-as-code","automation","aws-ami","gcp-images","vagrant-boxes","multi-platform","hcl2"]
        }
        </script>
    </body>
</html>
