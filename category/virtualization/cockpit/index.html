<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>KVM and Cockpit Complete Virtualization Setup Guide | somaz</title>
    <meta name="description" content="Learn how to install and configure KVM with Cockpit for intuitive web-based virtual machine management on Ubuntu/Debian systems">
    
        <meta name="keywords" content="kvm, cockpit, virtualization, web-management, libvirt, qemu, linux">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KVM and Cockpit Complete Virtualization Setup Guide | somaz">
    <meta name="twitter:description" content="Learn how to install and configure KVM with Cockpit for intuitive web-based virtual machine management on Ubuntu/Debian systems">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1755592289/cockpit-1_t5ufcx.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/virtualization/cockpit/">
    <meta property="og:title" content="KVM and Cockpit Complete Virtualization Setup Guide | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1755592289/cockpit-1_t5ufcx.png">
    <meta property="og:description" content="Learn how to install and configure KVM with Cockpit for intuitive web-based virtual machine management on Ubuntu/Debian systems">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/virtualization/cockpit/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2026-01-06T00:00:00+00:00">
                            


January 6, 2026

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>23 min to read</span>
                </p>
                <h1 class="post-title">KVM and Cockpit Complete Virtualization Setup Guide</h1>
                <p class="post-subtitle">Build modern virtualization environments with KVM hypervisor and Cockpit web management</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1755592289/cockpit-1_t5ufcx.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>In modern IT environments, <strong>virtualization technology has become essential</strong> for efficient server resource utilization and operational cost reduction.</p>

<p><strong>KVM (Kernel-based Virtual Machine)</strong> is widely used in Linux environments as a hypervisor that provides high performance and stability.</p>

<p>This comprehensive guide demonstrates how to <strong>install KVM on Ubuntu/Debian-based systems</strong> and build an intuitive virtual machine management environment using <strong>Cockpit</strong>, a web-based management tool.</p>

<p>With Cockpit, you can easily create, manage, and monitor virtual machines through a browser interface without complex command-line operations.</p>

<p><br /></p>

<h3 id="key-benefits-of-kvm--cockpit">Key Benefits of KVM + Cockpit</h3>

<div class="info-box info-box-success-not-check">
  <strong>Why Choose KVM and Cockpit?</strong>
  <ul>
    <li><strong>User-Friendly Management</strong>: Intuitive web interface instead of complex commands</li>
    <li><strong>Real-time Monitoring</strong>: Live system resource usage and VM status monitoring</li>
    <li><strong>Remote Access</strong>: Manage virtualization environments from anywhere via network</li>
    <li><strong>Cost Efficiency</strong>: Open-source solution with no licensing costs</li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="system-architecture-overview">System Architecture Overview</h2>

<p>Understanding the architecture helps optimize your virtualization setup and troubleshoot issues effectively.</p>

<p><br /></p>

<h3 id="kvm-and-cockpit-stack">KVM and Cockpit Stack</h3>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Web Browser] --&gt; B[Cockpit Web Interface :9090]
      B --&gt; C[Cockpit-Machines Plugin]
      C --&gt; D[libvirt API]
      D --&gt; E[libvirtd Daemon]
      E --&gt; F[KVM Hypervisor]
      F --&gt; G[Hardware Layer]
      
      E --&gt; H[VM 1]
      E --&gt; I[VM 2]
      E --&gt; J[VM N]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#ffab91,stroke:#333,stroke-width:1px
      style G fill:#bcaaa4,stroke:#333,stroke-width:1px
  </div>
</div>

<p><br /></p>

<hr />

<h2 id="prerequisites-and-system-requirements">Prerequisites and System Requirements</h2>

<p>Before beginning the installation, ensure your system meets the necessary requirements.</p>

<p><br /></p>

<h3 id="hardware-requirements">Hardware Requirements</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 25%;">Component</th>
      <th style="width: 35%;">Minimum Requirements</th>
      <th style="width: 40%;">Recommended</th>
    </tr>
    <tr>
      <td><strong>CPU</strong></td>
      <td>x86_64 with VT-x/AMD-V support</td>
      <td>Multi-core CPU with hardware virtualization</td>
    </tr>
    <tr>
      <td><strong>Memory</strong></td>
      <td>4 GB RAM</td>
      <td>8+ GB RAM for multiple VMs</td>
    </tr>
    <tr>
      <td><strong>Storage</strong></td>
      <td>50 GB available disk space</td>
      <td>SSD with 100+ GB for optimal performance</td>
    </tr>
    <tr>
      <td><strong>Network</strong></td>
      <td>Single network interface</td>
      <td>Multiple NICs for advanced networking</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="software-requirements">Software Requirements</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Software</th>
      <th style="width: 70%;">Requirements</th>
    </tr>
    <tr>
      <td><strong>Operating System</strong></td>
      <td>Ubuntu 20.04+ or Debian 11+ (64-bit)</td>
    </tr>
    <tr>
      <td><strong>Kernel</strong></td>
      <td>Linux kernel 4.15+ with KVM support</td>
    </tr>
    <tr>
      <td><strong>User Privileges</strong></td>
      <td>sudo access for installation and configuration</td>
    </tr>
    <tr>
      <td><strong>Network Access</strong></td>
      <td>Internet connection for package downloads</td>
    </tr>
  </table>
</div>

<p><br /></p>

<hr />

<h2 id="step-1-system-preparation-and-updates">Step 1: System Preparation and Updates</h2>

<p>Begin with essential system preparation to ensure a clean installation environment.</p>

<p><br /></p>

<h3 id="update-package-repository">Update Package Repository</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Update package lists to get latest software information</span>
<span class="nb">sudo </span>apt update

<span class="c"># Upgrade existing packages to latest versions (optional but recommended)</span>
<span class="nb">sudo </span>apt upgrade <span class="nt">-y</span>

<span class="c"># Install essential build tools and dependencies</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> curl wget gpg software-properties-common
</code></pre></div></div>

<h3 id="verify-system-compatibility">Verify System Compatibility</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if CPU supports virtualization</span>
<span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">'(vmx|svm)'</span> /proc/cpuinfo

<span class="c"># Alternative check using egrep</span>
egrep <span class="nt">-c</span> <span class="s1">'(vmx|svm)'</span> /proc/cpuinfo
<span class="c"># Should return a number &gt; 0</span>

<span class="c"># Check if virtualization is enabled in BIOS</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> cpu-checker
<span class="nb">sudo </span>kvm-ok
</code></pre></div></div>

<h4 id="expected-output-for-successful-virtualization-support">Expected output for successful virtualization support:</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INFO: /dev/kvm exists
KVM acceleration can be used
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-2-kvm-installation-and-configuration">Step 2: KVM Installation and Configuration</h2>

<p>Install the complete KVM virtualization stack with all necessary components.</p>

<p><br /></p>

<h3 id="install-core-kvm-packages">Install Core KVM Packages</h3>

<script src="https://gist.github.com/somaz94/18d897f5b21588fb1f68b1da9b94e11f.js"></script>

<p><br /></p>

<h4 id="package-descriptions">Package Descriptions</h4>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 25%;">Package</th>
      <th style="width: 75%;">Purpose</th>
    </tr>
    <tr>
      <td><strong>cpu-checker</strong></td>
      <td>Tool to check CPU virtualization support capabilities</td>
    </tr>
    <tr>
      <td><strong>qemu-kvm</strong></td>
      <td>Core KVM hypervisor package with QEMU backend</td>
    </tr>
    <tr>
      <td><strong>libvirt-daemon-system</strong></td>
      <td>System daemon for managing virtual machines</td>
    </tr>
    <tr>
      <td><strong>bridge-utils</strong></td>
      <td>Network bridge management utilities for VM networking</td>
    </tr>
    <tr>
      <td><strong>libguestfs-tools</strong></td>
      <td>Tools for manipulating virtual machine disk images</td>
    </tr>
    <tr>
      <td><strong>virt-manager</strong></td>
      <td>GUI-based virtual machine management tool</td>
    </tr>
    <tr>
      <td><strong>virtinst</strong></td>
      <td>Command-line tools for VM installation</td>
    </tr>
    <tr>
      <td><strong>virt-viewer</strong></td>
      <td>Virtual machine console viewer application</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="verify-kvm-installation">Verify KVM Installation</h3>

<h4 id="check-kvm-module-loading">Check KVM Module Loading</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Verify KVM modules are loaded</span>
lsmod | <span class="nb">grep </span>kvm

<span class="c"># Expected output (Intel):</span>
<span class="c"># kvm_intel             245760  0</span>
<span class="c"># kvm                   663552  1 kvm_intel</span>

<span class="c"># Expected output (AMD):</span>
<span class="c"># kvm_amd               106496  0</span>
<span class="c"># kvm                   663552  1 kvm_amd</span>
</code></pre></div></div>

<h4 id="test-kvm-functionality">Test KVM Functionality</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Comprehensive KVM support verification</span>
<span class="nb">sudo </span>kvm-ok

<span class="c"># Check libvirt version and capabilities</span>
<span class="nb">sudo </span>virsh version

<span class="c"># List available capabilities</span>
<span class="nb">sudo </span>virsh capabilities | <span class="nb">head</span> <span class="nt">-20</span>
</code></pre></div></div>

<h4 id="verify-device-access">Verify Device Access</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check KVM device permissions</span>
<span class="nb">ls</span> <span class="nt">-la</span> /dev/kvm
<span class="c"># Should show: crw-rw---- 1 root kvm ... /dev/kvm</span>

<span class="c"># Check current user groups</span>
<span class="nb">groups</span> <span class="nv">$USER</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-3-libvirt-service-configuration">Step 3: Libvirt Service Configuration</h2>

<p>Configure and optimize the libvirt service for stable VM management.</p>

<p><br /></p>

<h3 id="start-and-enable-libvirt-services">Start and Enable Libvirt Services</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check current libvirt daemon status</span>
<span class="nb">sudo </span>systemctl status libvirtd

<span class="c"># Start libvirt daemon if not running</span>
<span class="nb">sudo </span>systemctl start libvirtd

<span class="c"># Enable libvirt to start automatically at boot</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>libvirtd

<span class="c"># Start and enable additional libvirt services</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> libvirt-guests
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> virtlogd
</code></pre></div></div>

<h3 id="configure-user-permissions">Configure User Permissions</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Add current user to libvirt group for VM management</span>
<span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> libvirt <span class="nv">$USER</span>
<span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> kvm <span class="nv">$USER</span>

<span class="c"># Add any additional users who need VM access</span>
<span class="c"># sudo usermod -a -G libvirt username</span>

<span class="c"># Apply group changes (logout/login required for full effect)</span>
newgrp libvirt
</code></pre></div></div>

<h3 id="verify-service-configuration">Verify Service Configuration</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check libvirt daemon status</span>
<span class="nb">sudo </span>systemctl is-active libvirtd
<span class="nb">sudo </span>systemctl is-enabled libvirtd

<span class="c"># Test libvirt connectivity</span>
virsh list <span class="nt">--all</span>

<span class="c"># Check default network status</span>
virsh net-list <span class="nt">--all</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="configure-default-network">Configure Default Network</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ensure default libvirt network is available</span>
<span class="nb">sudo </span>virsh net-start default
<span class="nb">sudo </span>virsh net-autostart default

<span class="c"># Verify network configuration</span>
<span class="nb">sudo </span>virsh net-dumpxml default

<span class="c"># Check network bridge status</span>
ip addr show virbr0
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-4-cockpit-installation-and-setup">Step 4: Cockpit Installation and Setup</h2>

<p>Install Cockpit web management interface with virtualization capabilities.</p>

<p><br /></p>

<h3 id="install-cockpit-packages">Install Cockpit Packages</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install Cockpit core and machines plugin</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> cockpit cockpit-machines

<span class="c"># Install additional useful Cockpit modules</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> cockpit-networkmanager cockpit-storaged cockpit-packagekit cockpit-system
</code></pre></div></div>

<h4 id="cockpit-components">Cockpit Components</h4>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Component</th>
      <th style="width: 70%;">Functionality</th>
    </tr>
    <tr>
      <td><strong>cockpit</strong></td>
      <td>Core web interface for system management</td>
    </tr>
    <tr>
      <td><strong>cockpit-machines</strong></td>
      <td>Virtual machine management plugin</td>
    </tr>
    <tr>
      <td><strong>cockpit-networkmanager</strong></td>
      <td>Network interface and configuration management</td>
    </tr>
    <tr>
      <td><strong>cockpit-storaged</strong></td>
      <td>Storage device and filesystem management</td>
    </tr>
    <tr>
      <td><strong>cockpit-packagekit</strong></td>
      <td>Software package management interface</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="start-and-enable-cockpit-service">Start and Enable Cockpit Service</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start Cockpit service</span>
<span class="nb">sudo </span>systemctl start cockpit

<span class="c"># Enable Cockpit to start at boot</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>cockpit

<span class="c"># Check Cockpit service status</span>
<span class="nb">sudo </span>systemctl status cockpit

<span class="c"># Verify Cockpit is listening on port 9090</span>
<span class="nb">sudo </span>ss <span class="nt">-tulpn</span> | <span class="nb">grep</span> :9090
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-5-security-configuration">Step 5: Security Configuration</h2>

<p>Implement essential security measures for your Cockpit installation.</p>

<p><br /></p>

<h3 id="configure-user-access-control">Configure User Access Control</h3>

<h4 id="restrict-root-access">Restrict Root Access</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create or edit disallowed users file</span>
<span class="nb">sudo </span>vi /etc/cockpit/disallowed-users

<span class="c"># Add the following content to disable root login:</span>
root
</code></pre></div></div>

<h4 id="create-dedicated-vm-management-user-optional">Create Dedicated VM Management User (Optional)</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a dedicated user for VM management</span>
<span class="nb">sudo </span>useradd <span class="nt">-m</span> <span class="nt">-s</span> /bin/bash vmadmin
<span class="nb">sudo </span>passwd vmadmin

<span class="c"># Add to necessary groups</span>
<span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> libvirt,kvm vmadmin

<span class="c"># Create sudo privileges for VM management</span>
<span class="nb">sudo </span>visudo

<span class="c"># Add this line:</span>
<span class="c"># vmadmin ALL=(ALL) NOPASSWD: /usr/bin/virsh, /usr/bin/virt-install</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="firewall-configuration">Firewall Configuration</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if UFW firewall is active</span>
<span class="nb">sudo </span>ufw status

<span class="c"># If UFW is active, allow Cockpit access</span>
<span class="nb">sudo </span>ufw allow 9090/tcp

<span class="c"># For more restrictive access, allow only from specific networks</span>
<span class="c"># sudo ufw allow from 192.168.1.0/24 to any port 9090</span>

<span class="c"># Alternative: Configure iptables directly</span>
<span class="c"># sudo iptables -I INPUT -p tcp --dport 9090 -j ACCEPT</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="ssltls-configuration-optional">SSL/TLS Configuration (Optional)</h3>

<h4 id="enable-https-with-custom-certificate">Enable HTTPS with Custom Certificate</h4>

<script src="https://gist.github.com/somaz94/67a821c1d54b26dc86e58cbe21eaf2d5.js"></script>

<p><br /></p>

<h3 id="apply-security-settings">Apply Security Settings</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Restart Cockpit service to apply security changes</span>
<span class="nb">sudo </span>systemctl restart cockpit

<span class="c"># Verify Cockpit is running with new configuration</span>
<span class="nb">sudo </span>systemctl status cockpit

<span class="c"># Check Cockpit logs for any issues</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> cockpit <span class="nt">-f</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-6-web-interface-access-and-initial-setup">Step 6: Web Interface Access and Initial Setup</h2>

<p>Access and configure Cockpit through its web interface.</p>

<p><br /></p>

<h3 id="access-cockpit-web-interface">Access Cockpit Web Interface</h3>

<h4 id="connection-information">Connection Information</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Web interface URL</span>
http://&lt;server_IP&gt;:9090
<span class="c"># or with HTTPS (if configured)</span>
https://&lt;server_IP&gt;:9090

<span class="c"># Get server IP address</span>
ip addr show | <span class="nb">grep </span>inet

<span class="c"># Alternative methods to find IP</span>
<span class="nb">hostname</span> <span class="nt">-I</span>
</code></pre></div></div>

<h4 id="first-login">First Login</h4>

<ol>
  <li><strong>Open Web Browser</strong>: Navigate to <code class="language-plaintext highlighter-rouge">http://your-server-ip:9090</code></li>
  <li><strong>Accept Certificate</strong>: For self-signed certificates, accept the security warning</li>
  <li><strong>Login</strong>: Use your system user account credentials (not root)</li>
  <li><strong>Enable Administrative Access</strong>: Check “Reuse my password for privileged tasks”</li>
</ol>

<p><br /></p>

<h3 id="initial-configuration">Initial Configuration</h3>

<h4 id="dashboard-overview">Dashboard Overview</h4>

<p>After login, you’ll see the main dashboard with:</p>
<ul>
  <li><strong>System Information</strong>: CPU, memory, storage usage</li>
  <li><strong>Services</strong>: System service status</li>
  <li><strong>Logs</strong>: Recent system logs</li>
  <li><strong>Network</strong>: Network interface status</li>
</ul>

<h4 id="access-virtual-machines-section">Access Virtual Machines Section</h4>

<ol>
  <li><strong>Navigate to Virtual Machines</strong>: Click on “Virtual Machines” in the left sidebar</li>
  <li><strong>Install Extensions</strong>: If prompted, install the cockpit-machines package</li>
  <li><strong>Verify Access</strong>: Ensure you can see the libvirt connection status</li>
</ol>

<p><br /></p>

<hr />

<h2 id="step-7-virtual-machine-creation-and-management">Step 7: Virtual Machine Creation and Management</h2>

<p>Create and manage virtual machines through Cockpit’s intuitive interface.</p>

<p><br /></p>

<h3 id="prepare-vm-images">Prepare VM Images</h3>

<h4 id="download-cloud-images">Download Cloud Images</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create directory for VM images</span>
<span class="nb">sudo mkdir</span> <span class="nt">-p</span> /var/lib/libvirt/images

<span class="c"># Download Ubuntu 22.04 (Jammy) Cloud Image</span>
<span class="nb">cd</span> /tmp
wget https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img

<span class="c"># Download Ubuntu 24.04 (Noble) Cloud Image</span>
wget https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img

<span class="c"># Move images to libvirt directory</span>
<span class="nb">sudo mv </span>jammy-server-cloudimg-amd64.img /var/lib/libvirt/images/
<span class="nb">sudo mv </span>noble-server-cloudimg-amd64.img /var/lib/libvirt/images/

<span class="c"># Set appropriate permissions</span>
<span class="nb">sudo chown </span>libvirt-qemu:kvm /var/lib/libvirt/images/<span class="k">*</span>.img
<span class="nb">sudo chmod </span>644 /var/lib/libvirt/images/<span class="k">*</span>.img
</code></pre></div></div>

<h4 id="prepare-custom-images-optional">Prepare Custom Images (Optional)</h4>

<script src="https://gist.github.com/somaz94/3858e2a3684d9e7b2cb8e5050590f8db.js"></script>

<p><br /></p>

<h3 id="create-virtual-machine-via-cockpit">Create Virtual Machine via Cockpit</h3>

<h4 id="step-by-step-vm-creation">Step-by-Step VM Creation</h4>

<ol>
  <li><strong>Access VM Creation</strong>:
    <ul>
      <li>In Cockpit, go to “Virtual Machines”</li>
      <li>Click “Create VM” button</li>
    </ul>
  </li>
  <li><strong>VM Configuration</strong>:
    <ul>
      <li><strong>Name</strong>: Enter a descriptive name (e.g., “ubuntu-web-server”)</li>
      <li><strong>Source</strong>: Select “Import existing disk image”</li>
      <li><strong>Image</strong>: Browse to your cloud image file</li>
      <li><strong>Memory</strong>: Allocate RAM (e.g., 2048 MB)</li>
      <li><strong>vCPUs</strong>: Set number of virtual CPUs (e.g., 2)</li>
    </ul>
  </li>
  <li><strong>Network Configuration</strong>:
    <ul>
      <li><strong>Network</strong>: Select “Virtual network ‘default’: NAT”</li>
      <li><strong>MAC</strong>: Leave auto-generated</li>
    </ul>
  </li>
  <li><strong>Storage Configuration</strong>:
    <ul>
      <li><strong>Bus type</strong>: VirtIO (recommended for performance)</li>
      <li><strong>Cache</strong>: Default</li>
    </ul>
  </li>
</ol>

<h4 id="advanced-vm-configuration">Advanced VM Configuration</h4>

<script src="https://gist.github.com/somaz94/4a480b7568fe8d33d2c2376bc4394398.js"></script>

<p><br /></p>

<h3 id="vm-management-operations">VM Management Operations</h3>

<h4 id="basic-vm-operations-via-cockpit">Basic VM Operations via Cockpit</h4>

<ol>
  <li><strong>Start/Stop VMs</strong>: Use power buttons in VM list</li>
  <li><strong>Console Access</strong>: Click “Console” to access VM desktop</li>
  <li><strong>Resource Monitoring</strong>: View CPU, memory, disk usage</li>
  <li><strong>Snapshots</strong>: Create and manage VM snapshots</li>
  <li><strong>Clone VMs</strong>: Duplicate existing VMs</li>
</ol>

<h4 id="command-line-vm-management">Command-Line VM Management</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List all VMs</span>
virsh list <span class="nt">--all</span>

<span class="c"># Start VM</span>
virsh start vm-name

<span class="c"># Stop VM gracefully</span>
virsh shutdown vm-name

<span class="c"># Force stop VM</span>
virsh destroy vm-name

<span class="c"># Get VM information</span>
virsh dominfo vm-name

<span class="c"># Console access</span>
virsh console vm-name

<span class="c"># Edit VM configuration</span>
virsh edit vm-name
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="step-8-network-configuration-and-troubleshooting">Step 8: Network Configuration and Troubleshooting</h2>

<p>Configure advanced networking options and resolve common network issues.</p>

<p><br /></p>

<h3 id="default-network-configuration">Default Network Configuration</h3>

<h4 id="verify-default-network">Verify Default Network</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check default network status</span>
virsh net-list <span class="nt">--all</span>

<span class="c"># Display default network configuration</span>
virsh net-dumpxml default

<span class="c"># Check default network bridge</span>
ip addr show virbr0

<span class="c"># View NAT rules</span>
<span class="nb">sudo </span>iptables <span class="nt">-t</span> nat <span class="nt">-L</span> LIBVIRT_PRT <span class="nt">-n</span>
</code></pre></div></div>

<h4 id="default-network-details">Default Network Details</h4>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Configuration</th>
      <th style="width: 70%;">Details</th>
    </tr>
    <tr>
      <td><strong>Network Name</strong></td>
      <td>default</td>
    </tr>
    <tr>
      <td><strong>Bridge Interface</strong></td>
      <td>virbr0</td>
    </tr>
    <tr>
      <td><strong>IP Range</strong></td>
      <td>192.168.122.0/24 (typically)</td>
    </tr>
    <tr>
      <td><strong>DHCP Range</strong></td>
      <td>192.168.122.2 - 192.168.122.254</td>
    </tr>
    <tr>
      <td><strong>Gateway</strong></td>
      <td>192.168.122.1</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="advanced-network-configuration">Advanced Network Configuration</h3>

<h4 id="create-custom-network">Create Custom Network</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create custom network XML configuration</span>
<span class="nb">cat</span> <span class="o">&gt;</span> /tmp/custom-network.xml <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
&lt;network&gt;
  &lt;name&gt;custom-net&lt;/name&gt;
  &lt;forward mode='nat'/&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;ip address='10.0.0.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='10.0.0.10' end='10.0.0.100'/&gt;
    &lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</span><span class="no">EOF

</span><span class="c"># Define and start custom network</span>
virsh net-define /tmp/custom-network.xml
virsh net-start custom-net
virsh net-autostart custom-net
</code></pre></div></div>

<h4 id="bridged-network-configuration">Bridged Network Configuration</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create bridge network for direct host network access</span>
<span class="nb">cat</span> <span class="o">&gt;</span> /tmp/bridge-network.xml <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
&lt;network&gt;
  &lt;name&gt;host-bridge&lt;/name&gt;
  &lt;forward mode="bridge"/&gt;
  &lt;bridge name="br0"/&gt;
&lt;/network&gt;
</span><span class="no">EOF

</span><span class="c"># Define bridge network</span>
virsh net-define /tmp/bridge-network.xml
virsh net-start host-bridge
virsh net-autostart host-bridge
</code></pre></div></div>

<p><br /></p>

<h3 id="common-network-troubleshooting">Common Network Troubleshooting</h3>

<h4 id="vm-network-connectivity-issues">VM Network Connectivity Issues</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check VM network interface configuration</span>
virsh domiflist vm-name

<span class="c"># Verify network bridges</span>
brctl show

<span class="c"># Check iptables rules</span>
<span class="nb">sudo </span>iptables <span class="nt">-L</span> <span class="nt">-n</span>
<span class="nb">sudo </span>iptables <span class="nt">-t</span> nat <span class="nt">-L</span> <span class="nt">-n</span>

<span class="c"># Test connectivity from host to VM</span>
ping 192.168.122.x  <span class="c"># Replace with VM IP</span>

<span class="c"># Check libvirt network logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> libvirtd | <span class="nb">grep </span>network
</code></pre></div></div>

<h4 id="dns-resolution-issues">DNS Resolution Issues</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check dnsmasq configuration (used by libvirt)</span>
<span class="nb">sudo </span>systemctl status libvirt-guests

<span class="c"># Verify DNS forwarding</span>
<span class="nb">cat</span> /var/lib/libvirt/dnsmasq/default.conf

<span class="c"># Test DNS resolution from VM</span>
<span class="c"># (access VM console first)</span>
nslookup google.com
</code></pre></div></div>

<h4 id="firewall-configuration-1">Firewall Configuration</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if firewall is blocking VM traffic</span>
<span class="nb">sudo </span>ufw status

<span class="c"># Allow VM network traffic</span>
<span class="nb">sudo </span>ufw allow <span class="k">in </span>on virbr0
<span class="nb">sudo </span>ufw allow out on virbr0

<span class="c"># For specific port forwarding</span>
<span class="nb">sudo </span>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> PREROUTING <span class="nt">-p</span> tcp <span class="nt">--dport</span> 8080 <span class="nt">-j</span> DNAT <span class="nt">--to-destination</span> 192.168.122.x:80
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="performance-optimization-and-best-practices">Performance Optimization and Best Practices</h2>

<p>Optimize your KVM and Cockpit setup for maximum performance and reliability.</p>

<p><br /></p>

<h3 id="kvm-performance-tuning">KVM Performance Tuning</h3>

<h4 id="cpu-optimization">CPU Optimization</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable CPU host-passthrough for better performance</span>
virsh edit vm-name

<span class="c"># In VM XML configuration, change CPU mode:</span>
<span class="c"># &lt;cpu mode='host-passthrough' check='none'/&gt;</span>

<span class="c"># Enable CPU pinning for critical VMs</span>
<span class="c"># &lt;vcpu placement='static' cpuset='0-3'&gt;4&lt;/vcpu&gt;</span>
<span class="c"># &lt;cputune&gt;</span>
<span class="c">#   &lt;vcpupin vcpu='0' cpuset='0'/&gt;</span>
<span class="c">#   &lt;vcpupin vcpu='1' cpuset='1'/&gt;</span>
<span class="c"># &lt;/cputune&gt;</span>
</code></pre></div></div>

<h4 id="memory-optimization">Memory Optimization</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Configure memory ballooning</span>
<span class="c"># Add to VM XML:</span>
<span class="c"># &lt;memballoon model='virtio'/&gt;</span>

<span class="c"># Enable hugepages for better memory performance</span>
<span class="nb">sudo </span>sysctl vm.nr_hugepages<span class="o">=</span>1024

<span class="c"># Make hugepages persistent</span>
<span class="nb">echo</span> <span class="s1">'vm.nr_hugepages=1024'</span> | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/sysctl.conf

<span class="c"># Configure VM to use hugepages</span>
<span class="c"># Add to VM XML:</span>
<span class="c"># &lt;memoryBacking&gt;</span>
<span class="c">#   &lt;hugepages/&gt;</span>
<span class="c"># &lt;/memoryBacking&gt;</span>
</code></pre></div></div>

<h4 id="storage-performance">Storage Performance</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use virtio-scsi for better I/O performance</span>
<span class="c"># In VM XML disk configuration:</span>
<span class="c"># &lt;disk type='file' device='disk'&gt;</span>
<span class="c">#   &lt;driver name='qemu' type='qcow2' cache='writeback'/&gt;</span>
<span class="c">#   &lt;source file='/var/lib/libvirt/images/vm.qcow2'/&gt;</span>
<span class="c">#   &lt;target dev='sda' bus='scsi'/&gt;</span>
<span class="c">#   &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;</span>
<span class="c"># &lt;/disk&gt;</span>

<span class="c"># Convert RAW images to QCOW2 for better performance</span>
<span class="nb">sudo </span>qemu-img convert <span class="nt">-f</span> raw <span class="nt">-O</span> qcow2 image.raw image.qcow2

<span class="c"># Optimize existing QCOW2 images</span>
<span class="nb">sudo </span>qemu-img convert <span class="nt">-f</span> qcow2 <span class="nt">-O</span> qcow2 <span class="nt">-o</span> <span class="nv">preallocation</span><span class="o">=</span>metadata old.qcow2 new.qcow2
</code></pre></div></div>

<p><br /></p>

<h3 id="cockpit-performance-optimization">Cockpit Performance Optimization</h3>

<h4 id="system-resource-monitoring">System Resource Monitoring</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Monitor system performance</span>
htop
iotop
nethogs

<span class="c"># Check Cockpit resource usage</span>
systemctl status cockpit
ps aux | <span class="nb">grep </span>cockpit
</code></pre></div></div>

<h4 id="optimize-cockpit-configuration">Optimize Cockpit Configuration</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Configure Cockpit for better performance</span>
<span class="nb">sudo </span>vi /etc/cockpit/cockpit.conf

<span class="c"># Add optimization settings:</span>
<span class="o">[</span>WebService]
MaxStartups <span class="o">=</span> 3
LoginTimeout <span class="o">=</span> 10

<span class="c"># Restart Cockpit to apply changes</span>
<span class="nb">sudo </span>systemctl restart cockpit
</code></pre></div></div>

<p><br /></p>

<h3 id="monitoring-and-logging">Monitoring and Logging</h3>

<h4 id="system-monitoring-setup">System Monitoring Setup</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install monitoring tools</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> htop iotop nethogs

<span class="c"># Monitor libvirt logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> libvirtd <span class="nt">-f</span>

<span class="c"># Monitor Cockpit logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> cockpit <span class="nt">-f</span>

<span class="c"># Check VM performance</span>
virt-top
</code></pre></div></div>

<h4 id="log-management">Log Management</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Configure log rotation for libvirt</span>
<span class="nb">sudo </span>vi /etc/logrotate.d/libvirt

<span class="c"># Content:</span>
/var/log/libvirt/<span class="k">*</span>.log <span class="o">{</span>
    daily
    missingok
    rotate 7
    compress
    notifempty
    create 644 root root
    postrotate
        systemctl reload libvirtd
    endscript
<span class="o">}</span>

<span class="c"># Test log rotation</span>
<span class="nb">sudo </span>logrotate <span class="nt">-d</span> /etc/logrotate.d/libvirt
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="security-hardening-and-best-practices">Security Hardening and Best Practices</h2>

<p>Implement comprehensive security measures for production environments.</p>

<p><br /></p>

<h3 id="system-security">System Security</h3>

<h4 id="selinuxapparmor-configuration">SELinux/AppArmor Configuration</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check SELinux status (RHEL/CentOS)</span>
sestatus

<span class="c"># Configure libvirt SELinux settings</span>
<span class="nb">sudo </span>setsebool <span class="nt">-P</span> virt_use_execmem 1

<span class="c"># Check AppArmor status (Ubuntu/Debian)</span>
<span class="nb">sudo </span>apparmor_status | <span class="nb">grep </span>libvirt

<span class="c"># Configure AppArmor for libvirt</span>
<span class="nb">sudo </span>aa-complain /usr/sbin/libvirtd
</code></pre></div></div>

<h4 id="file-permissions-and-ownership">File Permissions and Ownership</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ensure correct ownership of VM images</span>
<span class="nb">sudo chown</span> <span class="nt">-R</span> libvirt-qemu:kvm /var/lib/libvirt/images/
<span class="nb">sudo chmod</span> <span class="nt">-R</span> 644 /var/lib/libvirt/images/

<span class="c"># Secure libvirt configuration files</span>
<span class="nb">sudo chmod </span>600 /etc/libvirt/libvirtd.conf
<span class="nb">sudo chown </span>root:root /etc/libvirt/libvirtd.conf
</code></pre></div></div>

<p><br /></p>

<h3 id="network-security">Network Security</h3>

<h4 id="firewall-configuration-2">Firewall Configuration</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Configure UFW for KVM and Cockpit</span>
<span class="nb">sudo </span>ufw allow ssh
<span class="nb">sudo </span>ufw allow 9090/tcp
<span class="nb">sudo </span>ufw allow <span class="k">in </span>on virbr0
<span class="nb">sudo </span>ufw allow out on virbr0

<span class="c"># Enable UFW</span>
<span class="nb">sudo </span>ufw <span class="nt">--force</span> <span class="nb">enable</span>

<span class="c"># Check firewall status</span>
<span class="nb">sudo </span>ufw status verbose
</code></pre></div></div>

<h4 id="network-isolation">Network Isolation</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create isolated network for sensitive VMs</span>
<span class="nb">cat</span> <span class="o">&gt;</span> /tmp/isolated-network.xml <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
&lt;network&gt;
  &lt;name&gt;isolated&lt;/name&gt;
  &lt;bridge name='virbr2' stp='on' delay='0'/&gt;
  &lt;ip address='172.16.0.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='172.16.0.10' end='172.16.0.100'/&gt;
    &lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;
</span><span class="no">EOF

</span>virsh net-define /tmp/isolated-network.xml
virsh net-start isolated
virsh net-autostart isolated
</code></pre></div></div>

<p><br /></p>

<h3 id="authentication-and-access-control">Authentication and Access Control</h3>

<h4 id="multi-factor-authentication-optional">Multi-Factor Authentication (Optional)</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install libpam-google-authenticator for 2FA</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> libpam-google-authenticator

<span class="c"># Configure PAM for Cockpit</span>
<span class="nb">sudo </span>vi /etc/pam.d/cockpit

<span class="c"># Add before @include common-auth:</span>
<span class="c"># auth required pam_google_authenticator.so</span>
</code></pre></div></div>

<h4 id="user-access-auditing">User Access Auditing</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Monitor Cockpit access logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> cockpit | <span class="nb">grep</span> <span class="s2">"Login"</span>

<span class="c"># Monitor libvirt operations</span>
<span class="nb">sudo </span>auditctl <span class="nt">-w</span> /var/log/libvirt/ <span class="nt">-p</span> wa <span class="nt">-k</span> libvirt_access

<span class="c"># Check audit logs</span>
<span class="nb">sudo </span>ausearch <span class="nt">-k</span> libvirt_access
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="backup-and-disaster-recovery">Backup and Disaster Recovery</h2>

<p>Implement comprehensive backup strategies for your virtual infrastructure.</p>

<p><br /></p>

<h3 id="vm-backup-strategies">VM Backup Strategies</h3>

<h4 id="automated-vm-backups">Automated VM Backups</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># VM backup script</span>
<span class="nv">BACKUP_DIR</span><span class="o">=</span><span class="s2">"/backup/vms"</span>
<span class="nv">DATE</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%Y%m%d_%H%M%S<span class="si">)</span>

<span class="c"># Create backup directory</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$BACKUP_DIR</span>

<span class="c"># Function to backup VM</span>
backup_vm<span class="o">()</span> <span class="o">{</span>
    <span class="nv">VM_NAME</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">echo</span> <span class="s2">"Backing up VM: </span><span class="nv">$VM_NAME</span><span class="s2">"</span>
    
    <span class="c"># Create snapshot</span>
    virsh snapshot-create-as <span class="nv">$VM_NAME</span> <span class="s2">"backup_</span><span class="nv">$DATE</span><span class="s2">"</span> <span class="nt">--disk-only</span> <span class="nt">--atomic</span>
    
    <span class="c"># Export VM configuration</span>
    virsh dumpxml <span class="nv">$VM_NAME</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$BACKUP_DIR</span><span class="s2">/</span><span class="k">${</span><span class="nv">VM_NAME</span><span class="k">}</span><span class="s2">_config_</span><span class="nv">$DATE</span><span class="s2">.xml"</span>
    
    <span class="c"># Copy disk images</span>
    <span class="k">for </span>DISK <span class="k">in</span> <span class="si">$(</span>virsh domblklist <span class="nv">$VM_NAME</span> | <span class="nb">grep</span> <span class="nt">-v</span> Target | <span class="nb">awk</span> <span class="s1">'{print $2}'</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'^$'</span><span class="si">)</span><span class="p">;</span> <span class="k">do
        if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$DISK</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">cp</span> <span class="s2">"</span><span class="nv">$DISK</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$BACKUP_DIR</span><span class="s2">/</span><span class="si">$(</span><span class="nb">basename</span> <span class="nv">$DISK</span><span class="si">)</span><span class="s2">_</span><span class="nv">$DATE</span><span class="s2">"</span>
        <span class="k">fi
    done</span>
    
    <span class="c"># Remove snapshot</span>
    virsh snapshot-delete <span class="nv">$VM_NAME</span> <span class="s2">"backup_</span><span class="nv">$DATE</span><span class="s2">"</span> <span class="nt">--metadata</span>
    
    <span class="nb">echo</span> <span class="s2">"Backup completed for </span><span class="nv">$VM_NAME</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># Backup all running VMs</span>
<span class="k">for </span>VM <span class="k">in</span> <span class="si">$(</span>virsh list <span class="nt">--name</span><span class="si">)</span><span class="p">;</span> <span class="k">do
    </span>backup_vm <span class="nv">$VM</span>
<span class="k">done</span>
</code></pre></div></div>

<h4 id="incremental-backups">Incremental Backups</h4>

<script src="https://gist.github.com/somaz94/97065633979736bb4cfbf09ab50f291e.js"></script>

<p><br /></p>

<h3 id="system-configuration-backup">System Configuration Backup</h3>

<script src="https://gist.github.com/somaz94/40c4aa8767acc88cca17bf4b902ffc54.js"></script>

<p><br /></p>

<hr />

<h2 id="troubleshooting-common-issues">Troubleshooting Common Issues</h2>

<p>Solutions for frequently encountered problems in KVM and Cockpit environments.</p>

<p><br /></p>

<h3 id="kvm-specific-issues">KVM-Specific Issues</h3>

<h4 id="vm-wont-start">VM Won’t Start</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check VM configuration for errors</span>
virsh edit vm-name

<span class="c"># Verify VM resources are available</span>
virsh nodeinfo
free <span class="nt">-h</span>
<span class="nb">df</span> <span class="nt">-h</span>

<span class="c"># Check libvirt logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> libvirtd | <span class="nb">tail</span> <span class="nt">-20</span>

<span class="c"># Test VM start with verbose output</span>
virsh start vm-name <span class="nt">--console</span>
</code></pre></div></div>

<h4 id="performance-issues">Performance Issues</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check host resource usage</span>
htop
iotop
iostat <span class="nt">-x</span> 1

<span class="c"># Monitor VM resource usage</span>
virt-top

<span class="c"># Check VM disk I/O</span>
virsh domblkstat vm-name

<span class="c"># Optimize VM configuration</span>
virsh edit vm-name
<span class="c"># Enable virtio drivers, adjust memory/CPU allocation</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="cockpit-specific-issues">Cockpit-Specific Issues</h3>

<h4 id="web-interface-access-problems">Web Interface Access Problems</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check Cockpit service status</span>
<span class="nb">sudo </span>systemctl status cockpit

<span class="c"># Verify port binding</span>
<span class="nb">sudo </span>ss <span class="nt">-tulpn</span> | <span class="nb">grep</span> :9090

<span class="c"># Check firewall settings</span>
<span class="nb">sudo </span>ufw status
<span class="nb">sudo </span>iptables <span class="nt">-L</span> <span class="nt">-n</span> | <span class="nb">grep </span>9090

<span class="c"># Review Cockpit logs</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> cockpit <span class="nt">-f</span>
</code></pre></div></div>

<h4 id="plugin-issues">Plugin Issues</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Reinstall cockpit-machines plugin</span>
<span class="nb">sudo </span>apt remove cockpit-machines
<span class="nb">sudo </span>apt <span class="nb">install </span>cockpit-machines

<span class="c"># Clear browser cache and cookies</span>
<span class="c"># Restart Cockpit service</span>
<span class="nb">sudo </span>systemctl restart cockpit
</code></pre></div></div>

<p><br /></p>

<hr />

<h2 id="key-points">Key Points</h2>

<div class="info-box info-box-success-not-check">
  <strong>KVM and Cockpit Setup Summary</strong>
  <ul>
    <li>
      <strong>Complete Virtualization Stack</strong><br />
      - KVM hypervisor with libvirt management layer<br />
      - Cockpit web interface for intuitive VM management<br />
      - Comprehensive networking and storage options<br />
      - Enterprise-grade security and monitoring capabilities
    </li>
    <li>
      <strong>Key Installation Components</strong><br />
      - qemu-kvm: Core hypervisor with hardware acceleration<br />
      - libvirt-daemon-system: VM management and API layer<br />
      - cockpit-machines: Web-based virtualization management<br />
      - bridge-utils: Advanced network configuration tools
    </li>
    <li>
      <strong>Production Considerations</strong><br />
      - Implement proper security hardening and access controls<br />
      - Configure automated backups and disaster recovery<br />
      - Monitor performance and optimize resource allocation<br />
      - Maintain regular system updates and security patches
    </li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="conclusion">Conclusion</h2>

<p><strong>KVM and Cockpit</strong> provide a powerful combination for modern virtualization environments, offering <strong>enterprise-grade performance with user-friendly management</strong>. This setup delivers the <strong>stability and performance of KVM hypervisor</strong> with the <strong>accessibility of web-based administration</strong> through Cockpit.</p>

<p>The <strong>integration of these technologies</strong> enables organizations to build <strong>scalable, secure, and manageable virtual infrastructure</strong> without the complexity and cost of proprietary solutions. <strong>From development environments to production deployments</strong>, this stack provides the flexibility and reliability needed for modern IT operations.</p>

<p><br /></p>

<h3 id="key-implementation-benefits">Key Implementation Benefits</h3>

<ol>
  <li><strong>User-Friendly Management</strong>: Intuitive web interface eliminates complex command-line operations</li>
  <li><strong>Cost Efficiency</strong>: Open-source solution with no licensing fees</li>
  <li><strong>High Performance</strong>: Native KVM performance with hardware acceleration</li>
  <li><strong>Scalability</strong>: Supports everything from single-node setups to multi-host environments</li>
  <li><strong>Security</strong>: Comprehensive security features and access controls</li>
</ol>

<p><br /></p>

<h3 id="future-recommendations">Future Recommendations</h3>

<p>As <strong>containerization and cloud-native technologies</strong> continue evolving, <strong>KVM and Cockpit</strong> remain relevant for <strong>traditional virtualization workloads</strong> and <strong>hybrid infrastructure scenarios</strong>. Consider integrating with <strong>container orchestration platforms</strong> and <strong>infrastructure-as-code tools</strong> for comprehensive environment management.</p>

<p><strong>The combination of KVM’s proven stability with Cockpit’s modern management interface provides an excellent foundation for organizations transitioning to modern virtualization practices while maintaining operational simplicity.</strong></p>

<p><br /></p>

<hr />

<h2 id="references">References</h2>

<ul>
  <li><a href="https://www.linux-kvm.org/">KVM Official Website</a></li>
  <li><a href="https://libvirt.org/">libvirt Official Documentation</a></li>
  <li><a href="https://cockpit-project.org/">Cockpit Project Homepage</a></li>
  <li><a href="https://ubuntu.com/server/docs/virtualization-libvirt">Ubuntu KVM Guide</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/">Red Hat Virtualization Guide</a></li>
  <li><a href="https://www.qemu.org/documentation/">QEMU Documentation</a></li>
  <li><a href="https://libvirt.org/python.html">libvirt Python API</a></li>
  <li><a href="https://wiki.libvirt.org/page/Networking">KVM Networking Guide</a></li>
  <li><a href="https://libvirt.org/contact.html">libvirt Mailing Lists</a></li>
  <li><a href="https://github.com/cockpit-project/cockpit">Cockpit GitHub Repository</a></li>
  <li><a href="https://events.linuxfoundation.org/kvm-forum/">KVM Forum</a></li>
  <li><a href="https://stackoverflow.com/questions/tagged/kvm">Stack Overflow KVM Tag</a></li>
  <li><a href="https://linux.die.net/man/1/virt-install">virt-install Manual</a></li>
  <li><a href="https://github.com/cockpit-project/cockpit-machines">Cockpit Machines Plugin</a></li>
  <li><a href="https://libguestfs.org/">libguestfs Tools</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/ai/llm-ollama-open-webui/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1770607787/ollama-openwebui-llm-1_dl6rlu.png">
                                    
                                    <h3>Building an On-Premises LLM System with Ollama + Open WebUI</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/container/docker-image-optimization/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767693107/docker-image-opt-1_bfyljd.png">
                                    
                                    <h3>Docker Image Optimization Practical Guide</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/aws/aws-nacl-sg/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767938733/aws-security-group-network-acl-1_tjbvpd.png">
                                    
                                    <h3>AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="23">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/iac/ansible/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1755657938/ansible-1_qtomxt.png">
                
            </div>
            <h3 class="title">Ansible - Complete Guide to Infrastructure Automation and Galaxy Platform</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Learn how to install and configure KVM with Cockpit for intuitive web-based virtual machine management on Ubuntu/Debian systems&quot;%20https://somaz.blog/category/virtualization/cockpit/%20via%20&#64;twitter_username&hashtags=kvm,cockpit,virtualization,web-management,libvirt,qemu,linux"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/virtualization/cockpit/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/virtualization/cockpit/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "KVM and Cockpit Complete Virtualization Setup Guide",
            "headline": "Build modern virtualization environments with KVM hypervisor and Cockpit web management",
            "description": "Learn how to install and configure KVM with Cockpit for intuitive web-based virtual machine management on Ubuntu/Debian systems",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1755592289/cockpit-1_t5ufcx.png",
            "url": "https://somaz.blog/category/virtualization/cockpit/",
            "articleBody": "



Overview

In modern IT environments, virtualization technology has become essential for efficient server resource utilization and operational cost reduction.

KVM (Kernel-based Virtual Machine) is widely used in Linux environments as a hypervisor that provides high performance and stability.

This comprehensive guide demonstrates how to install KVM on Ubuntu/Debian-based systems and build an intuitive virtual machine management environment using Cockpit, a web-based management tool.

With Cockpit, you can easily create, manage, and monitor virtual machines through a browser interface without complex command-line operations.



Key Benefits of KVM + Cockpit


  Why Choose KVM and Cockpit?
  
    User-Friendly Management: Intuitive web interface instead of complex commands
    Real-time Monitoring: Live system resource usage and VM status monitoring
    Remote Access: Manage virtualization environments from anywhere via network
    Cost Efficiency: Open-source solution with no licensing costs
  






System Architecture Overview

Understanding the architecture helps optimize your virtualization setup and troubleshoot issues effectively.



KVM and Cockpit Stack


  
    graph TD
      A[Web Browser] --&amp;gt; B[Cockpit Web Interface :9090]
      B --&amp;gt; C[Cockpit-Machines Plugin]
      C --&amp;gt; D[libvirt API]
      D --&amp;gt; E[libvirtd Daemon]
      E --&amp;gt; F[KVM Hypervisor]
      F --&amp;gt; G[Hardware Layer]
      
      E --&amp;gt; H[VM 1]
      E --&amp;gt; I[VM 2]
      E --&amp;gt; J[VM N]
      
      style A fill:#f5f5f5,stroke:#333,stroke-width:1px
      style B fill:#a5d6a7,stroke:#333,stroke-width:1px
      style C fill:#64b5f6,stroke:#333,stroke-width:1px
      style D fill:#ffcc80,stroke:#333,stroke-width:1px
      style E fill:#ce93d8,stroke:#333,stroke-width:1px
      style F fill:#ffab91,stroke:#333,stroke-width:1px
      style G fill:#bcaaa4,stroke:#333,stroke-width:1px
  






Prerequisites and System Requirements

Before beginning the installation, ensure your system meets the necessary requirements.



Hardware Requirements


  
    
      Component
      Minimum Requirements
      Recommended
    
    
      CPU
      x86_64 with VT-x/AMD-V support
      Multi-core CPU with hardware virtualization
    
    
      Memory
      4 GB RAM
      8+ GB RAM for multiple VMs
    
    
      Storage
      50 GB available disk space
      SSD with 100+ GB for optimal performance
    
    
      Network
      Single network interface
      Multiple NICs for advanced networking
    
  




Software Requirements


  
    
      Software
      Requirements
    
    
      Operating System
      Ubuntu 20.04+ or Debian 11+ (64-bit)
    
    
      Kernel
      Linux kernel 4.15+ with KVM support
    
    
      User Privileges
      sudo access for installation and configuration
    
    
      Network Access
      Internet connection for package downloads
    
  






Step 1: System Preparation and Updates

Begin with essential system preparation to ensure a clean installation environment.



Update Package Repository

# Update package lists to get latest software information
sudo apt update

# Upgrade existing packages to latest versions (optional but recommended)
sudo apt upgrade -y

# Install essential build tools and dependencies
sudo apt install -y curl wget gpg software-properties-common


Verify System Compatibility

# Check if CPU supports virtualization
grep -E &apos;(vmx|svm)&apos; /proc/cpuinfo

# Alternative check using egrep
egrep -c &apos;(vmx|svm)&apos; /proc/cpuinfo
# Should return a number &amp;gt; 0

# Check if virtualization is enabled in BIOS
sudo apt install -y cpu-checker
sudo kvm-ok


Expected output for successful virtualization support:
INFO: /dev/kvm exists
KVM acceleration can be used






Step 2: KVM Installation and Configuration

Install the complete KVM virtualization stack with all necessary components.



Install Core KVM Packages





Package Descriptions


  
    
      Package
      Purpose
    
    
      cpu-checker
      Tool to check CPU virtualization support capabilities
    
    
      qemu-kvm
      Core KVM hypervisor package with QEMU backend
    
    
      libvirt-daemon-system
      System daemon for managing virtual machines
    
    
      bridge-utils
      Network bridge management utilities for VM networking
    
    
      libguestfs-tools
      Tools for manipulating virtual machine disk images
    
    
      virt-manager
      GUI-based virtual machine management tool
    
    
      virtinst
      Command-line tools for VM installation
    
    
      virt-viewer
      Virtual machine console viewer application
    
  




Verify KVM Installation

Check KVM Module Loading

# Verify KVM modules are loaded
lsmod | grep kvm

# Expected output (Intel):
# kvm_intel             245760  0
# kvm                   663552  1 kvm_intel

# Expected output (AMD):
# kvm_amd               106496  0
# kvm                   663552  1 kvm_amd


Test KVM Functionality

# Comprehensive KVM support verification
sudo kvm-ok

# Check libvirt version and capabilities
sudo virsh version

# List available capabilities
sudo virsh capabilities | head -20


Verify Device Access

# Check KVM device permissions
ls -la /dev/kvm
# Should show: crw-rw---- 1 root kvm ... /dev/kvm

# Check current user groups
groups $USER






Step 3: Libvirt Service Configuration

Configure and optimize the libvirt service for stable VM management.



Start and Enable Libvirt Services

# Check current libvirt daemon status
sudo systemctl status libvirtd

# Start libvirt daemon if not running
sudo systemctl start libvirtd

# Enable libvirt to start automatically at boot
sudo systemctl enable libvirtd

# Start and enable additional libvirt services
sudo systemctl enable --now libvirt-guests
sudo systemctl enable --now virtlogd


Configure User Permissions

# Add current user to libvirt group for VM management
sudo usermod -a -G libvirt $USER
sudo usermod -a -G kvm $USER

# Add any additional users who need VM access
# sudo usermod -a -G libvirt username

# Apply group changes (logout/login required for full effect)
newgrp libvirt


Verify Service Configuration

# Check libvirt daemon status
sudo systemctl is-active libvirtd
sudo systemctl is-enabled libvirtd

# Test libvirt connectivity
virsh list --all

# Check default network status
virsh net-list --all




Configure Default Network

# Ensure default libvirt network is available
sudo virsh net-start default
sudo virsh net-autostart default

# Verify network configuration
sudo virsh net-dumpxml default

# Check network bridge status
ip addr show virbr0






Step 4: Cockpit Installation and Setup

Install Cockpit web management interface with virtualization capabilities.



Install Cockpit Packages

# Install Cockpit core and machines plugin
sudo apt install -y cockpit cockpit-machines

# Install additional useful Cockpit modules
sudo apt install -y cockpit-networkmanager cockpit-storaged cockpit-packagekit cockpit-system


Cockpit Components


  
    
      Component
      Functionality
    
    
      cockpit
      Core web interface for system management
    
    
      cockpit-machines
      Virtual machine management plugin
    
    
      cockpit-networkmanager
      Network interface and configuration management
    
    
      cockpit-storaged
      Storage device and filesystem management
    
    
      cockpit-packagekit
      Software package management interface
    
  




Start and Enable Cockpit Service

# Start Cockpit service
sudo systemctl start cockpit

# Enable Cockpit to start at boot
sudo systemctl enable cockpit

# Check Cockpit service status
sudo systemctl status cockpit

# Verify Cockpit is listening on port 9090
sudo ss -tulpn | grep :9090






Step 5: Security Configuration

Implement essential security measures for your Cockpit installation.



Configure User Access Control

Restrict Root Access

# Create or edit disallowed users file
sudo vi /etc/cockpit/disallowed-users

# Add the following content to disable root login:
root


Create Dedicated VM Management User (Optional)

# Create a dedicated user for VM management
sudo useradd -m -s /bin/bash vmadmin
sudo passwd vmadmin

# Add to necessary groups
sudo usermod -a -G libvirt,kvm vmadmin

# Create sudo privileges for VM management
sudo visudo

# Add this line:
# vmadmin ALL=(ALL) NOPASSWD: /usr/bin/virsh, /usr/bin/virt-install




Firewall Configuration

# Check if UFW firewall is active
sudo ufw status

# If UFW is active, allow Cockpit access
sudo ufw allow 9090/tcp

# For more restrictive access, allow only from specific networks
# sudo ufw allow from 192.168.1.0/24 to any port 9090

# Alternative: Configure iptables directly
# sudo iptables -I INPUT -p tcp --dport 9090 -j ACCEPT




SSL/TLS Configuration (Optional)

Enable HTTPS with Custom Certificate





Apply Security Settings

# Restart Cockpit service to apply security changes
sudo systemctl restart cockpit

# Verify Cockpit is running with new configuration
sudo systemctl status cockpit

# Check Cockpit logs for any issues
sudo journalctl -u cockpit -f






Step 6: Web Interface Access and Initial Setup

Access and configure Cockpit through its web interface.



Access Cockpit Web Interface

Connection Information

# Web interface URL
http://&amp;lt;server_IP&amp;gt;:9090
# or with HTTPS (if configured)
https://&amp;lt;server_IP&amp;gt;:9090

# Get server IP address
ip addr show | grep inet

# Alternative methods to find IP
hostname -I


First Login


  Open Web Browser: Navigate to http://your-server-ip:9090
  Accept Certificate: For self-signed certificates, accept the security warning
  Login: Use your system user account credentials (not root)
  Enable Administrative Access: Check “Reuse my password for privileged tasks”




Initial Configuration

Dashboard Overview

After login, you’ll see the main dashboard with:

  System Information: CPU, memory, storage usage
  Services: System service status
  Logs: Recent system logs
  Network: Network interface status


Access Virtual Machines Section


  Navigate to Virtual Machines: Click on “Virtual Machines” in the left sidebar
  Install Extensions: If prompted, install the cockpit-machines package
  Verify Access: Ensure you can see the libvirt connection status






Step 7: Virtual Machine Creation and Management

Create and manage virtual machines through Cockpit’s intuitive interface.



Prepare VM Images

Download Cloud Images

# Create directory for VM images
sudo mkdir -p /var/lib/libvirt/images

# Download Ubuntu 22.04 (Jammy) Cloud Image
cd /tmp
wget https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img

# Download Ubuntu 24.04 (Noble) Cloud Image
wget https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img

# Move images to libvirt directory
sudo mv jammy-server-cloudimg-amd64.img /var/lib/libvirt/images/
sudo mv noble-server-cloudimg-amd64.img /var/lib/libvirt/images/

# Set appropriate permissions
sudo chown libvirt-qemu:kvm /var/lib/libvirt/images/*.img
sudo chmod 644 /var/lib/libvirt/images/*.img


Prepare Custom Images (Optional)





Create Virtual Machine via Cockpit

Step-by-Step VM Creation


  Access VM Creation:
    
      In Cockpit, go to “Virtual Machines”
      Click “Create VM” button
    
  
  VM Configuration:
    
      Name: Enter a descriptive name (e.g., “ubuntu-web-server”)
      Source: Select “Import existing disk image”
      Image: Browse to your cloud image file
      Memory: Allocate RAM (e.g., 2048 MB)
      vCPUs: Set number of virtual CPUs (e.g., 2)
    
  
  Network Configuration:
    
      Network: Select “Virtual network ‘default’: NAT”
      MAC: Leave auto-generated
    
  
  Storage Configuration:
    
      Bus type: VirtIO (recommended for performance)
      Cache: Default
    
  


Advanced VM Configuration





VM Management Operations

Basic VM Operations via Cockpit


  Start/Stop VMs: Use power buttons in VM list
  Console Access: Click “Console” to access VM desktop
  Resource Monitoring: View CPU, memory, disk usage
  Snapshots: Create and manage VM snapshots
  Clone VMs: Duplicate existing VMs


Command-Line VM Management

# List all VMs
virsh list --all

# Start VM
virsh start vm-name

# Stop VM gracefully
virsh shutdown vm-name

# Force stop VM
virsh destroy vm-name

# Get VM information
virsh dominfo vm-name

# Console access
virsh console vm-name

# Edit VM configuration
virsh edit vm-name






Step 8: Network Configuration and Troubleshooting

Configure advanced networking options and resolve common network issues.



Default Network Configuration

Verify Default Network

# Check default network status
virsh net-list --all

# Display default network configuration
virsh net-dumpxml default

# Check default network bridge
ip addr show virbr0

# View NAT rules
sudo iptables -t nat -L LIBVIRT_PRT -n


Default Network Details


  
    
      Configuration
      Details
    
    
      Network Name
      default
    
    
      Bridge Interface
      virbr0
    
    
      IP Range
      192.168.122.0/24 (typically)
    
    
      DHCP Range
      192.168.122.2 - 192.168.122.254
    
    
      Gateway
      192.168.122.1
    
  




Advanced Network Configuration

Create Custom Network

# Create custom network XML configuration
cat &amp;gt; /tmp/custom-network.xml &amp;lt;&amp;lt; EOF
&amp;lt;network&amp;gt;
  &amp;lt;name&amp;gt;custom-net&amp;lt;/name&amp;gt;
  &amp;lt;forward mode=&apos;nat&apos;/&amp;gt;
  &amp;lt;bridge name=&apos;virbr1&apos; stp=&apos;on&apos; delay=&apos;0&apos;/&amp;gt;
  &amp;lt;ip address=&apos;10.0.0.1&apos; netmask=&apos;255.255.255.0&apos;&amp;gt;
    &amp;lt;dhcp&amp;gt;
      &amp;lt;range start=&apos;10.0.0.10&apos; end=&apos;10.0.0.100&apos;/&amp;gt;
    &amp;lt;/dhcp&amp;gt;
  &amp;lt;/ip&amp;gt;
&amp;lt;/network&amp;gt;
EOF

# Define and start custom network
virsh net-define /tmp/custom-network.xml
virsh net-start custom-net
virsh net-autostart custom-net


Bridged Network Configuration

# Create bridge network for direct host network access
cat &amp;gt; /tmp/bridge-network.xml &amp;lt;&amp;lt; EOF
&amp;lt;network&amp;gt;
  &amp;lt;name&amp;gt;host-bridge&amp;lt;/name&amp;gt;
  &amp;lt;forward mode=&quot;bridge&quot;/&amp;gt;
  &amp;lt;bridge name=&quot;br0&quot;/&amp;gt;
&amp;lt;/network&amp;gt;
EOF

# Define bridge network
virsh net-define /tmp/bridge-network.xml
virsh net-start host-bridge
virsh net-autostart host-bridge




Common Network Troubleshooting

VM Network Connectivity Issues

# Check VM network interface configuration
virsh domiflist vm-name

# Verify network bridges
brctl show

# Check iptables rules
sudo iptables -L -n
sudo iptables -t nat -L -n

# Test connectivity from host to VM
ping 192.168.122.x  # Replace with VM IP

# Check libvirt network logs
sudo journalctl -u libvirtd | grep network


DNS Resolution Issues

# Check dnsmasq configuration (used by libvirt)
sudo systemctl status libvirt-guests

# Verify DNS forwarding
cat /var/lib/libvirt/dnsmasq/default.conf

# Test DNS resolution from VM
# (access VM console first)
nslookup google.com


Firewall Configuration

# Check if firewall is blocking VM traffic
sudo ufw status

# Allow VM network traffic
sudo ufw allow in on virbr0
sudo ufw allow out on virbr0

# For specific port forwarding
sudo iptables -t nat -A PREROUTING -p tcp --dport 8080 -j DNAT --to-destination 192.168.122.x:80






Performance Optimization and Best Practices

Optimize your KVM and Cockpit setup for maximum performance and reliability.



KVM Performance Tuning

CPU Optimization

# Enable CPU host-passthrough for better performance
virsh edit vm-name

# In VM XML configuration, change CPU mode:
# &amp;lt;cpu mode=&apos;host-passthrough&apos; check=&apos;none&apos;/&amp;gt;

# Enable CPU pinning for critical VMs
# &amp;lt;vcpu placement=&apos;static&apos; cpuset=&apos;0-3&apos;&amp;gt;4&amp;lt;/vcpu&amp;gt;
# &amp;lt;cputune&amp;gt;
#   &amp;lt;vcpupin vcpu=&apos;0&apos; cpuset=&apos;0&apos;/&amp;gt;
#   &amp;lt;vcpupin vcpu=&apos;1&apos; cpuset=&apos;1&apos;/&amp;gt;
# &amp;lt;/cputune&amp;gt;


Memory Optimization

# Configure memory ballooning
# Add to VM XML:
# &amp;lt;memballoon model=&apos;virtio&apos;/&amp;gt;

# Enable hugepages for better memory performance
sudo sysctl vm.nr_hugepages=1024

# Make hugepages persistent
echo &apos;vm.nr_hugepages=1024&apos; | sudo tee -a /etc/sysctl.conf

# Configure VM to use hugepages
# Add to VM XML:
# &amp;lt;memoryBacking&amp;gt;
#   &amp;lt;hugepages/&amp;gt;
# &amp;lt;/memoryBacking&amp;gt;


Storage Performance

# Use virtio-scsi for better I/O performance
# In VM XML disk configuration:
# &amp;lt;disk type=&apos;file&apos; device=&apos;disk&apos;&amp;gt;
#   &amp;lt;driver name=&apos;qemu&apos; type=&apos;qcow2&apos; cache=&apos;writeback&apos;/&amp;gt;
#   &amp;lt;source file=&apos;/var/lib/libvirt/images/vm.qcow2&apos;/&amp;gt;
#   &amp;lt;target dev=&apos;sda&apos; bus=&apos;scsi&apos;/&amp;gt;
#   &amp;lt;address type=&apos;drive&apos; controller=&apos;0&apos; bus=&apos;0&apos; target=&apos;0&apos; unit=&apos;0&apos;/&amp;gt;
# &amp;lt;/disk&amp;gt;

# Convert RAW images to QCOW2 for better performance
sudo qemu-img convert -f raw -O qcow2 image.raw image.qcow2

# Optimize existing QCOW2 images
sudo qemu-img convert -f qcow2 -O qcow2 -o preallocation=metadata old.qcow2 new.qcow2




Cockpit Performance Optimization

System Resource Monitoring

# Monitor system performance
htop
iotop
nethogs

# Check Cockpit resource usage
systemctl status cockpit
ps aux | grep cockpit


Optimize Cockpit Configuration

# Configure Cockpit for better performance
sudo vi /etc/cockpit/cockpit.conf

# Add optimization settings:
[WebService]
MaxStartups = 3
LoginTimeout = 10

# Restart Cockpit to apply changes
sudo systemctl restart cockpit




Monitoring and Logging

System Monitoring Setup

# Install monitoring tools
sudo apt install -y htop iotop nethogs

# Monitor libvirt logs
sudo journalctl -u libvirtd -f

# Monitor Cockpit logs
sudo journalctl -u cockpit -f

# Check VM performance
virt-top


Log Management

# Configure log rotation for libvirt
sudo vi /etc/logrotate.d/libvirt

# Content:
/var/log/libvirt/*.log {
    daily
    missingok
    rotate 7
    compress
    notifempty
    create 644 root root
    postrotate
        systemctl reload libvirtd
    endscript
}

# Test log rotation
sudo logrotate -d /etc/logrotate.d/libvirt






Security Hardening and Best Practices

Implement comprehensive security measures for production environments.



System Security

SELinux/AppArmor Configuration

# Check SELinux status (RHEL/CentOS)
sestatus

# Configure libvirt SELinux settings
sudo setsebool -P virt_use_execmem 1

# Check AppArmor status (Ubuntu/Debian)
sudo apparmor_status | grep libvirt

# Configure AppArmor for libvirt
sudo aa-complain /usr/sbin/libvirtd


File Permissions and Ownership

# Ensure correct ownership of VM images
sudo chown -R libvirt-qemu:kvm /var/lib/libvirt/images/
sudo chmod -R 644 /var/lib/libvirt/images/

# Secure libvirt configuration files
sudo chmod 600 /etc/libvirt/libvirtd.conf
sudo chown root:root /etc/libvirt/libvirtd.conf




Network Security

Firewall Configuration

# Configure UFW for KVM and Cockpit
sudo ufw allow ssh
sudo ufw allow 9090/tcp
sudo ufw allow in on virbr0
sudo ufw allow out on virbr0

# Enable UFW
sudo ufw --force enable

# Check firewall status
sudo ufw status verbose


Network Isolation

# Create isolated network for sensitive VMs
cat &amp;gt; /tmp/isolated-network.xml &amp;lt;&amp;lt; EOF
&amp;lt;network&amp;gt;
  &amp;lt;name&amp;gt;isolated&amp;lt;/name&amp;gt;
  &amp;lt;bridge name=&apos;virbr2&apos; stp=&apos;on&apos; delay=&apos;0&apos;/&amp;gt;
  &amp;lt;ip address=&apos;172.16.0.1&apos; netmask=&apos;255.255.255.0&apos;&amp;gt;
    &amp;lt;dhcp&amp;gt;
      &amp;lt;range start=&apos;172.16.0.10&apos; end=&apos;172.16.0.100&apos;/&amp;gt;
    &amp;lt;/dhcp&amp;gt;
  &amp;lt;/ip&amp;gt;
&amp;lt;/network&amp;gt;
EOF

virsh net-define /tmp/isolated-network.xml
virsh net-start isolated
virsh net-autostart isolated




Authentication and Access Control

Multi-Factor Authentication (Optional)

# Install libpam-google-authenticator for 2FA
sudo apt install -y libpam-google-authenticator

# Configure PAM for Cockpit
sudo vi /etc/pam.d/cockpit

# Add before @include common-auth:
# auth required pam_google_authenticator.so


User Access Auditing

# Monitor Cockpit access logs
sudo journalctl -u cockpit | grep &quot;Login&quot;

# Monitor libvirt operations
sudo auditctl -w /var/log/libvirt/ -p wa -k libvirt_access

# Check audit logs
sudo ausearch -k libvirt_access






Backup and Disaster Recovery

Implement comprehensive backup strategies for your virtual infrastructure.



VM Backup Strategies

Automated VM Backups

#!/bin/bash
# VM backup script
BACKUP_DIR=&quot;/backup/vms&quot;
DATE=$(date +%Y%m%d_%H%M%S)

# Create backup directory
mkdir -p $BACKUP_DIR

# Function to backup VM
backup_vm() {
    VM_NAME=$1
    echo &quot;Backing up VM: $VM_NAME&quot;
    
    # Create snapshot
    virsh snapshot-create-as $VM_NAME &quot;backup_$DATE&quot; --disk-only --atomic
    
    # Export VM configuration
    virsh dumpxml $VM_NAME &amp;gt; &quot;$BACKUP_DIR/${VM_NAME}_config_$DATE.xml&quot;
    
    # Copy disk images
    for DISK in $(virsh domblklist $VM_NAME | grep -v Target | awk &apos;{print $2}&apos; | grep -v &apos;^$&apos;); do
        if [ -f &quot;$DISK&quot; ]; then
            cp &quot;$DISK&quot; &quot;$BACKUP_DIR/$(basename $DISK)_$DATE&quot;
        fi
    done
    
    # Remove snapshot
    virsh snapshot-delete $VM_NAME &quot;backup_$DATE&quot; --metadata
    
    echo &quot;Backup completed for $VM_NAME&quot;
}

# Backup all running VMs
for VM in $(virsh list --name); do
    backup_vm $VM
done


Incremental Backups





System Configuration Backup







Troubleshooting Common Issues

Solutions for frequently encountered problems in KVM and Cockpit environments.



KVM-Specific Issues

VM Won’t Start

# Check VM configuration for errors
virsh edit vm-name

# Verify VM resources are available
virsh nodeinfo
free -h
df -h

# Check libvirt logs
sudo journalctl -u libvirtd | tail -20

# Test VM start with verbose output
virsh start vm-name --console


Performance Issues

# Check host resource usage
htop
iotop
iostat -x 1

# Monitor VM resource usage
virt-top

# Check VM disk I/O
virsh domblkstat vm-name

# Optimize VM configuration
virsh edit vm-name
# Enable virtio drivers, adjust memory/CPU allocation




Cockpit-Specific Issues

Web Interface Access Problems

# Check Cockpit service status
sudo systemctl status cockpit

# Verify port binding
sudo ss -tulpn | grep :9090

# Check firewall settings
sudo ufw status
sudo iptables -L -n | grep 9090

# Review Cockpit logs
sudo journalctl -u cockpit -f


Plugin Issues

# Reinstall cockpit-machines plugin
sudo apt remove cockpit-machines
sudo apt install cockpit-machines

# Clear browser cache and cookies
# Restart Cockpit service
sudo systemctl restart cockpit






Key Points


  KVM and Cockpit Setup Summary
  
    
      Complete Virtualization Stack
      - KVM hypervisor with libvirt management layer
      - Cockpit web interface for intuitive VM management
      - Comprehensive networking and storage options
      - Enterprise-grade security and monitoring capabilities
    
    
      Key Installation Components
      - qemu-kvm: Core hypervisor with hardware acceleration
      - libvirt-daemon-system: VM management and API layer
      - cockpit-machines: Web-based virtualization management
      - bridge-utils: Advanced network configuration tools
    
    
      Production Considerations
      - Implement proper security hardening and access controls
      - Configure automated backups and disaster recovery
      - Monitor performance and optimize resource allocation
      - Maintain regular system updates and security patches
    
  






Conclusion

KVM and Cockpit provide a powerful combination for modern virtualization environments, offering enterprise-grade performance with user-friendly management. This setup delivers the stability and performance of KVM hypervisor with the accessibility of web-based administration through Cockpit.

The integration of these technologies enables organizations to build scalable, secure, and manageable virtual infrastructure without the complexity and cost of proprietary solutions. From development environments to production deployments, this stack provides the flexibility and reliability needed for modern IT operations.



Key Implementation Benefits


  User-Friendly Management: Intuitive web interface eliminates complex command-line operations
  Cost Efficiency: Open-source solution with no licensing fees
  High Performance: Native KVM performance with hardware acceleration
  Scalability: Supports everything from single-node setups to multi-host environments
  Security: Comprehensive security features and access controls




Future Recommendations

As containerization and cloud-native technologies continue evolving, KVM and Cockpit remain relevant for traditional virtualization workloads and hybrid infrastructure scenarios. Consider integrating with container orchestration platforms and infrastructure-as-code tools for comprehensive environment management.

The combination of KVM’s proven stability with Cockpit’s modern management interface provides an excellent foundation for organizations transitioning to modern virtualization practices while maintaining operational simplicity.





References


  KVM Official Website
  libvirt Official Documentation
  Cockpit Project Homepage
  Ubuntu KVM Guide
  Red Hat Virtualization Guide
  QEMU Documentation
  libvirt Python API
  KVM Networking Guide
  libvirt Mailing Lists
  Cockpit GitHub Repository
  KVM Forum
  Stack Overflow KVM Tag
  virt-install Manual
  Cockpit Machines Plugin
  libguestfs Tools

",
            "wordcount": "4210",
            "inLanguage": "en",
            "dateCreated": "2026-01-06/",
            "datePublished": "2026-01-06/",
            "dateModified": "2026-01-06/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "VIRTUALIZATION",
            "articleSection": "VIRTUALIZATION",
            "keywords": ["kvm","cockpit","virtualization","web-management","libvirt","qemu","linux"]
        }
        </script>
    </body>
</html>
