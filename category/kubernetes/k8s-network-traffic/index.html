<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>Kubernetes Network Traffic Flow | somaz</title>
    <meta name="description" content="A comprehensive guide to Kubernetes networking in both CSP and On-premise environments">
    
        <meta name="keywords" content="kubernetes, networking, traffic-flow, ingress, service-mesh, cni">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kubernetes Network Traffic Flow | somaz">
    <meta name="twitter:description" content="A comprehensive guide to Kubernetes networking in both CSP and On-premise environments">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737342408/kubernetes-network-flow_urqjgq.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/kubernetes/k8s-network-traffic/">
    <meta property="og:title" content="Kubernetes Network Traffic Flow | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737342408/kubernetes-network-flow_urqjgq.png">
    <meta property="og:description" content="A comprehensive guide to Kubernetes networking in both CSP and On-premise environments">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/kubernetes/k8s-network-traffic/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-01-12T09:00:00+00:00">
                            


January 12, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>12 min to read</span>
                </p>
                <h1 class="post-title">Kubernetes Network Traffic Flow</h1>
                <p class="post-subtitle">Understanding network communication in CSP and On-premise environments</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737342408/kubernetes-network-flow_urqjgq.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <ul>
  <li><a href="https://opensource.com/article/22/6/kubernetes-networking-fundamentals">image reference link</a></li>
</ul>

<p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>Understanding Kubernetes network traffic flow is crucial for proper cluster architecture, security, and troubleshooting. This guide explores networking in both Cloud Service Provider (CSP) and on-premise environments, detailing how traffic moves through different components of a Kubernetes cluster.</p>

<div class="info-box info-box-default-not-check">
  <strong>Kubernetes Networking Principles</strong>
  <p>Kubernetes networking is built on several key principles:</p>
  <ul>
    <li>Every Pod gets its own IP address</li>
    <li>Pods can communicate with all other pods without NAT</li>
    <li>Agents on a node can communicate with all pods on that node</li>
    <li>The Pod network is flat - all pods can reach each other directly</li>
  </ul>
</div>

<p><br /></p>

<h2 id="network-traffic-paths">Network Traffic Paths</h2>

<p>Kubernetes networking involves several distinct traffic paths, each with its own characteristics and components.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[External Traffic] --&gt; B[Load Balancer / Ingress]
      B --&gt; C[Services]
      C --&gt; D[Pods]
      D --&gt; E[Containers]
      
      F[Pod-to-Pod Traffic] --&gt; D
      G[Pod-to-Service Traffic] --&gt; C
      H[External Egress Traffic] --&gt; I[Node Network]
      D --&gt; H
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style E fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<p><br /></p>

<h2 id="network-environments-and-traffic-flow">Network Environments and Traffic Flow</h2>

<p><br /></p>

<h3 id="csp-environment-traffic-flow">CSP Environment Traffic Flow</h3>

<p>In cloud service provider environments (AWS, GCP, Azure, etc.), Kubernetes leverages cloud infrastructure for external connectivity.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph LR
      A[Internet] --&gt; B[Cloud Load Balancer]
      B --&gt; C[Ingress Controller or<br />Service LoadBalancer]
      C --&gt; D{Routing}
      D --&gt; E[Pod 1]
      D --&gt; F[Pod 2]
      D --&gt; G[Pod 3]
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<h4 id="key-components-in-csp-environments">Key Components in CSP Environments</h4>

<ol>
  <li><strong>External Load Balancer</strong>:
    <ul>
      <li>Provided by the cloud provider (e.g., AWS ELB/ALB, GCP Load Balancer, Azure Load Balancer)</li>
      <li>Located outside the Kubernetes cluster in the cloud provider’s infrastructure</li>
      <li>Automatically provisioned when a Service of type <code class="language-plaintext highlighter-rouge">LoadBalancer</code> is created</li>
      <li>Routes external traffic to nodes in the cluster</li>
    </ul>
  </li>
  <li><strong>Ingress Controller/Service</strong>:
    <ul>
      <li>Ingress Controllers handle HTTP/HTTPS traffic routing based on hostnames and paths</li>
      <li>Services of type <code class="language-plaintext highlighter-rouge">LoadBalancer</code> expose non-HTTP protocols</li>
      <li>Receive traffic from the cloud load balancer and route it to the appropriate pods</li>
    </ul>
  </li>
  <li><strong>Pods</strong>:
    <ul>
      <li>End destinations for network traffic</li>
      <li>Run application containers</li>
      <li>Each has a unique IP address within the cluster</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h3 id="on-premise-environment-traffic-flow">On-premise Environment Traffic Flow</h3>

<p>On-premise Kubernetes deployments require different networking approaches since they don’t have cloud provider integration.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph LR
      A[Internet] --&gt; B[On-premise Load Balancer<br />or Router]
      B --&gt; C[Ingress Controller<br />NodePort or MetalLB]
      C --&gt; D{Routing}
      D --&gt; E[Pod 1]
      D --&gt; F[Pod 2]
      D --&gt; G[Pod 3]
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<h4 id="key-components-in-on-premise-environments">Key Components in On-premise Environments</h4>

<ol>
  <li><strong>External Load Balancer/Router</strong>:
    <ul>
      <li>Self-managed hardware or software load balancer (e.g., F5, NGINX, HAProxy)</li>
      <li>Located within the on-premise data center</li>
      <li>Manually configured to route traffic to Kubernetes nodes</li>
    </ul>
  </li>
  <li><strong>Ingress Controller/Service</strong>:
    <ul>
      <li>Similar role as in CSP environments</li>
      <li>Often exposed via <code class="language-plaintext highlighter-rouge">NodePort</code> services or with MetalLB</li>
      <li>Receive traffic from the external load balancer and route it to appropriate pods</li>
    </ul>
  </li>
  <li><strong>Pods</strong>:
    <ul>
      <li>Functionally identical to pods in CSP environments</li>
      <li>Network connectivity may be implemented differently depending on CNI plugin choice</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h2 id="ingress-controllers-in-different-environments">Ingress Controllers in Different Environments</h2>

<h3 id="ingress-controllers-in-csp-environments">Ingress Controllers in CSP Environments</h3>

<p>In cloud environments, ingress controllers are tightly integrated with cloud provider load balancing services.</p>

<div class="info-box info-box-default">
  <strong>CSP Ingress Controller Integration</strong>
  <p>When you deploy an Ingress Controller in a CSP environment:</p>
  <ol>
    <li>The Ingress Controller pod(s) are deployed in the cluster</li>
    <li>A Service of type LoadBalancer is created for the Ingress Controller</li>
    <li>The CSP automatically provisions an external load balancer and assigns it a public IP</li>
    <li>The CSP configures the load balancer to route traffic to the Ingress Controller</li>
    <li>The Ingress Controller handles routing based on Ingress resources</li>
  </ol>
</div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example AWS ALB Ingress Controller configuration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">example-ingress</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">alb</span>
    <span class="na">alb.ingress.kubernetes.io/scheme</span><span class="pi">:</span> <span class="s">internet-facing</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
        <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
        <span class="na">backend</span><span class="pi">:</span>
          <span class="na">service</span><span class="pi">:</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">example-service</span>
            <span class="na">port</span><span class="pi">:</span>
              <span class="na">number</span><span class="pi">:</span> <span class="m">80</span>
</code></pre></div></div>

<h3 id="ingress-controllers-in-on-premise-environments">Ingress Controllers in On-premise Environments</h3>

<p>In on-premise environments, the LoadBalancer service type doesn’t automatically receive an external IP without additional components.</p>

<div class="info-box info-box-warning-not-check">
  <strong>On-premise Challenges</strong>
  <p>In on-premise environments, several challenges must be addressed:</p>
  <ul>
    <li>No automatic external IP assignment for LoadBalancer services</li>
    <li>Manual configuration of external load balancers</li>
    <li>IP address management</li>
    <li>Network routing between external networks and the Kubernetes cluster</li>
  </ul>
</div>

<p>On-premise deployments typically use one of these approaches:</p>

<ol>
  <li><strong>NodePort Services</strong>:
    <ul>
      <li>Expose the Ingress Controller on a port on each node (30000-32767 range)</li>
      <li>Configure external load balancer to distribute traffic to these ports across nodes</li>
    </ul>
  </li>
  <li><strong>MetalLB or similar solutions</strong>:
    <ul>
      <li>Enables LoadBalancer service type in on-premise environments</li>
      <li>Provides automatic IP assignment from a configured pool</li>
    </ul>
  </li>
</ol>

<p><br /><br /></p>

<h2 id="metallb-for-on-premise-load-balancing">MetalLB for On-premise Load Balancing</h2>

<p>MetalLB is a popular solution for implementing LoadBalancer services in on-premise Kubernetes clusters.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph LR
      A[Client] --&gt; B[MetalLB Managed<br />IP Address]
      B --&gt; C[MetalLB Speaker<br />Layer 2 or BGP]
      C --&gt; D[Kubernetes<br />Service LoadBalancer]
      D --&gt; E[Target Pods]
      
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<h3 id="metallb-configuration">MetalLB Configuration</h3>

<p>MetalLB works in two modes:</p>

<ol>
  <li><strong>Layer 2 Mode</strong>: Uses ARP (IPv4) or NDP (IPv6) to claim IP addresses on the local network</li>
  <li><strong>BGP Mode</strong>: Establishes BGP peering sessions with network routers for more advanced configurations</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example MetalLB configuration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metallb.io/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">IPAddressPool</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">production-pool</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">addresses</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">192.168.1.100-192.168.1.150</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">metallb.io/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">L2Advertisement</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">l2-advertisement</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ipAddressPools</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">production-pool</span>
</code></pre></div></div>

<p>When a LoadBalancer service is deployed with MetalLB:</p>

<ol>
  <li>MetalLB assigns an IP from the configured pool</li>
  <li>The speaker component advertises the IP on the local network</li>
  <li>Traffic sent to that IP is routed to the appropriate service</li>
  <li>The service distributes traffic to the pods</li>
</ol>

<p><br /></p>

<h2 id="component-communication-in-kubernetes">Component Communication in Kubernetes</h2>

<p>Kubernetes networking enables several types of communication between different components in a cluster.</p>

<p><br /></p>

<h3 id="container-to-container-communication">Container-to-Container Communication</h3>

<p>Containers within the same Pod share the same network namespace, enabling localhost communication.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      subgraph "Pod"
        A[Container A<br />Port 8080] --- B[Container B<br />Port 9090]
        A --&gt; |localhost:9090| B
        B --&gt; |localhost:8080| A
      end
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style B fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<p><strong>Key Characteristics</strong>:</p>
<ul>
  <li>Containers in the same pod share the same IP address</li>
  <li>They can communicate via localhost</li>
  <li>Shared volumes allow file-based communication</li>
  <li>Container ports must be unique within a pod</li>
  <li>This enables sidecar, ambassador, and adapter patterns</li>
</ul>

<p><br /></p>

<h3 id="pod-to-pod-communication">Pod-to-Pod Communication</h3>

<p>Kubernetes ensures all pods can communicate directly with each other regardless of their node location.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      subgraph "Node 1"
        A[Pod A<br />10.244.1.2]
        B[Pod B<br />10.244.1.3]
      end
      
      subgraph "Node 2"
        C[Pod C<br />10.244.2.2]
        D[Pod D<br />10.244.2.3]
      end
      
      A &lt;--&gt; B
      A &lt;--&gt; C
      A &lt;--&gt; D
      B &lt;--&gt; C
      B &lt;--&gt; D
      C &lt;--&gt; D
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style D fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<p><strong>Key Characteristics</strong>:</p>
<ul>
  <li>Every pod has a unique IP address</li>
  <li>All pods can reach each other without NAT</li>
  <li>CNI (Container Network Interface) plugins implement this functionality</li>
  <li>Different CNI implementations (Calico, Flannel, Cilium, etc.) provide various features and performance characteristics</li>
  <li>Cross-node communication typically uses overlay networks or direct routing</li>
</ul>

<p><br /></p>

<h3 id="pod-to-service-communication">Pod-to-Service Communication</h3>

<p>Services provide stable endpoints for pods, handling internal load balancing and service discovery.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Client Pod<br />10.244.1.2] --&gt; |ClusterIP<br />10.96.0.10| B[Kubernetes Service]
      B --&gt; C[Endpoint 1<br />10.244.2.2]
      B --&gt; D[Endpoint 2<br />10.244.3.3]
      B --&gt; E[Endpoint 3<br />10.244.1.4]
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style B fill:#ffa,stroke:#333,stroke-width:2px
  </div>
</div>

<p><strong>Key Components</strong>:</p>
<ul>
  <li><strong>Pod</strong>: Source of traffic, with its own IP address</li>
  <li><strong>Virtual Interface</strong>: Each pod has an eth0 interface connecting to the node’s network</li>
  <li><strong>Node</strong>: Hosts multiple pods and manages network traffic</li>
  <li><strong>kube-proxy</strong>: Runs on each node, managing service routing using iptables, IPVS, or userspace proxying</li>
  <li><strong>Service</strong>: Provides a stable ClusterIP that routes to a dynamic set of pod endpoints</li>
  <li><strong>Cluster Network</strong>: Enables all communication across the cluster</li>
</ul>

<h3 id="internet-to-service-communication">Internet-to-Service Communication</h3>

<p>External traffic enters the cluster through several different mechanisms.</p>

<div style="width: 100%; margin: 20px auto;">
  <div class="mermaid">
    graph TD
      A[Internet<br />Client] --&gt; B{Access Type}
      
      B --&gt; |LoadBalancer| C[Cloud<br />Load Balancer]
      C --&gt; G[Service<br />LoadBalancer]
      
      B --&gt; |NodePort| D[Any Node<br />Port 30000-32767]
      D --&gt; H[Service<br />NodePort]
      
      B --&gt; |Ingress| E[Ingress<br />Controller]
      E --&gt; I[Ingress<br />Resource]
      I --&gt; J[Service<br />ClusterIP]
      
      G --&gt; K[Target Pods]
      H --&gt; K
      J --&gt; K
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style K fill:#bbf,stroke:#333,stroke-width:2px
  </div>
</div>

<p><strong>Access Types</strong>:</p>
<ol>
  <li><strong>LoadBalancer Service</strong>:
    <ul>
      <li>Automatically provisions a cloud load balancer in CSP environments</li>
      <li>Requires MetalLB or similar solution in on-premise deployments</li>
      <li>Provides stable external IP address</li>
    </ul>
  </li>
  <li><strong>NodePort Service</strong>:
    <ul>
      <li>Opens a specific port on all nodes</li>
      <li>Allows access via any node’s IP address</li>
      <li>Port range is limited to 30000-32767 by default</li>
    </ul>
  </li>
  <li><strong>Ingress</strong>:
    <ul>
      <li>HTTP/HTTPS-based routing layer</li>
      <li>Enables hostname and path-based routing</li>
      <li>Can provide SSL termination, authentication, and more sophisticated traffic management</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h2 id="network-components-and-features">Network Components and Features</h2>

<h3 id="network-components-table">Network Components Table</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 20%;">Component</th>
      <th style="width: 30%;">Purpose</th>
      <th style="width: 25%;">Communication Type</th>
      <th style="width: 25%;">Implementation Examples</th>
    </tr>
    <tr>
      <td>🛠️ <code>Container</code></td>
      <td>Application runtime environment</td>
      <td>localhost (127.0.0.1)</td>
      <td>Docker, containerd, CRI-O</td>
    </tr>
    <tr>
      <td>📦 <code>Pod</code></td>
      <td>Basic scheduling unit, shared network namespace</td>
      <td>Pod IP (e.g., 10.244.1.2)</td>
      <td>kubelet, container runtime</td>
    </tr>
    <tr>
      <td>🖥️ <code>Service</code></td>
      <td>Stable endpoint for pod sets</td>
      <td>ClusterIP (e.g., 10.96.0.10)</td>
      <td>kube-proxy, CoreDNS</td>
    </tr>
    <tr>
      <td>🌐 <code>Ingress</code></td>
      <td>HTTP/HTTPS routing to services</td>
      <td>HTTP(S) host/path based</td>
      <td>NGINX, Traefik, Contour</td>
    </tr>
    <tr>
      <td>🔌 <code>CNI Plugin</code></td>
      <td>Pod networking implementation</td>
      <td>Pod-to-pod networking</td>
      <td>Calico, Flannel, Cilium</td>
    </tr>
    <tr>
      <td>⚖️ <code>Load Balancer</code></td>
      <td>External traffic distribution</td>
      <td>External IP to Service</td>
      <td>Cloud LB, MetalLB, HAProxy</td>
    </tr>
  </table>
</div>

<h3 id="key-network-features">Key Network Features</h3>

<div class="info-box info-box-success-not-check">
  <strong>Kubernetes Network Features by Layer</strong>
  <ul>
    <li>
      <strong>Pod Networking (Layer 3)</strong><br />
      - Flat network space<br />
      - No NAT between pods<br />
      - Unique IP per pod<br />
      - Implemented by CNI plugins
    </li>
    <li>
      <strong>Service Networking (Layer 4)</strong><br />
      - Stable endpoints via ClusterIP<br />
      - Load balancing across pods<br />
      - Service discovery via DNS<br />
      - Implemented by kube-proxy and CoreDNS
    </li>
    <li>
      <strong>Application Routing (Layer 7)</strong><br />
      - HTTP/HTTPS routing via Ingress<br />
      - Path and hostname based routing<br />
      - SSL termination<br />
      - Authentication options
    </li>
  </ul>
</div>

<p><br /></p>

<h2 id="advanced-networking-concepts">Advanced Networking Concepts</h2>

<h3 id="network-policies">Network Policies</h3>

<p>Network Policies provide firewall-like rules for pod-to-pod communication, enabling micro-segmentation.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">NetworkPolicy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">allow-frontend-to-backend</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">podSelector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">backend</span>
  <span class="na">policyTypes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Ingress</span>
  <span class="na">ingress</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">podSelector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
          <span class="na">app</span><span class="pi">:</span> <span class="s">frontend</span>
    <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
</code></pre></div></div>

<h3 id="service-mesh">Service Mesh</h3>

<p>Service meshes like Istio, Linkerd, and Consul provide advanced networking capabilities for microservices:</p>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 25%;">Feature</th>
      <th style="width: 75%;">Description</th>
    </tr>
    <tr>
      <td>Traffic Management</td>
      <td>Fine-grained routing, traffic splitting, A/B testing, canary deployments</td>
    </tr>
    <tr>
      <td>Security</td>
      <td>Mutual TLS, certificate management, authentication, authorization</td>
    </tr>
    <tr>
      <td>Observability</td>
      <td>Distributed tracing, metrics collection, traffic visualization</td>
    </tr>
    <tr>
      <td>Reliability</td>
      <td>Circuit breaking, retries, timeouts, fault injection</td>
    </tr>
  </table>
</div>

<h3 id="dns-in-kubernetes">DNS in Kubernetes</h3>

<p>CoreDNS provides service discovery within Kubernetes clusters:</p>

<ul>
  <li>Each Service gets a DNS entry: <code class="language-plaintext highlighter-rouge">&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code></li>
  <li>Pods can have DNS entries (if enabled): <code class="language-plaintext highlighter-rouge">&lt;pod-ip-with-dashes&gt;.&lt;namespace&gt;.pod.cluster.local</code></li>
  <li>DNS resolution is handled by CoreDNS pods in the <code class="language-plaintext highlighter-rouge">kube-system</code> namespace</li>
</ul>

<p><br /></p>

<h2 id="troubleshooting-kubernetes-networking">Troubleshooting Kubernetes Networking</h2>

<p>Common networking issues and diagnostic commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if pods can reach each other</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;pod-name&gt; <span class="nt">--</span> ping &lt;other-pod-ip&gt;

<span class="c"># Check DNS resolution from a pod</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;pod-name&gt; <span class="nt">--</span> nslookup &lt;service-name&gt;

<span class="c"># Examine service configuration</span>
kubectl describe service &lt;service-name&gt;

<span class="c"># Check endpoints for a service</span>
kubectl get endpoints &lt;service-name&gt;

<span class="c"># Test connectivity to a service</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;pod-name&gt; <span class="nt">--</span> curl &lt;service-name&gt;:&lt;port&gt;

<span class="c"># Check ingress configuration</span>
kubectl describe ingress &lt;ingress-name&gt;

<span class="c"># View network policies</span>
kubectl get networkpolicies
</code></pre></div></div>

<p><br /></p>

<h2 id="key-points">Key Points</h2>

<div class="info-box info-box-default">
  <strong>Kubernetes Networking Summary</strong>
  <ul>
    <li>
      <strong>Architecture Differences</strong><br />
      - CSP environments leverage cloud load balancers<br />
      - On-premise requires solutions like MetalLB<br />
      - Both share common internal networking principles
    </li>
    <li>
      <strong>Traffic Flow</strong><br />
      - External → Ingress/Service → Pods → Containers<br />
      - Pod-to-Pod communication across nodes<br />
      - Service abstraction for stable endpoints
    </li>
    <li>
      <strong>Implementation Considerations</strong><br />
      - CNI plugin selection affects performance and features<br />
      - NetworkPolicy support varies by CNI plugin<br />
      - Service mesh adds overhead but provides advanced features
    </li>
  </ul>
</div>

<p><br /></p>

<hr />

<h2 id="references">References</h2>

<ul>
  <li><a href="https://opensource.com/article/22/6/kubernetes-networking-fundamentals">Kubernetes Networking Fundamentals</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/cluster-administration/networking/">Kubernetes Networking Guide</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/services-networking/network-policies/">Kubernetes Network Policies</a></li>
  <li><a href="https://metallb.universe.tf/">MetalLB Documentation</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service Networking in Kubernetes</a></li>
  <li><a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/">DNS for Services and Pods</a></li>
  <li><a href="https://github.com/containernetworking/cni/blob/master/SPEC.md">Container Network Interface (CNI) Specification</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/kubernetes/kubernetes-endpoints-endpointslices/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1745818882/endpoints-endpointslices_bhba68.png">
                                    
                                    <h3>Understanding Kubernetes Endpoints and EndpointSlices</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/security/ssh-tunneling-guide/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1745818610/ssh-tunnel_feuxns.png">
                                    
                                    <h3>Mastering SSH Tunneling for Secure Remote Access</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/openstack/openstack-neutron/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1742267532/openstack_t2tmoc.png">
                                    
                                    <h3>Deep Dive into OpenStack Neutron</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="12">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/category/kubernetes/k8s-headless-service/" class="post-preview">
        <div class="image">
            
                <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737350318/kubernetes-headless_aou0f1.png">
            
        </div>
        <h3 class="title">Kubernetes Headless Services</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;A comprehensive guide to Kubernetes networking in both CSP and On-premise environments&quot;%20https://somaz.blog/category/kubernetes/k8s-network-traffic/%20via%20&#64;twitter_username&hashtags=kubernetes,networking,traffic-flow,ingress,service-mesh,cni"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/kubernetes/k8s-network-traffic/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/kubernetes/k8s-network-traffic/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "Kubernetes Network Traffic Flow",
            "headline": "Understanding network communication in CSP and On-premise environments",
            "description": "A comprehensive guide to Kubernetes networking in both CSP and On-premise environments",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737342408/kubernetes-network-flow_urqjgq.png",
            "url": "https://somaz.blog/category/kubernetes/k8s-network-traffic/",
            "articleBody": "
  image reference link






Overview

Understanding Kubernetes network traffic flow is crucial for proper cluster architecture, security, and troubleshooting. This guide explores networking in both Cloud Service Provider (CSP) and on-premise environments, detailing how traffic moves through different components of a Kubernetes cluster.


  Kubernetes Networking Principles
  Kubernetes networking is built on several key principles:
  
    Every Pod gets its own IP address
    Pods can communicate with all other pods without NAT
    Agents on a node can communicate with all pods on that node
    The Pod network is flat - all pods can reach each other directly
  




Network Traffic Paths

Kubernetes networking involves several distinct traffic paths, each with its own characteristics and components.


  
    graph TD
      A[External Traffic] --&amp;gt; B[Load Balancer / Ingress]
      B --&amp;gt; C[Services]
      C --&amp;gt; D[Pods]
      D --&amp;gt; E[Containers]
      
      F[Pod-to-Pod Traffic] --&amp;gt; D
      G[Pod-to-Service Traffic] --&amp;gt; C
      H[External Egress Traffic] --&amp;gt; I[Node Network]
      D --&amp;gt; H
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style E fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  




Network Environments and Traffic Flow



CSP Environment Traffic Flow

In cloud service provider environments (AWS, GCP, Azure, etc.), Kubernetes leverages cloud infrastructure for external connectivity.


  
    graph LR
      A[Internet] --&amp;gt; B[Cloud Load Balancer]
      B --&amp;gt; C[Ingress Controller orService LoadBalancer]
      C --&amp;gt; D{Routing}
      D --&amp;gt; E[Pod 1]
      D --&amp;gt; F[Pod 2]
      D --&amp;gt; G[Pod 3]
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  


Key Components in CSP Environments


  External Load Balancer:
    
      Provided by the cloud provider (e.g., AWS ELB/ALB, GCP Load Balancer, Azure Load Balancer)
      Located outside the Kubernetes cluster in the cloud provider’s infrastructure
      Automatically provisioned when a Service of type LoadBalancer is created
      Routes external traffic to nodes in the cluster
    
  
  Ingress Controller/Service:
    
      Ingress Controllers handle HTTP/HTTPS traffic routing based on hostnames and paths
      Services of type LoadBalancer expose non-HTTP protocols
      Receive traffic from the cloud load balancer and route it to the appropriate pods
    
  
  Pods:
    
      End destinations for network traffic
      Run application containers
      Each has a unique IP address within the cluster
    
  




On-premise Environment Traffic Flow

On-premise Kubernetes deployments require different networking approaches since they don’t have cloud provider integration.


  
    graph LR
      A[Internet] --&amp;gt; B[On-premise Load Balanceror Router]
      B --&amp;gt; C[Ingress ControllerNodePort or MetalLB]
      C --&amp;gt; D{Routing}
      D --&amp;gt; E[Pod 1]
      D --&amp;gt; F[Pod 2]
      D --&amp;gt; G[Pod 3]
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  


Key Components in On-premise Environments


  External Load Balancer/Router:
    
      Self-managed hardware or software load balancer (e.g., F5, NGINX, HAProxy)
      Located within the on-premise data center
      Manually configured to route traffic to Kubernetes nodes
    
  
  Ingress Controller/Service:
    
      Similar role as in CSP environments
      Often exposed via NodePort services or with MetalLB
      Receive traffic from the external load balancer and route it to appropriate pods
    
  
  Pods:
    
      Functionally identical to pods in CSP environments
      Network connectivity may be implemented differently depending on CNI plugin choice
    
  




Ingress Controllers in Different Environments

Ingress Controllers in CSP Environments

In cloud environments, ingress controllers are tightly integrated with cloud provider load balancing services.


  CSP Ingress Controller Integration
  When you deploy an Ingress Controller in a CSP environment:
  
    The Ingress Controller pod(s) are deployed in the cluster
    A Service of type LoadBalancer is created for the Ingress Controller
    The CSP automatically provisions an external load balancer and assigns it a public IP
    The CSP configures the load balancer to route traffic to the Ingress Controller
    The Ingress Controller handles routing based on Ingress resources
  


# Example AWS ALB Ingress Controller configuration
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
spec:
  rules:
  - host: example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: example-service
            port:
              number: 80


Ingress Controllers in On-premise Environments

In on-premise environments, the LoadBalancer service type doesn’t automatically receive an external IP without additional components.


  On-premise Challenges
  In on-premise environments, several challenges must be addressed:
  
    No automatic external IP assignment for LoadBalancer services
    Manual configuration of external load balancers
    IP address management
    Network routing between external networks and the Kubernetes cluster
  


On-premise deployments typically use one of these approaches:


  NodePort Services:
    
      Expose the Ingress Controller on a port on each node (30000-32767 range)
      Configure external load balancer to distribute traffic to these ports across nodes
    
  
  MetalLB or similar solutions:
    
      Enables LoadBalancer service type in on-premise environments
      Provides automatic IP assignment from a configured pool
    
  




MetalLB for On-premise Load Balancing

MetalLB is a popular solution for implementing LoadBalancer services in on-premise Kubernetes clusters.


  
    graph LR
      A[Client] --&amp;gt; B[MetalLB ManagedIP Address]
      B --&amp;gt; C[MetalLB SpeakerLayer 2 or BGP]
      C --&amp;gt; D[KubernetesService LoadBalancer]
      D --&amp;gt; E[Target Pods]
      
      style B fill:#bbf,stroke:#333,stroke-width:2px
      style C fill:#ffa,stroke:#333,stroke-width:2px
  


MetalLB Configuration

MetalLB works in two modes:


  Layer 2 Mode: Uses ARP (IPv4) or NDP (IPv6) to claim IP addresses on the local network
  BGP Mode: Establishes BGP peering sessions with network routers for more advanced configurations


# Example MetalLB configuration
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: production-pool
  namespace: metallb-system
spec:
  addresses:
  - 192.168.1.100-192.168.1.150

---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: l2-advertisement
  namespace: metallb-system
spec:
  ipAddressPools:
  - production-pool


When a LoadBalancer service is deployed with MetalLB:


  MetalLB assigns an IP from the configured pool
  The speaker component advertises the IP on the local network
  Traffic sent to that IP is routed to the appropriate service
  The service distributes traffic to the pods




Component Communication in Kubernetes

Kubernetes networking enables several types of communication between different components in a cluster.



Container-to-Container Communication

Containers within the same Pod share the same network namespace, enabling localhost communication.


  
    graph TD
      subgraph &quot;Pod&quot;
        A[Container APort 8080] --- B[Container BPort 9090]
        A --&amp;gt; |localhost:9090| B
        B --&amp;gt; |localhost:8080| A
      end
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style B fill:#ffa,stroke:#333,stroke-width:2px
  


Key Characteristics:

  Containers in the same pod share the same IP address
  They can communicate via localhost
  Shared volumes allow file-based communication
  Container ports must be unique within a pod
  This enables sidecar, ambassador, and adapter patterns




Pod-to-Pod Communication

Kubernetes ensures all pods can communicate directly with each other regardless of their node location.


  
    graph TD
      subgraph &quot;Node 1&quot;
        A[Pod A10.244.1.2]
        B[Pod B10.244.1.3]
      end
      
      subgraph &quot;Node 2&quot;
        C[Pod C10.244.2.2]
        D[Pod D10.244.2.3]
      end
      
      A &amp;lt;--&amp;gt; B
      A &amp;lt;--&amp;gt; C
      A &amp;lt;--&amp;gt; D
      B &amp;lt;--&amp;gt; C
      B &amp;lt;--&amp;gt; D
      C &amp;lt;--&amp;gt; D
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style D fill:#ffa,stroke:#333,stroke-width:2px
  


Key Characteristics:

  Every pod has a unique IP address
  All pods can reach each other without NAT
  CNI (Container Network Interface) plugins implement this functionality
  Different CNI implementations (Calico, Flannel, Cilium, etc.) provide various features and performance characteristics
  Cross-node communication typically uses overlay networks or direct routing




Pod-to-Service Communication

Services provide stable endpoints for pods, handling internal load balancing and service discovery.


  
    graph TD
      A[Client Pod10.244.1.2] --&amp;gt; |ClusterIP10.96.0.10| B[Kubernetes Service]
      B --&amp;gt; C[Endpoint 110.244.2.2]
      B --&amp;gt; D[Endpoint 210.244.3.3]
      B --&amp;gt; E[Endpoint 310.244.1.4]
      
      style A fill:#bbf,stroke:#333,stroke-width:2px
      style B fill:#ffa,stroke:#333,stroke-width:2px
  


Key Components:

  Pod: Source of traffic, with its own IP address
  Virtual Interface: Each pod has an eth0 interface connecting to the node’s network
  Node: Hosts multiple pods and manages network traffic
  kube-proxy: Runs on each node, managing service routing using iptables, IPVS, or userspace proxying
  Service: Provides a stable ClusterIP that routes to a dynamic set of pod endpoints
  Cluster Network: Enables all communication across the cluster


Internet-to-Service Communication

External traffic enters the cluster through several different mechanisms.


  
    graph TD
      A[InternetClient] --&amp;gt; B{Access Type}
      
      B --&amp;gt; |LoadBalancer| C[CloudLoad Balancer]
      C --&amp;gt; G[ServiceLoadBalancer]
      
      B --&amp;gt; |NodePort| D[Any NodePort 30000-32767]
      D --&amp;gt; H[ServiceNodePort]
      
      B --&amp;gt; |Ingress| E[IngressController]
      E --&amp;gt; I[IngressResource]
      I --&amp;gt; J[ServiceClusterIP]
      
      G --&amp;gt; K[Target Pods]
      H --&amp;gt; K
      J --&amp;gt; K
      
      style A fill:#f9f,stroke:#333,stroke-width:2px
      style K fill:#bbf,stroke:#333,stroke-width:2px
  


Access Types:

  LoadBalancer Service:
    
      Automatically provisions a cloud load balancer in CSP environments
      Requires MetalLB or similar solution in on-premise deployments
      Provides stable external IP address
    
  
  NodePort Service:
    
      Opens a specific port on all nodes
      Allows access via any node’s IP address
      Port range is limited to 30000-32767 by default
    
  
  Ingress:
    
      HTTP/HTTPS-based routing layer
      Enables hostname and path-based routing
      Can provide SSL termination, authentication, and more sophisticated traffic management
    
  




Network Components and Features

Network Components Table


  
    
      Component
      Purpose
      Communication Type
      Implementation Examples
    
    
      🛠️ Container
      Application runtime environment
      localhost (127.0.0.1)
      Docker, containerd, CRI-O
    
    
      📦 Pod
      Basic scheduling unit, shared network namespace
      Pod IP (e.g., 10.244.1.2)
      kubelet, container runtime
    
    
      🖥️ Service
      Stable endpoint for pod sets
      ClusterIP (e.g., 10.96.0.10)
      kube-proxy, CoreDNS
    
    
      🌐 Ingress
      HTTP/HTTPS routing to services
      HTTP(S) host/path based
      NGINX, Traefik, Contour
    
    
      🔌 CNI Plugin
      Pod networking implementation
      Pod-to-pod networking
      Calico, Flannel, Cilium
    
    
      ⚖️ Load Balancer
      External traffic distribution
      External IP to Service
      Cloud LB, MetalLB, HAProxy
    
  


Key Network Features


  Kubernetes Network Features by Layer
  
    
      Pod Networking (Layer 3)
      - Flat network space
      - No NAT between pods
      - Unique IP per pod
      - Implemented by CNI plugins
    
    
      Service Networking (Layer 4)
      - Stable endpoints via ClusterIP
      - Load balancing across pods
      - Service discovery via DNS
      - Implemented by kube-proxy and CoreDNS
    
    
      Application Routing (Layer 7)
      - HTTP/HTTPS routing via Ingress
      - Path and hostname based routing
      - SSL termination
      - Authentication options
    
  




Advanced Networking Concepts

Network Policies

Network Policies provide firewall-like rules for pod-to-pod communication, enabling micro-segmentation.

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-frontend-to-backend
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 8080


Service Mesh

Service meshes like Istio, Linkerd, and Consul provide advanced networking capabilities for microservices:


  
    
      Feature
      Description
    
    
      Traffic Management
      Fine-grained routing, traffic splitting, A/B testing, canary deployments
    
    
      Security
      Mutual TLS, certificate management, authentication, authorization
    
    
      Observability
      Distributed tracing, metrics collection, traffic visualization
    
    
      Reliability
      Circuit breaking, retries, timeouts, fault injection
    
  


DNS in Kubernetes

CoreDNS provides service discovery within Kubernetes clusters:


  Each Service gets a DNS entry: &amp;lt;service-name&amp;gt;.&amp;lt;namespace&amp;gt;.svc.cluster.local
  Pods can have DNS entries (if enabled): &amp;lt;pod-ip-with-dashes&amp;gt;.&amp;lt;namespace&amp;gt;.pod.cluster.local
  DNS resolution is handled by CoreDNS pods in the kube-system namespace




Troubleshooting Kubernetes Networking

Common networking issues and diagnostic commands:

# Check if pods can reach each other
kubectl exec -it &amp;lt;pod-name&amp;gt; -- ping &amp;lt;other-pod-ip&amp;gt;

# Check DNS resolution from a pod
kubectl exec -it &amp;lt;pod-name&amp;gt; -- nslookup &amp;lt;service-name&amp;gt;

# Examine service configuration
kubectl describe service &amp;lt;service-name&amp;gt;

# Check endpoints for a service
kubectl get endpoints &amp;lt;service-name&amp;gt;

# Test connectivity to a service
kubectl exec -it &amp;lt;pod-name&amp;gt; -- curl &amp;lt;service-name&amp;gt;:&amp;lt;port&amp;gt;

# Check ingress configuration
kubectl describe ingress &amp;lt;ingress-name&amp;gt;

# View network policies
kubectl get networkpolicies




Key Points


  Kubernetes Networking Summary
  
    
      Architecture Differences
      - CSP environments leverage cloud load balancers
      - On-premise requires solutions like MetalLB
      - Both share common internal networking principles
    
    
      Traffic Flow
      - External → Ingress/Service → Pods → Containers
      - Pod-to-Pod communication across nodes
      - Service abstraction for stable endpoints
    
    
      Implementation Considerations
      - CNI plugin selection affects performance and features
      - NetworkPolicy support varies by CNI plugin
      - Service mesh adds overhead but provides advanced features
    
  






References


  Kubernetes Networking Fundamentals
  Kubernetes Networking Guide
  Kubernetes Network Policies
  MetalLB Documentation
  Service Networking in Kubernetes
  DNS for Services and Pods
  Container Network Interface (CNI) Specification

",
            "wordcount": "2302",
            "inLanguage": "en",
            "dateCreated": "2025-01-12/",
            "datePublished": "2025-01-12/",
            "dateModified": "2025-01-12/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "KUBERNETES",
            "articleSection": "KUBERNETES",
            "keywords": ["kubernetes","networking","traffic-flow","ingress","service-mesh","cni"]
        }
        </script>
    </body>
</html>
