<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide | somaz</title>
    <meta name="description" content="Learn the key differences between AWS Network ACL and Security Group, their use cases, limitations, and best practices for secure cloud architecture">
    
        <meta name="keywords" content="aws, security, vpc, networking, firewall, nacl, security-group">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide | somaz">
    <meta name="twitter:description" content="Learn the key differences between AWS Network ACL and Security Group, their use cases, limitations, and best practices for secure cloud architecture">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1767938733/aws-security-group-network-acl-1_tjbvpd.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/aws/aws-nacl-sg/">
    <meta property="og:title" content="AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1767938733/aws-security-group-network-acl-1_tjbvpd.png">
    <meta property="og:description" content="Learn the key differences between AWS Network ACL and Security Group, their use cases, limitations, and best practices for secure cloud architecture">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/aws/aws-nacl-sg/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2026-02-04T00:00:00+00:00">
                            


February 4, 2026

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>14 min to read</span>
                </p>
                <h1 class="post-title">AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide</h1>
                <p class="post-subtitle">Understanding the differences between stateful and stateless firewalls in AWS VPC</p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1767938733/aws-security-group-network-acl-1_tjbvpd.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><br /></p>

<hr />

<h2 id="overview">Overview</h2>

<p>AWS provides two primary network security mechanisms within VPC (Virtual Private Cloud): Security Groups and Network ACLs (Access Control Lists).</p>

<p>Understanding the differences between these stateful and stateless firewalls is crucial for implementing robust security architectures in AWS.</p>

<p>This comprehensive guide explores the fundamental differences, use cases, limitations, and best practices for both security mechanisms.</p>

<p><br /></p>

<h2 id="what-are-security-groups-and-network-acls">What are Security Groups and Network ACLs?</h2>

<div class="quote-box">
  <p> Security Groups act as instance-level stateful firewalls, while Network ACLs function as subnet-level stateless firewalls. </p>
  <p>Both work together to provide layered security for your AWS resources, each serving distinct purposes in your security architecture.</p>
</div>

<p><br /></p>

<h3 id="security-groups-stateful-firewall">Security Groups (Stateful Firewall)</h3>

<p>Security Groups operate at the instance level (specifically at the Elastic Network Interface level) and maintain connection state information. When you allow inbound traffic, the corresponding outbound response traffic is automatically allowed.</p>

<p><br /></p>

<h3 id="network-acls-stateless-firewall">Network ACLs (Stateless Firewall)</h3>

<p>Network ACLs operate at the subnet level and evaluate each packet independently. They require explicit rules for both inbound and outbound traffic, making them stateless in nature.</p>

<p><br /></p>

<h2 id="detailed-comparison-security-group-vs-network-acl">Detailed Comparison: Security Group vs Network ACL</h2>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 25%;">Feature</th>
      <th style="width: 37.5%;">Security Group (Stateful)</th>
      <th style="width: 37.5%;">Network ACL (Stateless)</th>
    </tr>
    <tr>
      <td>Operating Level</td>
      <td>EC2 Instance (ENI) level</td>
      <td>Subnet level</td>
    </tr>
    <tr>
      <td>Firewall Type</td>
      <td>Stateful - tracks connection state</td>
      <td>Stateless - evaluates each packet independently</td>
    </tr>
    <tr>
      <td>Rule Types</td>
      <td>Allow rules only</td>
      <td>Both Allow and Deny rules</td>
    </tr>
    <tr>
      <td>Response Handling</td>
      <td>Automatic outbound response for allowed inbound</td>
      <td>Explicit inbound/outbound rules required</td>
    </tr>
    <tr>
      <td>Rule Evaluation</td>
      <td>All rules evaluated, most permissive applied</td>
      <td>Rules evaluated in order, first match applied</td>
    </tr>
    <tr>
      <td>Application Scope</td>
      <td>Applied to explicitly specified instances</td>
      <td>Automatically applied to entire subnet</td>
    </tr>
    <tr>
      <td>Default Behavior</td>
      <td>Default deny inbound, allow outbound</td>
      <td>Default deny all traffic</td>
    </tr>
    <tr>
      <td>Cross-referencing</td>
      <td>Can reference other Security Groups</td>
      <td>Cannot reference Security Groups</td>
    </tr>
    <tr>
      <td>Logging</td>
      <td>VPC Flow Logs required</td>
      <td>VPC Flow Logs + optional NACL logs</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h2 id="traffic-flow-architecture">Traffic Flow Architecture</h2>

<p><br /></p>

<h3 id="how-security-groups-and-nacls-work-together">How Security Groups and NACLs Work Together</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Internet/Client] 
   ↓ (Inbound Traffic)
[Network ACL (Subnet Level)] 
   ↓ (First Filter)
[Security Group (Instance Level)] 
   ↓ (Second Filter)
[EC2 Instance]
</code></pre></div></div>

<p>For outbound traffic, the flow reverses but both layers still apply their respective filtering rules.</p>

<p><br /></p>

<h3 id="processing-order">Processing Order</h3>

<ol>
  <li><strong>Inbound Traffic</strong>: NACL → Security Group → Instance</li>
  <li><strong>Outbound Traffic</strong>: Security Group → NACL → Destination</li>
  <li><strong>Both layers must allow traffic</strong> for successful communication</li>
</ol>

<p><br /></p>

<h2 id="implementation-examples-with-terraform">Implementation Examples with Terraform</h2>

<p><br /></p>

<h3 id="security-group-configuration">Security Group Configuration</h3>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example: Web Server Security Group</span>
<span class="nx">resource</span> <span class="s2">"aws_security_group"</span> <span class="s2">"web_sg"</span> <span class="p">{</span>
  <span class="nx">name_prefix</span> <span class="p">=</span> <span class="s2">"web-server-sg"</span>
  <span class="nx">description</span> <span class="p">=</span> <span class="s2">"Security group for web servers"</span>
  <span class="nx">vpc_id</span>      <span class="p">=</span> <span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">id</span>

  <span class="c1"># HTTP access from anywhere</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">description</span> <span class="p">=</span> <span class="s2">"HTTP"</span>
    <span class="nx">from_port</span>   <span class="p">=</span> <span class="mi">80</span>
    <span class="nx">to_port</span>     <span class="p">=</span> <span class="mi">80</span>
    <span class="nx">protocol</span>    <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">cidr_blocks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1"># HTTPS access from anywhere</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">description</span> <span class="p">=</span> <span class="s2">"HTTPS"</span>
    <span class="nx">from_port</span>   <span class="p">=</span> <span class="mi">443</span>
    <span class="nx">to_port</span>     <span class="p">=</span> <span class="mi">443</span>
    <span class="nx">protocol</span>    <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">cidr_blocks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1"># SSH access from bastion host</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">description</span>     <span class="p">=</span> <span class="s2">"SSH from bastion"</span>
    <span class="nx">from_port</span>       <span class="p">=</span> <span class="mi">22</span>
    <span class="nx">to_port</span>         <span class="p">=</span> <span class="mi">22</span>
    <span class="nx">protocol</span>        <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">security_groups</span> <span class="p">=</span> <span class="p">[</span><span class="nx">aws_security_group</span><span class="err">.</span><span class="nx">bastion_sg</span><span class="err">.</span><span class="nx">id</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1"># All outbound traffic allowed</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">description</span> <span class="p">=</span> <span class="s2">"All outbound"</span>
    <span class="nx">from_port</span>   <span class="p">=</span> <span class="mi">0</span>
    <span class="nx">to_port</span>     <span class="p">=</span> <span class="mi">0</span>
    <span class="nx">protocol</span>    <span class="p">=</span> <span class="s2">"-1"</span>
    <span class="nx">cidr_blocks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"web-server-sg"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Database Security Group</span>
<span class="nx">resource</span> <span class="s2">"aws_security_group"</span> <span class="s2">"database_sg"</span> <span class="p">{</span>
  <span class="nx">name_prefix</span> <span class="p">=</span> <span class="s2">"database-sg"</span>
  <span class="nx">description</span> <span class="p">=</span> <span class="s2">"Security group for database servers"</span>
  <span class="nx">vpc_id</span>      <span class="p">=</span> <span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">id</span>

  <span class="c1"># MySQL/Aurora access from web servers only</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">description</span>     <span class="p">=</span> <span class="s2">"MySQL from web servers"</span>
    <span class="nx">from_port</span>       <span class="p">=</span> <span class="mi">3306</span>
    <span class="nx">to_port</span>         <span class="p">=</span> <span class="mi">3306</span>
    <span class="nx">protocol</span>        <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">security_groups</span> <span class="p">=</span> <span class="p">[</span><span class="nx">aws_security_group</span><span class="err">.</span><span class="nx">web_sg</span><span class="err">.</span><span class="nx">id</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1"># No outbound internet access needed</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">description</span> <span class="p">=</span> <span class="s2">"VPC internal only"</span>
    <span class="nx">from_port</span>   <span class="p">=</span> <span class="mi">0</span>
    <span class="nx">to_port</span>     <span class="p">=</span> <span class="mi">0</span>
    <span class="nx">protocol</span>    <span class="p">=</span> <span class="s2">"-1"</span>
    <span class="nx">cidr_blocks</span> <span class="p">=</span> <span class="p">[</span><span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">cidr_block</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"database-sg"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="network-acl-configuration">Network ACL Configuration</h3>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Custom Network ACL for web tier</span>
<span class="nx">resource</span> <span class="s2">"aws_network_acl"</span> <span class="s2">"web_nacl"</span> <span class="p">{</span>
  <span class="nx">vpc_id</span>     <span class="p">=</span> <span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">id</span>
  <span class="nx">subnet_ids</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">web_subnets</span><span class="p">[</span><span class="err">*</span><span class="p">]</span><span class="err">.</span><span class="nx">id</span>

  <span class="c1"># Allow HTTP inbound</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">100</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">80</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">80</span>
  <span class="p">}</span>

  <span class="c1"># Allow HTTPS inbound</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">110</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">443</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">443</span>
  <span class="p">}</span>

  <span class="c1"># Allow SSH from management subnet only</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">120</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">management</span><span class="err">.</span><span class="nx">cidr_block</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">22</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">22</span>
  <span class="p">}</span>

  <span class="c1"># Allow ephemeral ports for return traffic</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">130</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">1024</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">65535</span>
  <span class="p">}</span>

  <span class="c1"># Deny specific malicious IP range</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">50</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"-1"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"deny"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"192.0.2.0/24"</span>  <span class="c1"># Example malicious range</span>
  <span class="p">}</span>

  <span class="c1"># Allow outbound HTTP/HTTPS for updates</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">100</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">80</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">80</span>
  <span class="p">}</span>

  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">110</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">443</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">443</span>
  <span class="p">}</span>

  <span class="c1"># Allow database access to database subnet</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">120</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">database</span><span class="err">.</span><span class="nx">cidr_block</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">3306</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">3306</span>
  <span class="p">}</span>

  <span class="c1"># Allow ephemeral ports for responses</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">130</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="s2">"0.0.0.0/0"</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">1024</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">65535</span>
  <span class="p">}</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"web-tier-nacl"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Restricted Network ACL for database tier</span>
<span class="nx">resource</span> <span class="s2">"aws_network_acl"</span> <span class="s2">"database_nacl"</span> <span class="p">{</span>
  <span class="nx">vpc_id</span>     <span class="p">=</span> <span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">id</span>
  <span class="nx">subnet_ids</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">database_subnets</span><span class="p">[</span><span class="err">*</span><span class="p">]</span><span class="err">.</span><span class="nx">id</span>

  <span class="c1"># Allow MySQL from web tier only</span>
  <span class="nx">ingress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">100</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">web</span><span class="err">.</span><span class="nx">cidr_block</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">3306</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">3306</span>
  <span class="p">}</span>

  <span class="c1"># Allow responses to web tier</span>
  <span class="nx">egress</span> <span class="p">{</span>
    <span class="nx">rule_no</span>    <span class="p">=</span> <span class="mi">100</span>
    <span class="nx">protocol</span>   <span class="p">=</span> <span class="s2">"tcp"</span>
    <span class="nx">action</span>     <span class="p">=</span> <span class="s2">"allow"</span>
    <span class="nx">cidr_block</span> <span class="p">=</span> <span class="nx">aws_subnet</span><span class="err">.</span><span class="nx">web</span><span class="err">.</span><span class="nx">cidr_block</span>
    <span class="nx">from_port</span>  <span class="p">=</span> <span class="mi">1024</span>
    <span class="nx">to_port</span>    <span class="p">=</span> <span class="mi">65535</span>
  <span class="p">}</span>

  <span class="c1"># Block all other traffic (implicit deny)</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"database-tier-nacl"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="limitations-and-constraints">Limitations and Constraints</h2>

<p><br /></p>

<h3 id="network-acl-limitations">Network ACL Limitations</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Resource</th>
      <th style="width: 35%;">Default Limit</th>
      <th style="width: 35%;">Maximum Limit</th>
    </tr>
    <tr>
      <td>NACLs per VPC</td>
      <td>200</td>
      <td>Configurable via support</td>
    </tr>
    <tr>
      <td>Rules per NACL</td>
      <td>20 inbound, 20 outbound</td>
      <td>40 each (requestable increase)</td>
    </tr>
    <tr>
      <td>Performance Impact</td>
      <td>Minimal with few rules</td>
      <td>Increases with rule count</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h3 id="security-group-limitations">Security Group Limitations</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 30%;">Resource</th>
      <th style="width: 35%;">Default Limit</th>
      <th style="width: 35%;">Maximum Limit</th>
    </tr>
    <tr>
      <td>Security Groups per VPC</td>
      <td>2,500</td>
      <td>Configurable via support</td>
    </tr>
    <tr>
      <td>Rules per Security Group</td>
      <td>60 inbound, 60 outbound</td>
      <td>Configurable via support</td>
    </tr>
    <tr>
      <td>Security Groups per ENI</td>
      <td>5</td>
      <td>5 (hard limit)</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h2 id="security-strategy-combinations">Security Strategy Combinations</h2>

<p><br /></p>

<h3 id="layered-security-approach">Layered Security Approach</h3>

<div class="table-container">
  <table class="table-beauty">
    <tr>
      <th style="width: 25%;">Scenario</th>
      <th style="width: 37.5%;">Security Group Configuration</th>
      <th style="width: 37.5%;">Network ACL Configuration</th>
    </tr>
    <tr>
      <td>Public Web Access</td>
      <td>Allow HTTP/HTTPS ingress</td>
      <td>Allow ports 80/443, block malicious IPs</td>
    </tr>
    <tr>
      <td>Database Protection</td>
      <td>Allow only from specific SGs</td>
      <td>Deny database ports at subnet level</td>
    </tr>
    <tr>
      <td>Unauthorized IP Blocking</td>
      <td>Cannot deny specific IPs</td>
      <td>Explicit deny rules for IP ranges</td>
    </tr>
    <tr>
      <td>Internal Service Communication</td>
      <td>Cross-SG references for microservices</td>
      <td>Subnet-level isolation between tiers</td>
    </tr>
  </table>
</div>

<p><br /></p>

<h2 id="monitoring-and-logging">Monitoring and Logging</h2>

<p><br /></p>

<h3 id="vpc-flow-logs-configuration">VPC Flow Logs Configuration</h3>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Enable VPC Flow Logs for comprehensive monitoring</span>
<span class="nx">resource</span> <span class="s2">"aws_flow_log"</span> <span class="s2">"vpc_flow_log"</span> <span class="p">{</span>
  <span class="nx">iam_role_arn</span>    <span class="p">=</span> <span class="nx">aws_iam_role</span><span class="err">.</span><span class="nx">flow_log_role</span><span class="err">.</span><span class="nx">arn</span>
  <span class="nx">log_destination</span> <span class="p">=</span> <span class="nx">aws_cloudwatch_log_group</span><span class="err">.</span><span class="nx">vpc_flow_log</span><span class="err">.</span><span class="nx">arn</span>
  <span class="nx">traffic_type</span>    <span class="p">=</span> <span class="s2">"ALL"</span>
  <span class="nx">vpc_id</span>          <span class="p">=</span> <span class="nx">aws_vpc</span><span class="err">.</span><span class="nx">main</span><span class="err">.</span><span class="nx">id</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"vpc-flow-logs"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># CloudWatch Log Group for Flow Logs</span>
<span class="nx">resource</span> <span class="s2">"aws_cloudwatch_log_group"</span> <span class="s2">"vpc_flow_log"</span> <span class="p">{</span>
  <span class="nx">name</span>              <span class="p">=</span> <span class="s2">"/aws/vpc/flowlogs"</span>
  <span class="nx">retention_in_days</span> <span class="p">=</span> <span class="mi">30</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span>        <span class="p">=</span> <span class="s2">"vpc-flow-logs"</span>
    <span class="nx">Environment</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">environment</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># IAM Role for Flow Logs</span>
<span class="nx">resource</span> <span class="s2">"aws_iam_role"</span> <span class="s2">"flow_log_role"</span> <span class="p">{</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="s2">"vpc-flow-log-role"</span>

  <span class="nx">assume_role_policy</span> <span class="p">=</span> <span class="nx">jsonencode</span><span class="err">(</span><span class="p">{</span>
    <span class="nx">Version</span> <span class="p">=</span> <span class="s2">"2012-10-17"</span>
    <span class="nx">Statement</span> <span class="p">=</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">Action</span> <span class="p">=</span> <span class="s2">"sts:AssumeRole"</span>
        <span class="nx">Effect</span> <span class="p">=</span> <span class="s2">"Allow"</span>
        <span class="nx">Principal</span> <span class="p">=</span> <span class="p">{</span>
          <span class="nx">Service</span> <span class="p">=</span> <span class="s2">"vpc-flow-logs.amazonaws.com"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span><span class="err">)</span>
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"aws_iam_role_policy"</span> <span class="s2">"flow_log_policy"</span> <span class="p">{</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="s2">"vpc-flow-log-policy"</span>
  <span class="nx">role</span> <span class="p">=</span> <span class="nx">aws_iam_role</span><span class="err">.</span><span class="nx">flow_log_role</span><span class="err">.</span><span class="nx">id</span>

  <span class="nx">policy</span> <span class="p">=</span> <span class="nx">jsonencode</span><span class="err">(</span><span class="p">{</span>
    <span class="nx">Version</span> <span class="p">=</span> <span class="s2">"2012-10-17"</span>
    <span class="nx">Statement</span> <span class="p">=</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">Action</span> <span class="p">=</span> <span class="p">[</span>
          <span class="s2">"logs:CreateLogGroup"</span><span class="p">,</span>
          <span class="s2">"logs:CreateLogStream"</span><span class="p">,</span>
          <span class="s2">"logs:PutLogEvents"</span><span class="p">,</span>
          <span class="s2">"logs:DescribeLogGroups"</span><span class="p">,</span>
          <span class="s2">"logs:DescribeLogStreams"</span>
        <span class="p">]</span>
        <span class="nx">Effect</span>   <span class="p">=</span> <span class="s2">"Allow"</span>
        <span class="nx">Resource</span> <span class="p">=</span> <span class="s2">"*"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span><span class="err">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="monitoring-best-practices">Monitoring Best Practices</h3>

<ol>
  <li><strong>Enable Flow Logs</strong>: Monitor all traffic patterns</li>
  <li><strong>Set Up Alerts</strong>: Create CloudWatch alarms for unusual traffic</li>
  <li><strong>Log Analysis</strong>: Use Athena or ElasticSearch for log analysis</li>
  <li><strong>Regular Reviews</strong>: Audit security group and NACL rules periodically</li>
</ol>

<p><br /></p>

<h2 id="best-practices">Best Practices</h2>

<p><br /></p>

<h3 id="security-group-best-practices">Security Group Best Practices</h3>

<ol>
  <li><strong>Principle of Least Privilege</strong>: Grant minimum necessary access</li>
  <li><strong>Descriptive Naming</strong>: Use clear, descriptive names for rules</li>
  <li><strong>Regular Audits</strong>: Review and clean up unused security groups</li>
  <li><strong>Cross-referencing</strong>: Use security group references instead of IP ranges</li>
  <li><strong>Documentation</strong>: Document the purpose of each rule</li>
</ol>

<p><br /></p>

<h3 id="network-acl-best-practices">Network ACL Best Practices</h3>

<ol>
  <li><strong>Rule Numbering</strong>: Leave gaps between rule numbers for future insertions</li>
  <li><strong>Deny First</strong>: Place deny rules with lower numbers than allow rules</li>
  <li><strong>Ephemeral Ports</strong>: Remember to allow ephemeral ports for return traffic</li>
  <li><strong>Testing</strong>: Test NACL changes in non-production environments first</li>
  <li><strong>Minimal Rules</strong>: Keep rules simple and minimal for better performance</li>
</ol>

<p><br /></p>

<h2 id="common-use-cases">Common Use Cases</h2>

<p><br /></p>

<h3 id="when-to-use-security-groups-only">When to Use Security Groups Only</h3>

<ul>
  <li><strong>Standard Web Applications</strong>: Simple three-tier architectures</li>
  <li><strong>Development Environments</strong>: Flexible access requirements</li>
  <li><strong>Microservices</strong>: Service-to-service communication</li>
  <li><strong>Container Workloads</strong>: Dynamic scaling environments</li>
</ul>

<p><br /></p>

<h3 id="when-to-add-network-acls">When to Add Network ACLs</h3>

<ul>
  <li><strong>Compliance Requirements</strong>: Regulatory compliance needs</li>
  <li><strong>IP-based Blocking</strong>: Blocking specific IP ranges or countries</li>
  <li><strong>Subnet Isolation</strong>: Strong separation between tiers</li>
  <li><strong>Additional Logging</strong>: Enhanced monitoring requirements</li>
</ul>

<p><br /></p>

<h2 id="troubleshooting-common-issues">Troubleshooting Common Issues</h2>

<p><br /></p>

<h3 id="connectivity-problems">Connectivity Problems</h3>

<ol>
  <li><strong>Check Both Layers</strong>: Verify both SG and NACL rules</li>
  <li><strong>Ephemeral Ports</strong>: Ensure return traffic paths are open</li>
  <li><strong>Rule Order</strong>: Check NACL rule numbering and precedence</li>
  <li><strong>Flow Logs</strong>: Analyze traffic patterns for blocked connections</li>
</ol>

<p><br /></p>

<h3 id="performance-issues">Performance Issues</h3>

<ol>
  <li><strong>Rule Optimization</strong>: Minimize the number of NACL rules</li>
  <li><strong>Specific Rules</strong>: Use specific ports instead of wide ranges</li>
  <li><strong>Regular Cleanup</strong>: Remove unused or duplicate rules</li>
  <li><strong>Monitoring</strong>: Track rule evaluation metrics</li>
</ol>

<p><br /></p>

<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>

<p><br /></p>

<h3 id="q1-can-i-use-only-one-security-mechanism">Q1. Can I use only one security mechanism?</h3>

<p>Most AWS environments work well with Security Groups alone. However, for environments requiring subnet-level traffic blocking or compliance requirements, combining both mechanisms provides optimal security.</p>

<p><br /></p>

<h3 id="q2-which-is-applied-first---nacl-or-security-group">Q2. Which is applied first - NACL or Security Group?</h3>

<p>For inbound traffic, NACL is evaluated first at the subnet level, then Security Group at the instance level. Both must allow traffic for successful communication.</p>

<p><br /></p>

<h3 id="q3-can-i-track-security-rule-usage">Q3. Can I track security rule usage?</h3>

<p>Yes, VPC Flow Logs provide comprehensive traffic monitoring. Additionally, NACL-specific logging can be enabled for detailed packet-level analysis.</p>

<p><br /></p>

<h3 id="q4-how-do-i-block-specific-ip-addresses">Q4. How do I block specific IP addresses?</h3>

<p>Use Network ACLs with explicit deny rules. Security Groups only support allow rules, so they cannot block specific IPs.</p>

<p><br /></p>

<h2 id="conclusion">Conclusion</h2>

<p>Understanding the differences between AWS Security Groups and Network ACLs is fundamental to building secure cloud architectures.</p>

<p>Security Groups provide instance-level stateful filtering ideal for most use cases, while Network ACLs offer subnet-level stateless filtering for additional security layers.</p>

<p>The key to effective AWS security is not choosing between these mechanisms, but understanding how to combine them appropriately based on your specific requirements. Most workloads benefit from Security Groups as the primary control, with Network ACLs added for compliance, IP blocking, or subnet isolation needs.</p>

<p>By implementing both mechanisms strategically, you can achieve defense-in-depth security that protects your AWS resources while maintaining operational flexibility.</p>

<p><br /></p>

<hr />

<h2 id="references">References</h2>

<ul>
  <li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html">AWS Security Groups User Guide</a></li>
  <li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html">AWS Network ACLs User Guide</a></li>
  <li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html">VPC Flow Logs Documentation</a></li>
  <li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-best-practices.html">AWS VPC Security Best Practices</a></li>
  <li><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group">Terraform AWS Provider - Security Groups</a></li>
  <li><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/network_acl">Terraform AWS Provider - Network ACLs</a></li>
</ul>



                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/cs/context-switching/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767769259/context-switch-1_s1n69e.png">
                                    
                                    <h3>Context Switch Deep Dive - The Hidden Performance Cost in Container Environments</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/aws/aws-efs-kubernetes-guide/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767685797/kubernetes-efs-1_ek4rbd.png">
                                    
                                    <h3>AWS Elastic File System (EFS) with Kubernetes - Complete Implementation Guide</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/cs/tls-https/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767770122/tls-handshake-1_nwd3f0.png">
                                    
                                    <h3>TLS Handshake and Certificate Architecture - A Deep Dive into HTTPS Security</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="14">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/cs/context-switching/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1767769259/context-switch-1_s1n69e.png">
                
            </div>
            <h3 class="title">Context Switch Deep Dive - The Hidden Performance Cost in Container Environments</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;Learn the key differences between AWS Network ACL and Security Group, their use cases, limitations, and best practices for secure cloud architecture&quot;%20https://somaz.blog/category/aws/aws-nacl-sg/%20via%20&#64;twitter_username&hashtags=aws,security,vpc,networking,firewall,nacl,security-group"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/aws/aws-nacl-sg/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/aws/aws-nacl-sg/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "AWS Network ACL vs Security Group - Complete Comparison and Implementation Guide",
            "headline": "Understanding the differences between stateful and stateless firewalls in AWS VPC",
            "description": "Learn the key differences between AWS Network ACL and Security Group, their use cases, limitations, and best practices for secure cloud architecture",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1767938733/aws-security-group-network-acl-1_tjbvpd.png",
            "url": "https://somaz.blog/category/aws/aws-nacl-sg/",
            "articleBody": "



Overview

AWS provides two primary network security mechanisms within VPC (Virtual Private Cloud): Security Groups and Network ACLs (Access Control Lists).

Understanding the differences between these stateful and stateless firewalls is crucial for implementing robust security architectures in AWS.

This comprehensive guide explores the fundamental differences, use cases, limitations, and best practices for both security mechanisms.



What are Security Groups and Network ACLs?


   Security Groups act as instance-level stateful firewalls, while Network ACLs function as subnet-level stateless firewalls. 
  Both work together to provide layered security for your AWS resources, each serving distinct purposes in your security architecture.




Security Groups (Stateful Firewall)

Security Groups operate at the instance level (specifically at the Elastic Network Interface level) and maintain connection state information. When you allow inbound traffic, the corresponding outbound response traffic is automatically allowed.



Network ACLs (Stateless Firewall)

Network ACLs operate at the subnet level and evaluate each packet independently. They require explicit rules for both inbound and outbound traffic, making them stateless in nature.



Detailed Comparison: Security Group vs Network ACL


  
    
      Feature
      Security Group (Stateful)
      Network ACL (Stateless)
    
    
      Operating Level
      EC2 Instance (ENI) level
      Subnet level
    
    
      Firewall Type
      Stateful - tracks connection state
      Stateless - evaluates each packet independently
    
    
      Rule Types
      Allow rules only
      Both Allow and Deny rules
    
    
      Response Handling
      Automatic outbound response for allowed inbound
      Explicit inbound/outbound rules required
    
    
      Rule Evaluation
      All rules evaluated, most permissive applied
      Rules evaluated in order, first match applied
    
    
      Application Scope
      Applied to explicitly specified instances
      Automatically applied to entire subnet
    
    
      Default Behavior
      Default deny inbound, allow outbound
      Default deny all traffic
    
    
      Cross-referencing
      Can reference other Security Groups
      Cannot reference Security Groups
    
    
      Logging
      VPC Flow Logs required
      VPC Flow Logs + optional NACL logs
    
  




Traffic Flow Architecture



How Security Groups and NACLs Work Together

[Internet/Client] 
   ↓ (Inbound Traffic)
[Network ACL (Subnet Level)] 
   ↓ (First Filter)
[Security Group (Instance Level)] 
   ↓ (Second Filter)
[EC2 Instance]


For outbound traffic, the flow reverses but both layers still apply their respective filtering rules.



Processing Order


  Inbound Traffic: NACL → Security Group → Instance
  Outbound Traffic: Security Group → NACL → Destination
  Both layers must allow traffic for successful communication




Implementation Examples with Terraform



Security Group Configuration

# Example: Web Server Security Group
resource &quot;aws_security_group&quot; &quot;web_sg&quot; {
  name_prefix = &quot;web-server-sg&quot;
  description = &quot;Security group for web servers&quot;
  vpc_id      = aws_vpc.main.id

  # HTTP access from anywhere
  ingress {
    description = &quot;HTTP&quot;
    from_port   = 80
    to_port     = 80
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # HTTPS access from anywhere
  ingress {
    description = &quot;HTTPS&quot;
    from_port   = 443
    to_port     = 443
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # SSH access from bastion host
  ingress {
    description     = &quot;SSH from bastion&quot;
    from_port       = 22
    to_port         = 22
    protocol        = &quot;tcp&quot;
    security_groups = [aws_security_group.bastion_sg.id]
  }

  # All outbound traffic allowed
  egress {
    description = &quot;All outbound&quot;
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  tags = {
    Name        = &quot;web-server-sg&quot;
    Environment = var.environment
  }
}

# Database Security Group
resource &quot;aws_security_group&quot; &quot;database_sg&quot; {
  name_prefix = &quot;database-sg&quot;
  description = &quot;Security group for database servers&quot;
  vpc_id      = aws_vpc.main.id

  # MySQL/Aurora access from web servers only
  ingress {
    description     = &quot;MySQL from web servers&quot;
    from_port       = 3306
    to_port         = 3306
    protocol        = &quot;tcp&quot;
    security_groups = [aws_security_group.web_sg.id]
  }

  # No outbound internet access needed
  egress {
    description = &quot;VPC internal only&quot;
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [aws_vpc.main.cidr_block]
  }

  tags = {
    Name        = &quot;database-sg&quot;
    Environment = var.environment
  }
}




Network ACL Configuration

# Custom Network ACL for web tier
resource &quot;aws_network_acl&quot; &quot;web_nacl&quot; {
  vpc_id     = aws_vpc.main.id
  subnet_ids = aws_subnet.web_subnets[*].id

  # Allow HTTP inbound
  ingress {
    rule_no    = 100
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 80
    to_port    = 80
  }

  # Allow HTTPS inbound
  ingress {
    rule_no    = 110
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 443
    to_port    = 443
  }

  # Allow SSH from management subnet only
  ingress {
    rule_no    = 120
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = aws_subnet.management.cidr_block
    from_port  = 22
    to_port    = 22
  }

  # Allow ephemeral ports for return traffic
  ingress {
    rule_no    = 130
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 1024
    to_port    = 65535
  }

  # Deny specific malicious IP range
  ingress {
    rule_no    = 50
    protocol   = &quot;-1&quot;
    action     = &quot;deny&quot;
    cidr_block = &quot;192.0.2.0/24&quot;  # Example malicious range
  }

  # Allow outbound HTTP/HTTPS for updates
  egress {
    rule_no    = 100
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 80
    to_port    = 80
  }

  egress {
    rule_no    = 110
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 443
    to_port    = 443
  }

  # Allow database access to database subnet
  egress {
    rule_no    = 120
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = aws_subnet.database.cidr_block
    from_port  = 3306
    to_port    = 3306
  }

  # Allow ephemeral ports for responses
  egress {
    rule_no    = 130
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = &quot;0.0.0.0/0&quot;
    from_port  = 1024
    to_port    = 65535
  }

  tags = {
    Name        = &quot;web-tier-nacl&quot;
    Environment = var.environment
  }
}

# Restricted Network ACL for database tier
resource &quot;aws_network_acl&quot; &quot;database_nacl&quot; {
  vpc_id     = aws_vpc.main.id
  subnet_ids = aws_subnet.database_subnets[*].id

  # Allow MySQL from web tier only
  ingress {
    rule_no    = 100
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = aws_subnet.web.cidr_block
    from_port  = 3306
    to_port    = 3306
  }

  # Allow responses to web tier
  egress {
    rule_no    = 100
    protocol   = &quot;tcp&quot;
    action     = &quot;allow&quot;
    cidr_block = aws_subnet.web.cidr_block
    from_port  = 1024
    to_port    = 65535
  }

  # Block all other traffic (implicit deny)

  tags = {
    Name        = &quot;database-tier-nacl&quot;
    Environment = var.environment
  }
}




Limitations and Constraints



Network ACL Limitations


  
    
      Resource
      Default Limit
      Maximum Limit
    
    
      NACLs per VPC
      200
      Configurable via support
    
    
      Rules per NACL
      20 inbound, 20 outbound
      40 each (requestable increase)
    
    
      Performance Impact
      Minimal with few rules
      Increases with rule count
    
  




Security Group Limitations


  
    
      Resource
      Default Limit
      Maximum Limit
    
    
      Security Groups per VPC
      2,500
      Configurable via support
    
    
      Rules per Security Group
      60 inbound, 60 outbound
      Configurable via support
    
    
      Security Groups per ENI
      5
      5 (hard limit)
    
  




Security Strategy Combinations



Layered Security Approach


  
    
      Scenario
      Security Group Configuration
      Network ACL Configuration
    
    
      Public Web Access
      Allow HTTP/HTTPS ingress
      Allow ports 80/443, block malicious IPs
    
    
      Database Protection
      Allow only from specific SGs
      Deny database ports at subnet level
    
    
      Unauthorized IP Blocking
      Cannot deny specific IPs
      Explicit deny rules for IP ranges
    
    
      Internal Service Communication
      Cross-SG references for microservices
      Subnet-level isolation between tiers
    
  




Monitoring and Logging



VPC Flow Logs Configuration

# Enable VPC Flow Logs for comprehensive monitoring
resource &quot;aws_flow_log&quot; &quot;vpc_flow_log&quot; {
  iam_role_arn    = aws_iam_role.flow_log_role.arn
  log_destination = aws_cloudwatch_log_group.vpc_flow_log.arn
  traffic_type    = &quot;ALL&quot;
  vpc_id          = aws_vpc.main.id

  tags = {
    Name        = &quot;vpc-flow-logs&quot;
    Environment = var.environment
  }
}

# CloudWatch Log Group for Flow Logs
resource &quot;aws_cloudwatch_log_group&quot; &quot;vpc_flow_log&quot; {
  name              = &quot;/aws/vpc/flowlogs&quot;
  retention_in_days = 30

  tags = {
    Name        = &quot;vpc-flow-logs&quot;
    Environment = var.environment
  }
}

# IAM Role for Flow Logs
resource &quot;aws_iam_role&quot; &quot;flow_log_role&quot; {
  name = &quot;vpc-flow-log-role&quot;

  assume_role_policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Action = &quot;sts:AssumeRole&quot;
        Effect = &quot;Allow&quot;
        Principal = {
          Service = &quot;vpc-flow-logs.amazonaws.com&quot;
        }
      }
    ]
  })
}

resource &quot;aws_iam_role_policy&quot; &quot;flow_log_policy&quot; {
  name = &quot;vpc-flow-log-policy&quot;
  role = aws_iam_role.flow_log_role.id

  policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Action = [
          &quot;logs:CreateLogGroup&quot;,
          &quot;logs:CreateLogStream&quot;,
          &quot;logs:PutLogEvents&quot;,
          &quot;logs:DescribeLogGroups&quot;,
          &quot;logs:DescribeLogStreams&quot;
        ]
        Effect   = &quot;Allow&quot;
        Resource = &quot;*&quot;
      }
    ]
  })
}




Monitoring Best Practices


  Enable Flow Logs: Monitor all traffic patterns
  Set Up Alerts: Create CloudWatch alarms for unusual traffic
  Log Analysis: Use Athena or ElasticSearch for log analysis
  Regular Reviews: Audit security group and NACL rules periodically




Best Practices



Security Group Best Practices


  Principle of Least Privilege: Grant minimum necessary access
  Descriptive Naming: Use clear, descriptive names for rules
  Regular Audits: Review and clean up unused security groups
  Cross-referencing: Use security group references instead of IP ranges
  Documentation: Document the purpose of each rule




Network ACL Best Practices


  Rule Numbering: Leave gaps between rule numbers for future insertions
  Deny First: Place deny rules with lower numbers than allow rules
  Ephemeral Ports: Remember to allow ephemeral ports for return traffic
  Testing: Test NACL changes in non-production environments first
  Minimal Rules: Keep rules simple and minimal for better performance




Common Use Cases



When to Use Security Groups Only


  Standard Web Applications: Simple three-tier architectures
  Development Environments: Flexible access requirements
  Microservices: Service-to-service communication
  Container Workloads: Dynamic scaling environments




When to Add Network ACLs


  Compliance Requirements: Regulatory compliance needs
  IP-based Blocking: Blocking specific IP ranges or countries
  Subnet Isolation: Strong separation between tiers
  Additional Logging: Enhanced monitoring requirements




Troubleshooting Common Issues



Connectivity Problems


  Check Both Layers: Verify both SG and NACL rules
  Ephemeral Ports: Ensure return traffic paths are open
  Rule Order: Check NACL rule numbering and precedence
  Flow Logs: Analyze traffic patterns for blocked connections




Performance Issues


  Rule Optimization: Minimize the number of NACL rules
  Specific Rules: Use specific ports instead of wide ranges
  Regular Cleanup: Remove unused or duplicate rules
  Monitoring: Track rule evaluation metrics




Frequently Asked Questions



Q1. Can I use only one security mechanism?

Most AWS environments work well with Security Groups alone. However, for environments requiring subnet-level traffic blocking or compliance requirements, combining both mechanisms provides optimal security.



Q2. Which is applied first - NACL or Security Group?

For inbound traffic, NACL is evaluated first at the subnet level, then Security Group at the instance level. Both must allow traffic for successful communication.



Q3. Can I track security rule usage?

Yes, VPC Flow Logs provide comprehensive traffic monitoring. Additionally, NACL-specific logging can be enabled for detailed packet-level analysis.



Q4. How do I block specific IP addresses?

Use Network ACLs with explicit deny rules. Security Groups only support allow rules, so they cannot block specific IPs.



Conclusion

Understanding the differences between AWS Security Groups and Network ACLs is fundamental to building secure cloud architectures.

Security Groups provide instance-level stateful filtering ideal for most use cases, while Network ACLs offer subnet-level stateless filtering for additional security layers.

The key to effective AWS security is not choosing between these mechanisms, but understanding how to combine them appropriately based on your specific requirements. Most workloads benefit from Security Groups as the primary control, with Network ACLs added for compliance, IP blocking, or subnet isolation needs.

By implementing both mechanisms strategically, you can achieve defense-in-depth security that protects your AWS resources while maintaining operational flexibility.





References


  AWS Security Groups User Guide
  AWS Network ACLs User Guide
  VPC Flow Logs Documentation
  AWS VPC Security Best Practices
  Terraform AWS Provider - Security Groups
  Terraform AWS Provider - Network ACLs


",
            "wordcount": "2667",
            "inLanguage": "en",
            "dateCreated": "2026-02-04/",
            "datePublished": "2026-02-04/",
            "dateModified": "2026-02-04/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "AWS",
            "articleSection": "AWS",
            "keywords": ["aws","security","vpc","networking","firewall","nacl","security-group"]
        }
        </script>
    </body>
</html>
