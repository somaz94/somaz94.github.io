<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>What is AWS Assume Role? | somaz</title>
    <meta name="description" content="A comprehensive guide to AWS Assume Role and its implementation for cross-account access">
    
        <meta name="keywords" content="aws, iam, security, authentication, sts, cross-account">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="What is AWS Assume Role? | somaz">
    <meta name="twitter:description" content="A comprehensive guide to AWS Assume Role and its implementation for cross-account access">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737423759/aws-assume-role_wtm7on.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz.blog/category/aws/aws-assume-role/">
    <meta property="og:title" content="What is AWS Assume Role? | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737423759/aws-assume-role_wtm7on.png">
    <meta property="og:description" content="A comprehensive guide to AWS Assume Role and its implementation for cross-account access">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz.blog/category/aws/aws-assume-role/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz.blog/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-01-17T09:00:00+00:00">
                            


January 17, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>12 min to read</span>
                </p>
                <h1 class="post-title">What is AWS Assume Role?</h1>
                <p class="post-subtitle"></p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737423759/aws-assume-role_wtm7on.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><a href="https://linuxbeast.com/blog/how-to-set-up-cross-account-access-in-aws-with-assumerole/">image reference link</a></p>

<p><br /></p>

<hr />

<h2 id="overview">Overview</h2>
<blockquote>
  <p>AWS Assume Role is a fundamental security feature that enables temporary, controlled access to AWS resources across accounts or within the same account. <br /><br />It’s a cornerstone of the AWS security model that implements the principle of least privilege while providing the flexibility needed for modern cloud architectures.</p>
</blockquote>

<p><br /></p>

<h3 id="what-is-aws-assume-role">What is AWS Assume Role?</h3>

<blockquote>
  <p>AWS Assume Role is a function provided by AWS Security Token Service (STS) that allows one IAM entity (user or service) to temporarily adopt another role in AWS and use the permissions associated with that role. <br /><br />This mechanism enhances security and simplifies access management by granting only the necessary permissions for the duration required to complete specific tasks.</p>
</blockquote>

<p>The <code class="language-plaintext highlighter-rouge">sts:AssumeRole</code> operation enables a secure delegation model where:</p>

<ul>
  <li><strong>Temporary access</strong>: Credentials expire after a specified duration (15 minutes to 12 hours)</li>
  <li><strong>No sharing of long-term credentials</strong>: Eliminates the need to share permanent IAM credentials</li>
  <li><strong>Granular permissions</strong>: Access can be restricted based on session policies, source IP, and more</li>
  <li><strong>Centralized management</strong>: Simplifies permission management across multiple accounts</li>
</ul>

<h4 id="key-use-cases">Key Use Cases</h4>

<ul>
  <li><strong>Cross-account access</strong>: Access resources in another AWS account without creating and managing users in that account</li>
  <li><strong>Within-account delegation</strong>: Assume a role with different permissions than your current IAM entity</li>
  <li><strong>Application development</strong>: Use different roles for development, testing, and production environments</li>
  <li><strong>Third-party access</strong>: Allow external partners to access your AWS resources securely</li>
  <li><strong>Emergency access</strong>: Implement break-glass procedures for emergency situations</li>
</ul>

<p><br /></p>

<h3 id="how-aws-assume-role-works">How AWS Assume Role Works</h3>

<p><img src="/assets/svg/aws-assume-role/assume-role.svg" alt="Assume Role Process Flow" /></p>

<ol>
  <li><strong>Trust relationship</strong>: The target role specifies which entities (principals) can assume it</li>
  <li><strong>Permission check</strong>: The assuming entity must have permission to call the <code class="language-plaintext highlighter-rouge">sts:AssumeRole</code> action</li>
  <li><strong>STS call</strong>: The entity calls the AssumeRole API with the role ARN and optional parameters</li>
  <li><strong>Temporary credentials</strong>: STS returns temporary security credentials (access key, secret key, session token)</li>
  <li><strong>Using credentials</strong>: Applications use these credentials to make AWS API calls with the role’s permissions</li>
</ol>

<p><br /></p>

<h3 id="detailed-example-cross-account-eks-access">Detailed Example: Cross-Account EKS Access</h3>

<p>The following example demonstrates how to use AssumeRole to grant Account A access to EKS resources in Account B.</p>

<h4 id="step-1-create-iam-role-in-account-b-target-account">Step 1: Create IAM Role in Account B (Target Account)</h4>

<p>Create an IAM role with a trust policy that allows Account A to assume this role. The role will have permissions to manage EKS resources.</p>

<p><strong>Trust Policy (in Account B)</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Principal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"AWS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:root"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Account</span><span class="w"> </span><span class="err">A</span><span class="w"> </span><span class="err">ID</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"StringEquals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"aws:PrincipalOrgID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"o-exampleorgid"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Optional:</span><span class="w"> </span><span class="err">Restrict</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">Organization</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>For more granular control</strong>, you can specify specific roles or users in Account A:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Principal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"AWS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/DevOpsTeamRole"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Specific</span><span class="w"> </span><span class="err">role</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">Account</span><span class="w"> </span><span class="err">A</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"StringEquals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"aws:PrincipalTag/Department"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DevOps"</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Optional:</span><span class="w"> </span><span class="err">Require</span><span class="w"> </span><span class="err">specific</span><span class="w"> </span><span class="err">tags</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Permission Policy (in Account B)</strong>:</p>

<p>Attach an appropriate permission policy to the role that grants the necessary EKS permissions:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"eks:DescribeCluster"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eks:ListClusters"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eks:UpdateClusterConfig"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eks:DescribeUpdate"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:eks:region:111122223333:cluster/*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><br /></p>

<h4 id="step-2-create-iam-policy-in-account-a-source-account">Step 2: Create IAM Policy in Account A (Source Account)</h4>

<p>Create and attach an IAM policy to the users or roles in Account A that need to assume the role in Account B.</p>

<p><strong>Example Policy (in Account A)</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::111122223333:role/EKSAdminRole"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"StringLike"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"aws:RequestedRegion"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"us-west-2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"us-east-1"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><br /></p>

<h4 id="step-3-assume-role-from-account-a">Step 3: Assume Role from Account A</h4>

<p>A user or service in Account A can now assume the role in Account B using the AWS CLI, SDK, or AWS console.</p>

<p><strong>Using AWS CLI</strong>:</p>

<p><br /></p>

<script src="https://gist.github.com/somaz94/f94ab450d8c2718a38669283e55f5e26.js"></script>

<p><br /></p>

<p>This command returns a JSON object containing:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">AccessKeyId</code></li>
  <li><code class="language-plaintext highlighter-rouge">SecretAccessKey</code></li>
  <li><code class="language-plaintext highlighter-rouge">SessionToken</code></li>
  <li><code class="language-plaintext highlighter-rouge">Expiration</code> timestamp</li>
</ul>

<p><strong>Using AWS SDK (Python example)</strong>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">boto3</span>

<span class="c1"># Create an STS client
</span><span class="n">sts_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="n">client</span><span class="p">(</span><span class="s">'sts'</span><span class="p">)</span>

<span class="c1"># Assume the role
</span><span class="n">assumed_role</span> <span class="o">=</span> <span class="n">sts_client</span><span class="p">.</span><span class="n">assume_role</span><span class="p">(</span>
    <span class="n">RoleArn</span><span class="o">=</span><span class="s">'arn:aws:iam::111122223333:role/EKSAdminRole'</span><span class="p">,</span>
    <span class="n">RoleSessionName</span><span class="o">=</span><span class="s">'EKSAdminSession'</span><span class="p">,</span>
    <span class="n">DurationSeconds</span><span class="o">=</span><span class="mi">3600</span>  <span class="c1"># 1 hour
</span><span class="p">)</span>

<span class="c1"># Extract the temporary credentials
</span><span class="n">credentials</span> <span class="o">=</span> <span class="n">assumed_role</span><span class="p">[</span><span class="s">'Credentials'</span><span class="p">]</span>

<span class="c1"># Create an EKS client using the temporary credentials
</span><span class="n">eks_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="n">client</span><span class="p">(</span>
    <span class="s">'eks'</span><span class="p">,</span>
    <span class="n">region_name</span><span class="o">=</span><span class="s">'us-west-2'</span><span class="p">,</span>
    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s">'AccessKeyId'</span><span class="p">],</span>
    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s">'SecretAccessKey'</span><span class="p">],</span>
    <span class="n">aws_session_token</span><span class="o">=</span><span class="n">credentials</span><span class="p">[</span><span class="s">'SessionToken'</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Now you can make EKS API calls
</span><span class="n">clusters</span> <span class="o">=</span> <span class="n">eks_client</span><span class="p">.</span><span class="n">list_clusters</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">clusters</span><span class="p">)</span>
</code></pre></div></div>

<p><br /></p>

<h4 id="step-4-use-temporary-credentials-for-access">Step 4: Use Temporary Credentials for Access</h4>

<p>These temporary credentials can be used to access EKS resources in Account B. Here’s an example of updating your kubeconfig:</p>

<p><br /></p>

<script src="https://gist.github.com/somaz94/6a2ce90006f40949ae86e9dd83bd3fc0.js"></script>

<p><br /></p>

<p>You can also create a shell profile that automatically assumes the role:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Add to your ~/.bash_profile or ~/.zshrc</span>
<span class="k">function </span>assume-eks-role<span class="o">()</span> <span class="o">{</span>
  <span class="nv">output</span><span class="o">=</span><span class="si">$(</span>aws sts assume-role <span class="nt">--role-arn</span> arn:aws:iam::111122223333:role/EKSAdminRole <span class="nt">--role-session-name</span> EKSSession<span class="si">)</span>
  <span class="nb">export </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$output</span> | jq <span class="nt">-r</span> <span class="s1">'.Credentials.AccessKeyId'</span><span class="si">)</span>
  <span class="nb">export </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$output</span> | jq <span class="nt">-r</span> <span class="s1">'.Credentials.SecretAccessKey'</span><span class="si">)</span>
  <span class="nb">export </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$output</span> | jq <span class="nt">-r</span> <span class="s1">'.Credentials.SessionToken'</span><span class="si">)</span>
  <span class="nb">echo</span> <span class="s2">"Temporary credentials set for EKS admin role"</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />

<h3 id="what-is-stsassumerolewithwebidentity">What is sts:AssumeRoleWithWebIdentity?</h3>

<blockquote>
  <p>The <code class="language-plaintext highlighter-rouge">sts:AssumeRoleWithWebIdentity</code> operation allows you to obtain temporary AWS credentials by using an OpenID Connect (OIDC) token or SAML 2.0 assertion from an external identity provider.</p>
</blockquote>

<p>This mechanism enables federating AWS access with external identity systems without requiring AWS IAM users for each identity.</p>

<h4 id="key-benefits">Key Benefits</h4>

<ul>
  <li><strong>No IAM users needed</strong>: Eliminates the need to create IAM users for each external identity</li>
  <li><strong>Centralized identity management</strong>: Use your existing identity provider</li>
  <li><strong>Zero IAM credentials</strong>: No long-term AWS credentials to manage or rotate</li>
  <li><strong>Auditable access</strong>: All access is logged in AWS CloudTrail with the original identity information</li>
</ul>

<h4 id="common-use-cases">Common Use Cases</h4>

<ul>
  <li><strong>GitHub Actions</strong>: Authenticate GitHub workflows to access AWS resources</li>
  <li><strong>Kubernetes Service Accounts</strong>: Allow pods to access AWS services securely</li>
  <li><strong>Web/Mobile Applications</strong>: Allow authenticated application users to access AWS resources directly</li>
  <li><strong>Enterprise SSO</strong>: Enable employees to access AWS using their corporate credentials</li>
  <li><strong>Self-developed applications</strong>: Authenticate custom applications with your own OIDC provider</li>
</ul>

<h4 id="process-flow">Process Flow</h4>

<ol>
  <li><strong>OIDC Provider Configuration</strong>: Register an OIDC provider in IAM and create a role with a trust policy</li>
  <li><strong>Identity Authentication</strong>: User/service authenticates with the external IdP and receives an OIDC token</li>
  <li><strong>AWS API Call</strong>: Application calls <code class="language-plaintext highlighter-rouge">AssumeRoleWithWebIdentity</code> API with the OIDC token</li>
  <li><strong>Token Verification</strong>: AWS verifies the token with the configured OIDC provider</li>
  <li><strong>Temporary Credentials</strong>: Upon successful verification, AWS issues temporary credentials</li>
</ol>

<h4 id="example-github-actions-integration">Example: GitHub Actions Integration</h4>

<p><br /></p>

<p><strong>IAM OIDC Provider Configuration</strong>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws iam create-open-id-connect-provider <span class="nt">--url</span> https://token.actions.githubusercontent.com <span class="nt">--client-id-list</span> sts.amazonaws.com <span class="nt">--thumbprint-list</span> 6938fd4d98bab03faadb97b34396831e3780aea1
</code></pre></div></div>

<p><br /></p>

<p><strong>Role Trust Policy</strong>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Principal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Federated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:iam::ACCOUNT_ID:oidc-provider/token.actions.githubusercontent.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts:AssumeRoleWithWebIdentity"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"StringEquals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"token.actions.githubusercontent.com:aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sts.amazonaws.com"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"token.actions.githubusercontent.com:sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repo:your-org/your-repo:ref:refs/heads/main"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><br /></p>

<p><strong>GitHub Actions Workflow</strong>:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>
      <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Configure AWS credentials</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">aws-actions/configure-aws-credentials@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">role-to-assume</span><span class="pi">:</span> <span class="s">arn:aws:iam::ACCOUNT_ID:role/GitHubActionsRole</span>
          <span class="na">aws-region</span><span class="pi">:</span> <span class="s">us-east-1</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy infrastructure</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">aws cloudformation deploy --template-file template.yaml --stack-name my-stack</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="comparison-assumerole-vs-assumerolewithwebidentity-vs-assumerolewithsaml">Comparison: AssumeRole vs AssumeRoleWithWebIdentity vs AssumeRoleWithSAML<br /><br /></h3>

<h4 id="authentication">Authentication:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: AWS IAM credentials</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: OIDC token</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: SAML 2.0 assertion<br /></li>
</ul>

<h4 id="identity-source">Identity Source:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: AWS IAM</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: External OIDC providers (Google, GitHub, etc.)</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: SAML IdPs (Active Directory, Okta, etc.)<br /></li>
</ul>

<h4 id="primary-use-cases">Primary Use Cases:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: Cross-account access, delegation within AWS</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: Mobile/web apps, CI/CD pipelines, Kubernetes</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: Enterprise SSO, workforce identity federation<br /></li>
</ul>

<h4 id="required-setup">Required Setup:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: IAM roles and policies</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: OIDC provider + IAM role</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: SAML provider + IAM role<br /></li>
</ul>

<h4 id="credential-duration">Credential Duration:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: 15 min - 12 hours</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: 15 min - 12 hours</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: 15 min - 12 hours<br /></li>
</ul>

<h4 id="common-examples">Common Examples:</h4>
<ul>
  <li><strong>sts:AssumeRole</strong>: AWS CLI, AWS console</li>
  <li><strong>sts:AssumeRoleWithWebIdentity</strong>: GitHub Actions, Kubernetes ServiceAccounts</li>
  <li><strong>sts:AssumeRoleWithSAML</strong>: AWS Console login via corporate SSO<br /></li>
</ul>

<p><br /></p>

<h3 id="best-practices-for-aws-assume-role">Best Practices for AWS Assume Role</h3>

<div class="info-box info-box-success">
<br />
<strong>1. Security:</strong>
   - Apply the principle of least privilege to all roles<br />
   - Use external IDs for third-party access to prevent confused deputy problems<br />
   - Implement condition keys in trust policies (source IP, MFA, etc.)<br />
   - Set appropriate session durations (shorter is better)<br />
   - Use temporary credentials instead of long-term access keys<br /><br />

<strong>2. Implementation:</strong>
   - Define clear, descriptive role names and session names<br />
   - Use session tags to enhance logging and authorization<br />
   - Implement role chaining carefully (respecting maximum duration limits)<br />
   - Consider using permission boundaries to limit maximum permissions<br />
   - Use AWS Organizations SCPs to enforce guardrails<br /><br />

<strong>3. Monitoring and Compliance:</strong>
   - Enable CloudTrail logging for all STS actions<br />
   - Set up alerts for suspicious role assumption activities<br />
   - Regularly audit role trust policies and permissions<br />
   - Implement automated compliance checks for roles<br />
   - Use IAM Access Analyzer to identify unintended access<br /><br />

<strong>4. Operational Excellence:</strong>
   - Document role purpose and access patterns<br />
   - Implement infrastructure as code for role management<br />
   - Develop consistent naming conventions<br />
   - Set up a role review process<br />
   - Create emergency access procedures<br /><br />
</div>

<p><br /></p>

<h3 id="troubleshooting-common-issues">Troubleshooting Common Issues</h3>

<div class="info-box info-box-warning">
<br />
<strong>1. Access Denied Errors:</strong>
   - Check trust relationships in the target role<br />
   - Verify the assuming entity has sts:AssumeRole permission<br />
   - Examine IAM policy conditions that might be restricting access<br />
   - Confirm the role ARN is correct<br /><br />

<strong>2. Session Errors:</strong>
   - Ensure session duration is within limits (maximum 12 hours)<br />
   - Check that role chaining doesn't exceed maximum duration<br />
   - Verify session name contains only allowed characters<br /><br />

<strong>3. OIDC/SAML Issues:</strong>
   - Verify OIDC provider configuration is correct<br />
   - Check that token claims match the conditions in the trust policy<br />
   - Ensure the token is not expired<br />
   - Validate that the OIDC provider's TLS certificate is trusted<br /><br />

<strong>4. Permission Problems:</strong>
   - Review CloudTrail logs for specific permission denials<br />
   - Check for conflicting deny statements in policies<br />
   - Ensure required permissions are included in the role policy<br />
   - Look for organization SCPs that might be restricting access<br /><br />
</div>

<p><br /></p>

<hr />

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="https://docs.aws.amazon.com/STS/latest/APIReference/welcome.html">AWS STS Documentation</a></li>
  <li><a href="https://linuxbeast.com/blog/how-to-set-up-cross-account-access-in-aws-with-assumerole/">AWS Cross-Account Access Guide</a></li>
  <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_aws-accounts.html">AWS IAM Role Delegation</a></li>
  <li><a href="https://cloudstudio.com.au/2021/06/06/aws-assumerole/">AWS AssumeRole Deep Dive</a></li>
  <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_oidc.html">OIDC Federation with AWS</a></li>
  <li><a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services">GitHub OIDC Integration with AWS</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/troubleshooting/argocd-ingress-gke/">
                                    
                                        <img src="https://blog.kakaocdn.net/dn/baMOz9/btsGPPRoXDF/KFCDia9hhgPKkgFK8RcPHK/img.png">
                                    
                                    <h3>ArgoCD Ingress Error Resolution Guide (GKE)</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/troubleshooting/fluent-bit-opensearch-duplicate-logs/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1754458041/fluenbit-opensearch_lmr5hf.png">
                                    
                                    <h3>Resolving Duplicate Log Issues in Fluent Bit to OpenSearch Integration</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/kubernetes/kubernetes-install-kubespray-new/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737697968/kubespray_uyug5r.png">
                                    
                                    <h3>Installing Kubernetes with Kubespray and Adding Worker Nodes (2025V.)</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="12">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <button class="toggle-preview" onclick="togglePreview()">
    <span>Hide Preview ▼</span>
</button>

<div id="recommendationSection" class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    <div id="previewSection" class="preview-section">
        
        <a href="/category/monitoring/elk-stack/" class="post-preview">
            <div class="image">
                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1736929645/elk_qcpqhz.png">
                
            </div>
            <h3 class="title">ELK Stack Implementation Guide</h3>
        </a>
    </div>
</div>

<style>
.toggle-preview {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #333;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toggle-preview:hover {
    background: #444;
}

.toggle-preview.visible {
    opacity: 1;
}

.recommendation {
    margin-top: 1000px;
    display: block;
    transition: all 0.3s ease;
}

.recommendation.hidden {
    display: none;
}

.hide-preview {
    margin-left: 10px;
    background: none;
    border: 1px solid #666;
    color: #666;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
}

.hide-preview:hover {
    background: #f0f0f0;
}

.preview-section {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.preview-section.hidden {
    max-height: 0;
}
</style>

<script>
function togglePreview() {
    const recommendation = document.getElementById('recommendationSection');
    const button = document.querySelector('.toggle-preview span');
    
    if (recommendation.classList.contains('hidden')) {
        recommendation.classList.remove('hidden');
        button.textContent = 'Hide Preview ▼';
    } else {
        recommendation.classList.add('hidden');
        button.textContent = 'Show Preview ▲';
    }
}

window.addEventListener('scroll', function() {
    const toggleButton = document.querySelector('.toggle-preview');
    const recommendation = document.getElementById('recommendationSection');
    const rect = recommendation.getBoundingClientRect();
    
    if (rect.top <= window.innerHeight) {
        toggleButton.classList.add('visible');
    } else {
        toggleButton.classList.remove('visible');
    }
});
</script>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;A comprehensive guide to AWS Assume Role and its implementation for cross-account access&quot;%20https://somaz.blog/category/aws/aws-assume-role/%20via%20&#64;twitter_username&hashtags=aws,iam,security,authentication,sts,cross-account"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz.blog/category/aws/aws-assume-role/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz.blog/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/aws/aws-assume-role/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz.blog/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz.blog/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <a href="https://somaz.blog/sitemap.xml" title="sitemap">Sitemap</a> |
      <a href="https://somaz.blog/privacy-policy.html" title="Privacy Policy">Privacy Policy</a>
    </p>

    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz.blog/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz.blog/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "What is AWS Assume Role?",
            "headline": "",
            "description": "A comprehensive guide to AWS Assume Role and its implementation for cross-account access",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737423759/aws-assume-role_wtm7on.png",
            "url": "https://somaz.blog/category/aws/aws-assume-role/",
            "articleBody": "image reference link





Overview

  AWS Assume Role is a fundamental security feature that enables temporary, controlled access to AWS resources across accounts or within the same account. It’s a cornerstone of the AWS security model that implements the principle of least privilege while providing the flexibility needed for modern cloud architectures.




What is AWS Assume Role?


  AWS Assume Role is a function provided by AWS Security Token Service (STS) that allows one IAM entity (user or service) to temporarily adopt another role in AWS and use the permissions associated with that role. This mechanism enhances security and simplifies access management by granting only the necessary permissions for the duration required to complete specific tasks.


The sts:AssumeRole operation enables a secure delegation model where:


  Temporary access: Credentials expire after a specified duration (15 minutes to 12 hours)
  No sharing of long-term credentials: Eliminates the need to share permanent IAM credentials
  Granular permissions: Access can be restricted based on session policies, source IP, and more
  Centralized management: Simplifies permission management across multiple accounts


Key Use Cases


  Cross-account access: Access resources in another AWS account without creating and managing users in that account
  Within-account delegation: Assume a role with different permissions than your current IAM entity
  Application development: Use different roles for development, testing, and production environments
  Third-party access: Allow external partners to access your AWS resources securely
  Emergency access: Implement break-glass procedures for emergency situations




How AWS Assume Role Works




  Trust relationship: The target role specifies which entities (principals) can assume it
  Permission check: The assuming entity must have permission to call the sts:AssumeRole action
  STS call: The entity calls the AssumeRole API with the role ARN and optional parameters
  Temporary credentials: STS returns temporary security credentials (access key, secret key, session token)
  Using credentials: Applications use these credentials to make AWS API calls with the role’s permissions




Detailed Example: Cross-Account EKS Access

The following example demonstrates how to use AssumeRole to grant Account A access to EKS resources in Account B.

Step 1: Create IAM Role in Account B (Target Account)

Create an IAM role with a trust policy that allows Account A to assume this role. The role will have permissions to manage EKS resources.

Trust Policy (in Account B):
{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:root&quot;  // Account A ID
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;aws:PrincipalOrgID&quot;: &quot;o-exampleorgid&quot;  // Optional: Restrict to AWS Organization
        }
      }
    }
  ]
}


For more granular control, you can specify specific roles or users in Account A:

{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:role/DevOpsTeamRole&quot;  // Specific role in Account A
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;aws:PrincipalTag/Department&quot;: &quot;DevOps&quot;  // Optional: Require specific tags
        }
      }
    }
  ]
}


Permission Policy (in Account B):

Attach an appropriate permission policy to the role that grants the necessary EKS permissions:

{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;eks:DescribeCluster&quot;,
        &quot;eks:ListClusters&quot;,
        &quot;eks:UpdateClusterConfig&quot;,
        &quot;eks:DescribeUpdate&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:eks:region:111122223333:cluster/*&quot;
    }
  ]
}




Step 2: Create IAM Policy in Account A (Source Account)

Create and attach an IAM policy to the users or roles in Account A that need to assume the role in Account B.

Example Policy (in Account A):
{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;,
      &quot;Resource&quot;: &quot;arn:aws:iam::111122223333:role/EKSAdminRole&quot;,
      &quot;Condition&quot;: {
        &quot;StringLike&quot;: {
          &quot;aws:RequestedRegion&quot;: [
            &quot;us-west-2&quot;,
            &quot;us-east-1&quot;
          ]
        }
      }
    }
  ]
}




Step 3: Assume Role from Account A

A user or service in Account A can now assume the role in Account B using the AWS CLI, SDK, or AWS console.

Using AWS CLI:







This command returns a JSON object containing:

  AccessKeyId
  SecretAccessKey
  SessionToken
  Expiration timestamp


Using AWS SDK (Python example):

import boto3

# Create an STS client
sts_client = boto3.client(&apos;sts&apos;)

# Assume the role
assumed_role = sts_client.assume_role(
    RoleArn=&apos;arn:aws:iam::111122223333:role/EKSAdminRole&apos;,
    RoleSessionName=&apos;EKSAdminSession&apos;,
    DurationSeconds=3600  # 1 hour
)

# Extract the temporary credentials
credentials = assumed_role[&apos;Credentials&apos;]

# Create an EKS client using the temporary credentials
eks_client = boto3.client(
    &apos;eks&apos;,
    region_name=&apos;us-west-2&apos;,
    aws_access_key_id=credentials[&apos;AccessKeyId&apos;],
    aws_secret_access_key=credentials[&apos;SecretAccessKey&apos;],
    aws_session_token=credentials[&apos;SessionToken&apos;]
)

# Now you can make EKS API calls
clusters = eks_client.list_clusters()
print(clusters)




Step 4: Use Temporary Credentials for Access

These temporary credentials can be used to access EKS resources in Account B. Here’s an example of updating your kubeconfig:







You can also create a shell profile that automatically assumes the role:

# Add to your ~/.bash_profile or ~/.zshrc
function assume-eks-role() {
  output=$(aws sts assume-role --role-arn arn:aws:iam::111122223333:role/EKSAdminRole --role-session-name EKSSession)
  export AWS_ACCESS_KEY_ID=$(echo $output | jq -r &apos;.Credentials.AccessKeyId&apos;)
  export AWS_SECRET_ACCESS_KEY=$(echo $output | jq -r &apos;.Credentials.SecretAccessKey&apos;)
  export AWS_SESSION_TOKEN=$(echo $output | jq -r &apos;.Credentials.SessionToken&apos;)
  echo &quot;Temporary credentials set for EKS admin role&quot;
}






What is sts:AssumeRoleWithWebIdentity?


  The sts:AssumeRoleWithWebIdentity operation allows you to obtain temporary AWS credentials by using an OpenID Connect (OIDC) token or SAML 2.0 assertion from an external identity provider.


This mechanism enables federating AWS access with external identity systems without requiring AWS IAM users for each identity.

Key Benefits


  No IAM users needed: Eliminates the need to create IAM users for each external identity
  Centralized identity management: Use your existing identity provider
  Zero IAM credentials: No long-term AWS credentials to manage or rotate
  Auditable access: All access is logged in AWS CloudTrail with the original identity information


Common Use Cases


  GitHub Actions: Authenticate GitHub workflows to access AWS resources
  Kubernetes Service Accounts: Allow pods to access AWS services securely
  Web/Mobile Applications: Allow authenticated application users to access AWS resources directly
  Enterprise SSO: Enable employees to access AWS using their corporate credentials
  Self-developed applications: Authenticate custom applications with your own OIDC provider


Process Flow


  OIDC Provider Configuration: Register an OIDC provider in IAM and create a role with a trust policy
  Identity Authentication: User/service authenticates with the external IdP and receives an OIDC token
  AWS API Call: Application calls AssumeRoleWithWebIdentity API with the OIDC token
  Token Verification: AWS verifies the token with the configured OIDC provider
  Temporary Credentials: Upon successful verification, AWS issues temporary credentials


Example: GitHub Actions Integration



IAM OIDC Provider Configuration:
aws iam create-open-id-connect-provider --url https://token.actions.githubusercontent.com --client-id-list sts.amazonaws.com --thumbprint-list 6938fd4d98bab03faadb97b34396831e3780aea1




Role Trust Policy:
{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Federated&quot;: &quot;arn:aws:iam::ACCOUNT_ID:oidc-provider/token.actions.githubusercontent.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRoleWithWebIdentity&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;token.actions.githubusercontent.com:aud&quot;: &quot;sts.amazonaws.com&quot;,
          &quot;token.actions.githubusercontent.com:sub&quot;: &quot;repo:your-org/your-repo:ref:refs/heads/main&quot;
        }
      }
    }
  ]
}




GitHub Actions Workflow:
jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v1
        with:
          role-to-assume: arn:aws:iam::ACCOUNT_ID:role/GitHubActionsRole
          aws-region: us-east-1
      
      - name: Deploy infrastructure
        run: aws cloudformation deploy --template-file template.yaml --stack-name my-stack




Comparison: AssumeRole vs AssumeRoleWithWebIdentity vs AssumeRoleWithSAML

Authentication:

  sts:AssumeRole: AWS IAM credentials
  sts:AssumeRoleWithWebIdentity: OIDC token
  sts:AssumeRoleWithSAML: SAML 2.0 assertion


Identity Source:

  sts:AssumeRole: AWS IAM
  sts:AssumeRoleWithWebIdentity: External OIDC providers (Google, GitHub, etc.)
  sts:AssumeRoleWithSAML: SAML IdPs (Active Directory, Okta, etc.)


Primary Use Cases:

  sts:AssumeRole: Cross-account access, delegation within AWS
  sts:AssumeRoleWithWebIdentity: Mobile/web apps, CI/CD pipelines, Kubernetes
  sts:AssumeRoleWithSAML: Enterprise SSO, workforce identity federation


Required Setup:

  sts:AssumeRole: IAM roles and policies
  sts:AssumeRoleWithWebIdentity: OIDC provider + IAM role
  sts:AssumeRoleWithSAML: SAML provider + IAM role


Credential Duration:

  sts:AssumeRole: 15 min - 12 hours
  sts:AssumeRoleWithWebIdentity: 15 min - 12 hours
  sts:AssumeRoleWithSAML: 15 min - 12 hours


Common Examples:

  sts:AssumeRole: AWS CLI, AWS console
  sts:AssumeRoleWithWebIdentity: GitHub Actions, Kubernetes ServiceAccounts
  sts:AssumeRoleWithSAML: AWS Console login via corporate SSO




Best Practices for AWS Assume Role



1. Security:
   - Apply the principle of least privilege to all roles
   - Use external IDs for third-party access to prevent confused deputy problems
   - Implement condition keys in trust policies (source IP, MFA, etc.)
   - Set appropriate session durations (shorter is better)
   - Use temporary credentials instead of long-term access keys

2. Implementation:
   - Define clear, descriptive role names and session names
   - Use session tags to enhance logging and authorization
   - Implement role chaining carefully (respecting maximum duration limits)
   - Consider using permission boundaries to limit maximum permissions
   - Use AWS Organizations SCPs to enforce guardrails

3. Monitoring and Compliance:
   - Enable CloudTrail logging for all STS actions
   - Set up alerts for suspicious role assumption activities
   - Regularly audit role trust policies and permissions
   - Implement automated compliance checks for roles
   - Use IAM Access Analyzer to identify unintended access

4. Operational Excellence:
   - Document role purpose and access patterns
   - Implement infrastructure as code for role management
   - Develop consistent naming conventions
   - Set up a role review process
   - Create emergency access procedures




Troubleshooting Common Issues



1. Access Denied Errors:
   - Check trust relationships in the target role
   - Verify the assuming entity has sts:AssumeRole permission
   - Examine IAM policy conditions that might be restricting access
   - Confirm the role ARN is correct

2. Session Errors:
   - Ensure session duration is within limits (maximum 12 hours)
   - Check that role chaining doesn&apos;t exceed maximum duration
   - Verify session name contains only allowed characters

3. OIDC/SAML Issues:
   - Verify OIDC provider configuration is correct
   - Check that token claims match the conditions in the trust policy
   - Ensure the token is not expired
   - Validate that the OIDC provider&apos;s TLS certificate is trusted

4. Permission Problems:
   - Review CloudTrail logs for specific permission denials
   - Check for conflicting deny statements in policies
   - Ensure required permissions are included in the role policy
   - Look for organization SCPs that might be restricting access






Reference

  AWS STS Documentation
  AWS Cross-Account Access Guide
  AWS IAM Role Delegation
  AWS AssumeRole Deep Dive
  OIDC Federation with AWS
  GitHub OIDC Integration with AWS

",
            "wordcount": "2296",
            "inLanguage": "en",
            "dateCreated": "2025-01-17/",
            "datePublished": "2025-01-17/",
            "dateModified": "2025-01-17/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz.blog/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz.blog/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz.blog/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "AWS",
            "articleSection": "AWS",
            "keywords": ["aws","iam","security","authentication","sts","cross-account"]
        }
        </script>
    </body>
</html>
