<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <!-- ✅ Google Tag Manager 추가 -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MBP83N4Q');
    </script>
      <!-- ✅ End Google Tag Manager -->

    <!-- Mermaid.js 직접 로드 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

    <title>What is AWS Ingress Annotations? | somaz</title>
    <meta name="description" content="A comprehensive guide to AWS Load Balancer Controller Ingress Annotations">
    
        <meta name="keywords" content="aws, kubernetes, ingress, alb">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="What is AWS Ingress Annotations? | somaz">
    <meta name="twitter:description" content="A comprehensive guide to AWS Load Balancer Controller Ingress Annotations">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737362570/ingress-nginx-aws_hxoiqe.png">
    
    
    
        <meta name="twitter:site" content="@twitter_username">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://somaz94.github.io/category/aws/aws-ingress-annotations/">
    <meta property="og:title" content="What is AWS Ingress Annotations? | somaz">
    <meta property="og:image" content="https://res.cloudinary.com/dkcm26aem/image/upload/v1737362570/ingress-nginx-aws_hxoiqe.png">
    <meta property="og:description" content="A comprehensive guide to AWS Load Balancer Controller Ingress Annotations">
    <meta property="og:site_name" content="Somaz Tech Blog">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="somaz">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="https://somaz94.github.io/category/aws/aws-ingress-annotations/">
    <link rel="alternate" type="application/rss+xml" title="Somaz Tech Blog" href="https://somaz94.github.io/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8725590811736154"
        crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;500;700&display=swap" rel="stylesheet"> -->
    
</head>
<!-- ✅ Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBP83N4Q"
            height="0" width="0" style="display:none;visibility:hidden">
    </iframe>
</noscript>
<!-- ✅ End Google Tag Manager (noscript) -->
    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol><symbol id="icon-tistory" viewBox="0 0 24 24"><path d="M4 4h16v3h-6v13h-4V7H4V4z"/></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                somaz <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
        <a href="https://github.com/thiagorossener/jekflix-template" class="get-theme" role="button">
            Get this theme!
        </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="https://somaz94.github.io/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/feed.xml">Feed</a>
      </li>
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2025-01-15T16:00:00+00:00">
                            


January 15, 2025

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>12 min to read</span>
                </p>
                <h1 class="post-title">What is AWS Ingress Annotations?</h1>
                <p class="post-subtitle"></p>

                
                    <img src="https://res.cloudinary.com/dkcm26aem/image/upload/v1737362570/ingress-nginx-aws_hxoiqe.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <p><a href="https://aws.amazon.com/ko/blogs/containers/exposing-kubernetes-applications-part-3-nginx-ingress-controller/">image reference link</a></p>

<p><br /></p>

<hr />

<h2 id="-overview">🎯 Overview</h2>
<p>Learn about AWS Load Balancer Controller Ingress Annotations and how they manage traffic routing to Kubernetes services using Application Load Balancers (ALB).</p>

<p><br /></p>

<h3 id="what-is-ingress-annotations">What is Ingress Annotations?</h3>
<blockquote>
  <p>In AWS, the AWS load balancer controller configures and manages the behavior of the Application Load Balancer (ALB) that routes traffic to the Kubernetes service using annotations for incoming resources. <br /><br />Annotations allow you to specify settings such as SSL, routing behavior, and security groups directly within the Kubernetes Ingress resource.</p>
</blockquote>

<h3 id="how-load-balancer-controller-works">How Load Balancer Controller Works</h3>

<ul>
  <li>Create or update ALBs, their listeners, and target groups based on the specified annotations.</li>
  <li>Manage status checks, security settings, routing rules, SSL certificates, and other defined configurations.</li>
  <li>When annotations change, the controller updates ALB with new settings without manual intervention, allowing Kubernetes native resources to manage complex configurations.</li>
</ul>

<h3 id="-ingress-groups">🔍 Ingress Groups</h3>

<ul>
  <li>In AWS, ingress group is a feature that allows multiple ingress resources to be integrated into a single load balancer (ALB) to be managed.</li>
  <li>This allows applications from different Kubernetes namespaces or different teams to share the same ALB while setting different Ingress rules.</li>
  <li>ingress group can save network resources and increase management efficiency.</li>
  <li>Basically, ingress does not belong to ingress group, ingress is “implicit ingress group”, that is, it exists as an independent entity.</li>
</ul>

<h4 id="ingress-group-name-settings">Ingress Group Name Settings</h4>

<ul>
  <li>Use the alb.ingress.kubernetes.io/group.name annotation to define the group name.</li>
  <li>An ingress resource with the same group name will share one ALB.</li>
  <li>ALB assigned to ingress group is ingress.k8s.aws/stack searches and finds AWS tags (which are tagged by listener rules) and takes the name of InressGroup as the value of this tag.</li>
  <li>For resources that do not use ingress group, the tag value is set in the format of namespace/ingressname.</li>
  <li>If you change the groupName assigned to the ingress resource, the ingress moves from the existing group to the new ingress Group, which is managed by the ALB of the new ingress Group.</li>
  <li>If there is no ALB in the new IngressGroup, a new ALB is automatically created.</li>
  <li>The ALB of the ingress group can be found by searching for the AWS tag ingress.k8s.aws/ stack tag with the name of the ingress group as a value.</li>
  <li>example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/group.name: my-team.awesome-group</code></li>
</ul>

<h4 id="ingress-group-ranking">Ingress Group Ranking</h4>

<ul>
  <li>You can specify the order using the alb.ingress.kubernetes.io/group.order annotation.</li>
  <li>The ingress rule with a low number of order values is applied first, and specific priorities can be specified for the same path or host.</li>
  <li>example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/group.order: 10</code></li>
</ul>

<h4 id="ingress-group-example">Ingress Group Example</h4>

<p>In the example below, two ingress resources share a group called my-shared-group, so one ALB processes the request.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Ingress for Service A</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">service-a-ingress</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">alb.ingress.kubernetes.io/group.name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">my-shared-group"</span>
    <span class="na">alb.ingress.kubernetes.io/group.order</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">service-a.example.com"</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">service-a</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">number</span><span class="pi">:</span> <span class="m">80</span>

<span class="c1"># Ingress for Service B</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">service-b-ingress</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">alb.ingress.kubernetes.io/group.name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">my-shared-group"</span>
    <span class="na">alb.ingress.kubernetes.io/group.order</span><span class="pi">:</span> <span class="s2">"</span><span class="s">20"</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">service-b.example.com"</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">service-b</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">number</span><span class="pi">:</span> <span class="m">80</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">service-a</code> and <code class="language-plaintext highlighter-rouge">service-b</code> belong to the ingress group <code class="language-plaintext highlighter-rouge">my-share-group</code>, respectively, and <code class="language-plaintext highlighter-rouge">service-a</code> is applied first as order 10.</li>
</ul>

<p><br /></p>

<hr />

<h3 id="-ingress-traffic-listening">🌐 Ingress Traffic Listening</h3>

<table class="table-modern">
  <tr>
    <th>Annotation</th>
    <th>Description</th>
    <th>Example</th>
  </tr>
  <tr>
    <td><code>listen-ports</code></td>
    <td>Specify ports for ALB</td>
    <td><code>[{"HTTP": 80}, {"HTTPS": 443}]</code></td>
  </tr>
  <tr>
    <td><code>ssl-redirect</code></td>
    <td>Enable SSL redirection</td>
    <td><code>'443'</code></td>
  </tr>
  <tr>
    <td><code>ip-address-type</code></td>
    <td>IPv4 or dualstack support</td>
    <td><code>ipv4</code> or <code>dualstack</code></td>
  </tr>
</table>

<h4 id="listen-ports">listen-ports</h4>

<ul>
  <li>Specifies the port that the ALB receives.</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}, {"HTTP": 8080}, {"HTTPS": 8443}]</code></li>
  <li>Since it applies to all Ingress within IngressGroup, each Ingress can define its own port, and the rule applies only to the ports specified in each Ingress.</li>
  <li>If the same receiving port is defined by multiple ingress within the IngressGroup, it is applied in the order of the IngressGroup.</li>
  <li>Default: If listen-ports is not specified, the default is {“HTTP”: 80} if the certificate is not used, and {“HTTPS”: 443} if the certificate is provided.</li>
  <li>Warning: You cannot have duplicate load balancer ports in the same group (Exception: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/group.order : 10</code> specified)</li>
  <li>Since ALB integrates these settings for all Ingress in the group, defining listen-ports in one Ingress in the IngressGroup is sufficient.</li>
</ul>

<h4 id="ssl-redirect">ssl-redirect</h4>

<ul>
  <li>Enables SSL redirection by specifying the port on which HTTP traffic is redirected, typically HTTPS port 443.</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/ssl-redirect: '443'</code></li>
  <li>SSL redirection (ssl-redirect) affects all ingress in the group if defined in the ingressGroup.</li>
  <li>When SSL redirection is enabled, all HTTP listener are configured by default to redirect to HTTPS, ignoring other HTTP rules.</li>
</ul>

<h4 id="ip-address-type">ip-address-type</h4>

<ul>
  <li>You can specify whether ALB should use ipv4 or dualstack for IPv4 and IPv6 traffic support.</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/ip-address-type: ipv4 or dualstack</code></li>
  <li>ipv4: Configure ALB to use only IPv4 addresses, i.e., handle IPv4 traffic exclusively.</li>
  <li>dualstack: ALB may support both IPv4 and IPv6 traffic. When set to dualstack, ALB has IPv4 and IPv6 addresses, allowing traffic to be routed in both address types.</li>
</ul>

<h4 id="customer-owned-ipv4-pool">customer-owned-ipv4-pool</h4>

<ul>
  <li>Specifies the customer-owned IPv4 address pool for ALB when using the Outpost environment.</li>
  <li>Warning: This comment cannot be changed and you will need to recreate Ingress to change or limit it.</li>
  <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/customer-owned-ipv4-pool: ipv4pool-coip-xxxxxxx</code></li>
</ul>

<p><br /></p>

<hr />

<h3 id="️-ingress-traffic-routing">🛣️ Ingress Traffic Routing</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/load-balancer-name</code>
    <ul>
      <li>All Ingress within IngressGroup must use the same load balancer name.</li>
      <li>The name cannot exceed 32 characters, and an error occurs when exceeded.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/target-type</code>
    <ul>
      <li>instance mode routes traffic to all ec2 instances in the cluster of NodePort open for service.</li>
      <li>When using instance mode, the service must use NodePort or Loadbalacner type.</li>
      <li>ip mode routes all traffic to pod.</li>
      <li>The network plug-in must use the secondary IP address of ENI for pod IP to use ip mode.</li>
      <li><code class="language-plaintext highlighter-rouge">amazon-vpc-cni-k8s</code></li>
      <li>ip mode is required for sticky session to work with application load balancer. Service type is not important when using ip mode.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/target-node-labels</code>
    <ul>
      <li>Specifies the node to be included in the target group registration of the instance target type.</li>
      <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/target-node-labels: label1=value1, label2=value2</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/backend-protocol</code>
    <ul>
      <li>Specifies the protocol to use when padding traffic.</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/backend-protocol-version</code></p>

    <ul>
      <li>Specifies the application protocol used to route traffic to the pod. It is only valid when HTTP or HTTPS is used as a backend protocol.</li>
      <li>Example:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/backend-protocol-version: HTTP2</code></li>
          <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/backend-protocol-version: GRPC</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/actions.${action-name}</code>
    <ul>
      <li>Provides a method for configuring loadbalancer listener rules, such as redirecton operations.</li>
      <li>The serviceName of the annotation should be identical to the serviceName of the ingress rule, and the servicePort should be used-annotated unconditionally.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/conditions.${conditions-name}</code>
    <ul>
      <li>Provides a method for specifying routing conditions in addition to host/path conditions in ingress.</li>
      <li>The serviceName of the annotation should be identical to the serviceName of the ingress rule, and the servicePort should be used-annotated unconditionally.</li>
    </ul>
  </li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">default</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ingress</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">alb.ingress.kubernetes.io/scheme</span><span class="pi">:</span> <span class="s">internet-facing</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path1</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Host is www.example.com OR anno.example.com"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path1</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"host-header","hostHeaderConfig":{"values":["anno.example.com"]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path2</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Path is /path2 OR /anno/path2"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path2</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"path-pattern","pathPatternConfig":{"values":["/anno/path2"]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path3</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Http header HeaderName is HeaderValue1 OR HeaderValue2"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path3</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"http-header","httpHeaderConfig":{"httpHeaderName": "HeaderName", "values":["HeaderValue1", "HeaderValue2"]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path4</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Http request method is GET OR HEAD"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path4</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"http-request-method","httpRequestMethodConfig":{"Values":["GET", "HEAD"]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path5</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Query string is paramA:valueA1 OR paramA:valueA2"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path5</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"query-string","queryStringConfig":{"values":[{"key":"paramA","value":"valueA1"},{"key":"paramA","value":"valueA2"}]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path6</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"Source IP is 192.168.0.0/16 OR 172.16.0.0/16"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path6</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"source-ip","sourceIpConfig":{"values":["192.168.0.0/16", "172.16.0.0/16"]}}]</span>
    <span class="na">alb.ingress.kubernetes.io/actions.rule-path7</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">{"type":"fixed-response","fixedResponseConfig":{"contentType":"text/plain","statusCode":"200","messageBody":"multiple conditions applies"}}</span>
    <span class="na">alb.ingress.kubernetes.io/conditions.rule-path7</span><span class="pi">:</span> <span class="pi">&gt;</span>
      <span class="s">[{"field":"http-header","httpHeaderConfig":{"httpHeaderName": "HeaderName", "values":["HeaderValue"]}},{"field":"query-string","queryStringConfig":{"values":[{"key":"paramA","value":"valueA"}]}},{"field":"query-string","queryStringConfig":{"values":[{"key":"paramB","value":"valueB"}]}}]</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ingressClassName</span><span class="pi">:</span> <span class="s">alb</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">www.example.com</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path1</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path1</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path2</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path2</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path3</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path3</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path4</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path4</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path5</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path5</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path6</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path6</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/path7</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Exact</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">rule-path7</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">use-annotation</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-ingress-access-control">🔒 Ingress Access Control</h3>

<table class="table-modern">
  <tr>
    <th>Feature</th>
    <th>Annotation</th>
    <th>Purpose</th>
  </tr>
  <tr>
    <td>Scheme</td>
    <td><code>alb.ingress.kubernetes.io/scheme</code></td>
    <td>Define ALB as internal or internet-facing</td>
  </tr>
  <tr>
    <td>CIDR</td>
    <td><code>alb.ingress.kubernetes.io/inbound-cidrs</code></td>
    <td>Restrict IP ranges</td>
  </tr>
  <tr>
    <td>Security Groups</td>
    <td><code>alb.ingress.kubernetes.io/security-groups</code></td>
    <td>Specify security groups</td>
  </tr>
</table>

<ul>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/scheme</code>
    <ul>
      <li>Used in conjunction with AWS Application Load Balancer (ALB) to define the type of load balancer access in a Kubernetes Ingress configuration. This annotation informs AWS whether ALB is an Internet connection (public) or internal (private).</li>
      <li><code class="language-plaintext highlighter-rouge">internet-facing</code>: make ALB accessible publicly via the internet.</li>
      <li><code class="language-plaintext highlighter-rouge">internal</code>: make ALB private by restricting it to be accessible only within a VPC or connected network.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/inbound-cidrs</code>
    <ul>
      <li>Restrict access to ALB by allowing only the specified IP range (CIDR) to be connected.</li>
      <li>It is particularly useful for controlling access to private applications or internal resources by limiting the range of IPs that can access ALB.</li>
      <li>If Ingress is part of IngressGroup, the inbound-cidrs annotation applies to all Ingress resources in the group.</li>
      <li>However, inbound-cidrs applies only to ports defined in that Ingress.</li>
      <li>Therefore, if multiple ingresses share the same ingress port, you must define inbound-cidrs only for one of those ingresses to prevent collisions.</li>
      <li>Specifying <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/security-groups</code> in Ingress ignores inbound-cidrs annotations.</li>
      <li>If you do not specify the inbound-cidrs annotation:
        <ul>
          <li>0.0.0.0/0 (all IPv4 addresses) will be allowed if the ALB’s IPAddressType is set to ipv4.</li>
          <li>0.0.0.0/0 and ::/0 (all IPv4 and IPv6 addresses) will be allowed if the ALB’s IPAddressType is set to dualstack.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/security-groups</code>
    <ul>
      <li>Specifies the security group to connect to the load balancer.</li>
      <li>Without that announcement, the controller automatically creates a security group, connects the security group to the load balancer, and allows listen-ports access to inbound-cidrs and security-group-prefix-lists. The Node/Pod security group also modifies this security group to allow inbound traffic. In other words, if you want to apply the security group I created to Pod and Node, you can use it.</li>
      <li>Example
        <ul>
          <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/security-groups: sg-xxxx, nameOfSg1, nameOfSg2</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/manage-backend-security-group-rules</code>
    <ul>
      <li>When specifying security security groups, specify whether the controller configures security group rules on Node/Pod for traffic access.</li>
      <li>Applies only if you specify a security group through alb.ingress.kubernetes.io/security-groups .</li>
      <li>Example: <code class="language-plaintext highlighter-rouge">alb.ingress.kubernetes.io/manage-backend-security-group-rules: "true"</code></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="-best-practices">📝 Best Practices</h3>

<div class="info-box info-box-success">
<br />
<strong>1. Ingress Groups:</strong>
   - Use meaningful group names<br />
   - Set appropriate order<br />
   - Share ALB efficiently<br /><br />

<strong>2. Security:</strong>
   - Use appropriate scheme<br />
   - Implement CIDR restrictions<br />
   - Configure security groups<br /><br />

<strong>3. Routing:</strong>
   - Choose correct target type<br />
   - Set proper protocols<br />
   - Define clear conditions<br /><br />
</div>

<p><br /></p>

<hr />

<h3 id="-reference">📚 Reference</h3>
<ul>
  <li><a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/latest/">AWS Load Balancer Controller Documentation</a></li>
  <li><a href="https://aws.amazon.com/blogs/containers/exposing-kubernetes-applications-part-3-nginx-ingress-controller/">AWS Blog: Exposing Kubernetes Applications</a></li>
  <li><a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/latest/guide/ingress/annotations/">AWS Load Balancer Controller Annotations</a></li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/category/monitoring/loki-promtail-install/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1738641555/loki-promtail-install_t7caxs.png">
                                    
                                    <h3>How to install Loki and Promtail with Helm</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/monitoring/loki/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1738641136/loki_anz45n.png">
                                    
                                    <h3>What is Loki?</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/category/monitoring/prometheus-thanos-install/">
                                    
                                        <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1738640346/prometheus-thans-archi_zfo72f.png">
                                    
                                    <h3>Installing Prometheus and Thanos with Helm</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="12">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/category/cicd/argocd-setup/" class="post-preview">
        <div class="image">
            
                <img src="https://res.cloudinary.com/dkcm26aem/image/upload/c_scale,w_380/v1737365011/argocd_x79gn0.png">
            
        </div>
        <h3 class="title">Setting up ArgoCD - GitOps Continuous Deployment Tool</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;A comprehensive guide to AWS Load Balancer Controller Ingress Annotations&quot;%20https://somaz94.github.io/category/aws/aws-ingress-annotations/%20via%20&#64;twitter_username&hashtags=aws,kubernetes,ingress,alb"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://somaz94.github.io/category/aws/aws-ingress-annotations/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        

  <section class="author">
    <div class="details">
      
        <img class="img-rounded" src="/assets/img/uploads/profile.png" alt="Somaz">
      
      <p class="def">Author</p>
      <h3 class="name">
        <a href="/authors/somaz/">Somaz</a>
      </h3>
      <p class="desc">DevOps engineer focused on cloud infrastructure and automation</p>
      <p>
        
          <a href="https://github.com/somaz94" title="Github">
            <svg><use xlink:href="#icon-github"></use></svg>
          </a>
        
        
        
        
        
        
          <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
            <svg><use xlink:href="#icon-linkedin"></use></svg>
          </a>
        
        
          <a href="https://somaz.tistory.com" title="Tistory">
            <svg><use xlink:href="#icon-tistory"></use></svg>
          </a>
        
      </p>
    </div>
  </section>

  
  
  
  
  
  
  
  

  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Somaz",
      
      "image": "/assets/img/uploads/profile.png",
      
      "jobTitle": "DevOps Engineer",
      "url": "https://somaz94.github.io/authors/somaz/",
      "sameAs": [
        "https://github.com/somaz94","https://www.linkedin.com/in/somaz","https://{{ author.tistory_username }}.tistory.com"
      ]
  }
  </script>


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'https-somaz94-github-io';
        var disqus_title = '';
        var disqus_url = '/category/aws/aws-ingress-annotations/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/somaz94" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
        <a href="https://www.facebook.com/facebook_username" title="Facebook">
          <svg><use xlink:href="#icon-facebook"></use></svg>
        </a>
      
      
        <a href="https://twitter.com/twitter_username" title="Twitter">
          <svg><use xlink:href="#icon-twitter"></use></svg>
        </a>
      
      
        <a href="https://medium.com/@medium_username" title="Medium">
          <svg><use xlink:href="#icon-medium"></use></svg>
        </a>
      
      
        <a href="https://www.instagram.com/instagram_username" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
        <a href="https://www.linkedin.com/in/somaz" title="LinkedIn">
          <svg><use xlink:href="#icon-linkedin"></use></svg>
        </a>
      
      
        <a href="https://somaz.tistory.com" title="Tistory">
          <svg><use xlink:href="#icon-tistory"></use></svg>
        </a>
      
    </p>

    <ul>
  
    
      <li>
        <a href="https://somaz94.github.io/">Home</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/about">About</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/category">Category</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/contact">Contact</a>
      </li>
    
  
    
      <li>
        <a href="https://somaz94.github.io/feed.xml">Feed</a>
      </li>
    
  
</ul>


    <p>
      <span>Somaz Tech Blog</span> <svg class="love"><use xlink:href="#icon-heart"></use></svg>
    </p>
</footer>










<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "somaz",
  "description": "DevOps engineer's tech blog.",
  "url": "https://somaz94.github.io/",
  "logo": {
      "@type": "ImageObject",
      "url": "https://somaz94.github.io/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/somaz94","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/somaz","https://{{ site.tistory_username }}.tistory.com"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXX-X"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXXXXX-X');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "What is AWS Ingress Annotations?",
            "headline": "",
            "description": "A comprehensive guide to AWS Load Balancer Controller Ingress Annotations",
            "image": "https://res.cloudinary.com/dkcm26aem/image/upload/v1737362570/ingress-nginx-aws_hxoiqe.png",
            "url": "https://somaz94.github.io/category/aws/aws-ingress-annotations/",
            "articleBody": "image reference link





🎯 Overview
Learn about AWS Load Balancer Controller Ingress Annotations and how they manage traffic routing to Kubernetes services using Application Load Balancers (ALB).



What is Ingress Annotations?

  In AWS, the AWS load balancer controller configures and manages the behavior of the Application Load Balancer (ALB) that routes traffic to the Kubernetes service using annotations for incoming resources. Annotations allow you to specify settings such as SSL, routing behavior, and security groups directly within the Kubernetes Ingress resource.


How Load Balancer Controller Works


  Create or update ALBs, their listeners, and target groups based on the specified annotations.
  Manage status checks, security settings, routing rules, SSL certificates, and other defined configurations.
  When annotations change, the controller updates ALB with new settings without manual intervention, allowing Kubernetes native resources to manage complex configurations.


🔍 Ingress Groups


  In AWS, ingress group is a feature that allows multiple ingress resources to be integrated into a single load balancer (ALB) to be managed.
  This allows applications from different Kubernetes namespaces or different teams to share the same ALB while setting different Ingress rules.
  ingress group can save network resources and increase management efficiency.
  Basically, ingress does not belong to ingress group, ingress is “implicit ingress group”, that is, it exists as an independent entity.


Ingress Group Name Settings


  Use the alb.ingress.kubernetes.io/group.name annotation to define the group name.
  An ingress resource with the same group name will share one ALB.
  ALB assigned to ingress group is ingress.k8s.aws/stack searches and finds AWS tags (which are tagged by listener rules) and takes the name of InressGroup as the value of this tag.
  For resources that do not use ingress group, the tag value is set in the format of namespace/ingressname.
  If you change the groupName assigned to the ingress resource, the ingress moves from the existing group to the new ingress Group, which is managed by the ALB of the new ingress Group.
  If there is no ALB in the new IngressGroup, a new ALB is automatically created.
  The ALB of the ingress group can be found by searching for the AWS tag ingress.k8s.aws/ stack tag with the name of the ingress group as a value.
  example: alb.ingress.kubernetes.io/group.name: my-team.awesome-group


Ingress Group Ranking


  You can specify the order using the alb.ingress.kubernetes.io/group.order annotation.
  The ingress rule with a low number of order values is applied first, and specific priorities can be specified for the same path or host.
  example: alb.ingress.kubernetes.io/group.order: 10


Ingress Group Example

In the example below, two ingress resources share a group called my-shared-group, so one ALB processes the request.

# Ingress for Service A
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: service-a-ingress
  annotations:
    alb.ingress.kubernetes.io/group.name: &quot;my-shared-group&quot;
    alb.ingress.kubernetes.io/group.order: &quot;10&quot;
spec:
  rules:
    - host: &quot;service-a.example.com&quot;
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: service-a
                port:
                  number: 80

# Ingress for Service B
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: service-b-ingress
  annotations:
    alb.ingress.kubernetes.io/group.name: &quot;my-shared-group&quot;
    alb.ingress.kubernetes.io/group.order: &quot;20&quot;
spec:
  rules:
    - host: &quot;service-b.example.com&quot;
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: service-b
                port:
                  number: 80


  service-a and service-b belong to the ingress group my-share-group, respectively, and service-a is applied first as order 10.






🌐 Ingress Traffic Listening


  
    Annotation
    Description
    Example
  
  
    listen-ports
    Specify ports for ALB
    [{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]
  
  
    ssl-redirect
    Enable SSL redirection
    &apos;443&apos;
  
  
    ip-address-type
    IPv4 or dualstack support
    ipv4 or dualstack
  


listen-ports


  Specifies the port that the ALB receives.
  Example: alb.ingress.kubernetes.io/listen-ports: &apos;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}, {&quot;HTTP&quot;: 8080}, {&quot;HTTPS&quot;: 8443}]
  Since it applies to all Ingress within IngressGroup, each Ingress can define its own port, and the rule applies only to the ports specified in each Ingress.
  If the same receiving port is defined by multiple ingress within the IngressGroup, it is applied in the order of the IngressGroup.
  Default: If listen-ports is not specified, the default is {“HTTP”: 80} if the certificate is not used, and {“HTTPS”: 443} if the certificate is provided.
  Warning: You cannot have duplicate load balancer ports in the same group (Exception: alb.ingress.kubernetes.io/group.order : 10 specified)
  Since ALB integrates these settings for all Ingress in the group, defining listen-ports in one Ingress in the IngressGroup is sufficient.


ssl-redirect


  Enables SSL redirection by specifying the port on which HTTP traffic is redirected, typically HTTPS port 443.
  Example: alb.ingress.kubernetes.io/ssl-redirect: &apos;443&apos;
  SSL redirection (ssl-redirect) affects all ingress in the group if defined in the ingressGroup.
  When SSL redirection is enabled, all HTTP listener are configured by default to redirect to HTTPS, ignoring other HTTP rules.


ip-address-type


  You can specify whether ALB should use ipv4 or dualstack for IPv4 and IPv6 traffic support.
  Example: alb.ingress.kubernetes.io/ip-address-type: ipv4 or dualstack
  ipv4: Configure ALB to use only IPv4 addresses, i.e., handle IPv4 traffic exclusively.
  dualstack: ALB may support both IPv4 and IPv6 traffic. When set to dualstack, ALB has IPv4 and IPv6 addresses, allowing traffic to be routed in both address types.


customer-owned-ipv4-pool


  Specifies the customer-owned IPv4 address pool for ALB when using the Outpost environment.
  Warning: This comment cannot be changed and you will need to recreate Ingress to change or limit it.
  Example: alb.ingress.kubernetes.io/customer-owned-ipv4-pool: ipv4pool-coip-xxxxxxx






🛣️ Ingress Traffic Routing


  alb.ingress.kubernetes.io/load-balancer-name
    
      All Ingress within IngressGroup must use the same load balancer name.
      The name cannot exceed 32 characters, and an error occurs when exceeded.
    
  
  alb.ingress.kubernetes.io/target-type
    
      instance mode routes traffic to all ec2 instances in the cluster of NodePort open for service.
      When using instance mode, the service must use NodePort or Loadbalacner type.
      ip mode routes all traffic to pod.
      The network plug-in must use the secondary IP address of ENI for pod IP to use ip mode.
      amazon-vpc-cni-k8s
      ip mode is required for sticky session to work with application load balancer. Service type is not important when using ip mode.
    
  
  alb.ingress.kubernetes.io/target-node-labels
    
      Specifies the node to be included in the target group registration of the instance target type.
      Example: alb.ingress.kubernetes.io/target-node-labels: label1=value1, label2=value2
    
  
  alb.ingress.kubernetes.io/backend-protocol
    
      Specifies the protocol to use when padding traffic.
    
  
  
    alb.ingress.kubernetes.io/backend-protocol-version

    
      Specifies the application protocol used to route traffic to the pod. It is only valid when HTTP or HTTPS is used as a backend protocol.
      Example:
        
          alb.ingress.kubernetes.io/backend-protocol-version: HTTP2
          alb.ingress.kubernetes.io/backend-protocol-version: GRPC
        
      
    
  
  alb.ingress.kubernetes.io/actions.${action-name}
    
      Provides a method for configuring loadbalancer listener rules, such as redirecton operations.
      The serviceName of the annotation should be identical to the serviceName of the ingress rule, and the servicePort should be used-annotated unconditionally.
    
  
  alb.ingress.kubernetes.io/conditions.${conditions-name}
    
      Provides a method for specifying routing conditions in addition to host/path conditions in ingress.
      The serviceName of the annotation should be identical to the serviceName of the ingress rule, and the servicePort should be used-annotated unconditionally.
    
  


apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  namespace: default
  name: ingress
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/actions.rule-path1: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Host is www.example.com OR anno.example.com&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path1: &amp;gt;
      [{&quot;field&quot;:&quot;host-header&quot;,&quot;hostHeaderConfig&quot;:{&quot;values&quot;:[&quot;anno.example.com&quot;]}}]
    alb.ingress.kubernetes.io/actions.rule-path2: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Path is /path2 OR /anno/path2&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path2: &amp;gt;
      [{&quot;field&quot;:&quot;path-pattern&quot;,&quot;pathPatternConfig&quot;:{&quot;values&quot;:[&quot;/anno/path2&quot;]}}]
    alb.ingress.kubernetes.io/actions.rule-path3: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Http header HeaderName is HeaderValue1 OR HeaderValue2&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path3: &amp;gt;
      [{&quot;field&quot;:&quot;http-header&quot;,&quot;httpHeaderConfig&quot;:{&quot;httpHeaderName&quot;: &quot;HeaderName&quot;, &quot;values&quot;:[&quot;HeaderValue1&quot;, &quot;HeaderValue2&quot;]}}]
    alb.ingress.kubernetes.io/actions.rule-path4: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Http request method is GET OR HEAD&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path4: &amp;gt;
      [{&quot;field&quot;:&quot;http-request-method&quot;,&quot;httpRequestMethodConfig&quot;:{&quot;Values&quot;:[&quot;GET&quot;, &quot;HEAD&quot;]}}]
    alb.ingress.kubernetes.io/actions.rule-path5: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Query string is paramA:valueA1 OR paramA:valueA2&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path5: &amp;gt;
      [{&quot;field&quot;:&quot;query-string&quot;,&quot;queryStringConfig&quot;:{&quot;values&quot;:[{&quot;key&quot;:&quot;paramA&quot;,&quot;value&quot;:&quot;valueA1&quot;},{&quot;key&quot;:&quot;paramA&quot;,&quot;value&quot;:&quot;valueA2&quot;}]}}]
    alb.ingress.kubernetes.io/actions.rule-path6: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;Source IP is 192.168.0.0/16 OR 172.16.0.0/16&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path6: &amp;gt;
      [{&quot;field&quot;:&quot;source-ip&quot;,&quot;sourceIpConfig&quot;:{&quot;values&quot;:[&quot;192.168.0.0/16&quot;, &quot;172.16.0.0/16&quot;]}}]
    alb.ingress.kubernetes.io/actions.rule-path7: &amp;gt;
      {&quot;type&quot;:&quot;fixed-response&quot;,&quot;fixedResponseConfig&quot;:{&quot;contentType&quot;:&quot;text/plain&quot;,&quot;statusCode&quot;:&quot;200&quot;,&quot;messageBody&quot;:&quot;multiple conditions applies&quot;}}
    alb.ingress.kubernetes.io/conditions.rule-path7: &amp;gt;
      [{&quot;field&quot;:&quot;http-header&quot;,&quot;httpHeaderConfig&quot;:{&quot;httpHeaderName&quot;: &quot;HeaderName&quot;, &quot;values&quot;:[&quot;HeaderValue&quot;]}},{&quot;field&quot;:&quot;query-string&quot;,&quot;queryStringConfig&quot;:{&quot;values&quot;:[{&quot;key&quot;:&quot;paramA&quot;,&quot;value&quot;:&quot;valueA&quot;}]}},{&quot;field&quot;:&quot;query-string&quot;,&quot;queryStringConfig&quot;:{&quot;values&quot;:[{&quot;key&quot;:&quot;paramB&quot;,&quot;value&quot;:&quot;valueB&quot;}]}}]
spec:
  ingressClassName: alb
  rules:
    - host: www.example.com
      http:
        paths:
          - path: /path1
            pathType: Exact
            backend:
              service:
                name: rule-path1
                port:
                  name: use-annotation
          - path: /path2
            pathType: Exact
            backend:
              service:
                name: rule-path2
                port:
                  name: use-annotation
          - path: /path3
            pathType: Exact
            backend:
              service:
                name: rule-path3
                port:
                  name: use-annotation
          - path: /path4
            pathType: Exact
            backend:
              service:
                name: rule-path4
                port:
                  name: use-annotation
          - path: /path5
            pathType: Exact
            backend:
              service:
                name: rule-path5
                port:
                  name: use-annotation
          - path: /path6
            pathType: Exact
            backend:
              service:
                name: rule-path6
                port:
                  name: use-annotation
          - path: /path7
            pathType: Exact
            backend:
              service:
                name: rule-path7
                port:
                  name: use-annotation




🔒 Ingress Access Control


  
    Feature
    Annotation
    Purpose
  
  
    Scheme
    alb.ingress.kubernetes.io/scheme
    Define ALB as internal or internet-facing
  
  
    CIDR
    alb.ingress.kubernetes.io/inbound-cidrs
    Restrict IP ranges
  
  
    Security Groups
    alb.ingress.kubernetes.io/security-groups
    Specify security groups
  



  alb.ingress.kubernetes.io/scheme
    
      Used in conjunction with AWS Application Load Balancer (ALB) to define the type of load balancer access in a Kubernetes Ingress configuration. This annotation informs AWS whether ALB is an Internet connection (public) or internal (private).
      internet-facing: make ALB accessible publicly via the internet.
      internal: make ALB private by restricting it to be accessible only within a VPC or connected network.
    
  
  alb.ingress.kubernetes.io/inbound-cidrs
    
      Restrict access to ALB by allowing only the specified IP range (CIDR) to be connected.
      It is particularly useful for controlling access to private applications or internal resources by limiting the range of IPs that can access ALB.
      If Ingress is part of IngressGroup, the inbound-cidrs annotation applies to all Ingress resources in the group.
      However, inbound-cidrs applies only to ports defined in that Ingress.
      Therefore, if multiple ingresses share the same ingress port, you must define inbound-cidrs only for one of those ingresses to prevent collisions.
      Specifying alb.ingress.kubernetes.io/security-groups in Ingress ignores inbound-cidrs annotations.
      If you do not specify the inbound-cidrs annotation:
        
          0.0.0.0/0 (all IPv4 addresses) will be allowed if the ALB’s IPAddressType is set to ipv4.
          0.0.0.0/0 and ::/0 (all IPv4 and IPv6 addresses) will be allowed if the ALB’s IPAddressType is set to dualstack.
        
      
    
  
  alb.ingress.kubernetes.io/security-groups
    
      Specifies the security group to connect to the load balancer.
      Without that announcement, the controller automatically creates a security group, connects the security group to the load balancer, and allows listen-ports access to inbound-cidrs and security-group-prefix-lists. The Node/Pod security group also modifies this security group to allow inbound traffic. In other words, if you want to apply the security group I created to Pod and Node, you can use it.
      Example
        
          alb.ingress.kubernetes.io/security-groups: sg-xxxx, nameOfSg1, nameOfSg2
        
      
    
  
  alb.ingress.kubernetes.io/manage-backend-security-group-rules
    
      When specifying security security groups, specify whether the controller configures security group rules on Node/Pod for traffic access.
      Applies only if you specify a security group through alb.ingress.kubernetes.io/security-groups .
      Example: alb.ingress.kubernetes.io/manage-backend-security-group-rules: &quot;true&quot;
    
  




📝 Best Practices



1. Ingress Groups:
   - Use meaningful group names
   - Set appropriate order
   - Share ALB efficiently

2. Security:
   - Use appropriate scheme
   - Implement CIDR restrictions
   - Configure security groups

3. Routing:
   - Choose correct target type
   - Set proper protocols
   - Define clear conditions






📚 Reference

  AWS Load Balancer Controller Documentation
  AWS Blog: Exposing Kubernetes Applications
  AWS Load Balancer Controller Annotations

",
            "wordcount": "2206",
            "inLanguage": "en",
            "dateCreated": "2025-01-15/",
            "datePublished": "2025-01-15/",
            "dateModified": "2025-01-15/",
            "author": {
                "@type": "Person",
                "name": "Somaz",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "DevOps Engineer",
                "url": "https://somaz94.github.io/authors/somaz/",
                "sameAs": [
                    "https://github.com/somaz94","https://www.linkedin.com/in/somaz"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "somaz",
                "url": "https://somaz94.github.io/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://somaz94.github.io/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "AWS",
            "articleSection": "AWS",
            "keywords": ["aws","kubernetes","ingress","alb"]
        }
        </script>
    </body>
</html>
